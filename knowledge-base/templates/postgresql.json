[
  {
    "id": "postgresql-v5-knex-connection",
    "name": "v5 Knex PostgreSQL Connection",
    "code": "import knex from 'knex';\nimport type { Knex } from 'knex';\nimport type { Application } from './declarations';\n\ndeclare module './declarations' {\n  interface Configuration {\n    postgresqlClient: Knex;\n  }\n}\n\nexport const postgresql = (app: Application) => {\n  const config = app.get('postgresql');\n  const db = knex(config);\n\n  app.set('postgresqlClient', db);\n};",
    "imports": ["knex"],
    "dependencies": ["knex", "pg", "@feathersjs/knex"],
    "featureFlags": ["postgresql"],
    "version": "v5"
  },
  {
    "id": "postgresql-v5-knex-service",
    "name": "v5 Knex PostgreSQL Service",
    "code": "import { KnexService } from '@feathersjs/knex';\nimport type { KnexAdapterParams } from '@feathersjs/knex';\nimport type { Application } from '../../declarations';\nimport type { Message, MessageData, MessagePatch, MessageQuery } from './messages.schema';\n\nexport interface MessageParams extends KnexAdapterParams<MessageQuery> {}\n\nexport class MessageService extends KnexService<Message, MessageData, MessageParams, MessagePatch> {}\n\nexport const messages = (app: Application) => {\n  app.use('messages', new MessageService({\n    paginate: app.get('paginate'),\n    Model: app.get('postgresqlClient'),\n    name: 'messages',\n    multi: ['remove']\n  }));\n};",
    "imports": ["@feathersjs/knex"],
    "dependencies": ["@feathersjs/knex", "knex", "pg"],
    "featureFlags": ["postgresql"],
    "version": "v5"
  },
  {
    "id": "postgresql-v5-migration",
    "name": "v5 Knex Migration",
    "code": "import type { Knex } from 'knex';\n\nexport async function up(knex: Knex): Promise<void> {\n  await knex.schema.createTable('messages', (table) => {\n    table.increments('id');\n    table.string('text', 400).notNullable();\n    table.integer('userId').references('id').inTable('users');\n    table.timestamp('createdAt').defaultTo(knex.fn.now());\n    table.timestamp('updatedAt').defaultTo(knex.fn.now());\n  });\n}\n\nexport async function down(knex: Knex): Promise<void> {\n  await knex.schema.dropTable('messages');\n}",
    "imports": ["knex"],
    "dependencies": ["knex"],
    "featureFlags": ["postgresql"],
    "version": "v5"
  },
  {
    "id": "postgresql-v4-knex-connection",
    "name": "v4 Knex PostgreSQL Connection",
    "code": "const knex = require('knex');\n\nmodule.exports = function (app) {\n  const { client, connection } = app.get('postgresql');\n  const db = knex({ client, connection, useNullAsDefault: false });\n\n  app.set('knexClient', db);\n};",
    "imports": ["knex"],
    "dependencies": ["knex", "pg", "feathers-knex"],
    "featureFlags": ["postgresql"],
    "version": "v4"
  }
]
