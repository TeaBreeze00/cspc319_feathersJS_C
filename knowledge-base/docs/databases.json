[
  {
    "id": "v5-doc-048",
    "title": "Database Adapters Overview",
    "content": "# Overview\n\nFeathers database adapters are modules that provide [services](../services.md) that implement standard [CRUD](https://en.wikipedia.org/wiki/Create,_read,_update_and_delete) functionality for a specific database. They use a [common API](./common.md) for initialization and settings, and they provide a [common query syntax](./querying.md).\n\n\n\n## Core Adapters\n\nThe following data storage adapters are available in Feathers core\n\n| Core Package         | Supported Data Stores                                                                                          |\n| -------------------- | -------------------------------------------------------------------------------------------------------------- |\n| [Memory](./memory)   | Memory                                                                                                         |\n| [MongoDB](./mongodb) | MongoDB                                                                                                        |\n| [SQL (Knex)](./knex) | MySQL<br/> MariaDB <br/> PostgreSQL<br/> CockroachDB<br/> SQLite<br/> Amazon Redshift<br/> OracleDB<br/> MSSQL |\n\n## Community Adapters\n\nThere are also many community maintained adapters for other databases and ORMs which can be found on the [Ecosystem page](/ecosystem/?cat=Database&sort=lastPublish).",
    "version": "v5",
    "tokens": [
      "database",
      "adapters",
      "overview",
      "feathers",
      "modules",
      "provide",
      "services",
      "md",
      "implement",
      "standard",
      "crud",
      "https",
      "en",
      "wikipedia",
      "org",
      "wiki",
      "create",
      "read",
      "update",
      "delete",
      "functionality",
      "specific",
      "use",
      "common",
      "api",
      "initialization",
      "settings",
      "query",
      "syntax",
      "querying",
      "core",
      "following",
      "data",
      "storage",
      "available",
      "package",
      "supported",
      "stores",
      "memory",
      "mongodb",
      "sql",
      "knex",
      "mysql",
      "br",
      "mariadb",
      "postgresql",
      "cockroachdb",
      "sqlite",
      "amazon",
      "redshift",
      "oracledb",
      "mssql",
      "community",
      "also",
      "many",
      "maintained",
      "databases",
      "orms",
      "found",
      "ecosystem",
      "page",
      "cat",
      "sort",
      "lastpublish"
    ],
    "category": "databases",
    "source": {
      "path": "api/databases/adapters.md"
    },
    "tags": [
      "database",
      "adapters",
      "knex",
      "mongodb",
      "memory"
    ]
  },
  {
    "id": "v5-doc-049",
    "title": "Common Database API",
    "content": "# Common API\n\nThe Feathers database adapters implement a common interface for initialization, pagination, extending and querying. This chapter describes the common adapter initialization and options, how to enable and use pagination, the details on how specific service methods behave and how to extend an adapter with custom functionality.\n\n\n\n## Initialization\n\n### `new <Name>Service(options)`\n\nEach adapter exports a `<Name>Service` class that can be exported and extended.\n\n```ts\nimport { NameService } from 'feathers-<name>'\n\napp.use('/messages', new NameService())\napp.use('/messages', new NameService({ id, events, paginate }))\n```\n\n### Options\n\nThe following options are available for all database adapters:\n\n- `id {string}` (_optional_) - The name of the id field property (usually set by default to `id` or `_id`).\n- `paginate {Object}` (_optional_) - A [pagination object](#pagination) containing a `default` and `max` page size\n- `multi {string[]|boolean}` (_optional_, default: `false`) - Allow `create` with arrays and `patch` and `remove` with id `null` to change multiple items. Can be `true` for all methods or an array of allowed methods (e.g. `[ 'remove', 'create' ]`)\n\nThe following legacy options are still available but should be avoided:\n\n- `events {string[]}` (_optional_, **deprecated**) - A list of [custom service events](../events.md#custom-events) sent by this service. Use the `events` option when [registering the service with app.use](../application.md#usepath-service--options) instead.\n- `operators {string[]}` (_optional_, **deprecated**) - A list of additional non-standard query parameters to allow (e.g `[ '$regex' ]`). Not necessary when using a [query schema](../schema/validators.md#validatequery)\n- `filters {Object}` (_optional_, **deprecated**) - An object of additional top level query filters, e.g. `{ $populate: true }`. Can also be a converter function like `{ $ignoreCase: (value) => value === 'true' ? true : false }`. Not necessary when using a [query schema](../schema/validators.md#validatequery)\n\nFor database specific options see the adapter documentation.\n\n## Pagination\n\nWhen initializing an adapter you can set the following pagination options in the `paginate` object:\n\n- `default` - Sets the default number of items when `$limit` is not set\n- `max` - Sets the maximum allowed number of items per page (even if the `$limit` query parameter is set higher)\n\nWhen `paginate.default` is set, `find` will return a _page object_ (instead of the normal array) in the following form:\n\n```\n{\n  \"total\": \"<total number of records>\",\n  \"limit\": \"<max number of items per page>\",\n  \"skip\": \"<number of skipped items (offset)>\",\n  \"data\": [/* data */]\n}\n```\n\nThe pagination options can be set as follows:\n\n```js\nconst service = require('feathers-<db-name>')\n\n// Set the `paginate` option during initialization\napp.use(\n  '/todos',\n  service({\n    paginate: {\n      default: 5,\n      max: 25\n    }\n  })\n)\n\n// override pagination in `params.paginate` for this call\napp.service('todos').find({\n  paginate: {\n    default: 100,\n    max: 200\n  }\n})\n\n// disable pagination for this call\napp.service('todos').find({\n  paginate: false\n})\n```\n\n\n\n## params.adapter\n\nSetting the `adapter` in the [service method `params`](../services.md#params) allows do dynamically modify the database adapter options based on the request. This e.g. allows to temporarily allow multiple entry creation/changes or the pagination settings.\n\n```ts\nconst messages = [\n  {\n    text: 'message 1'\n  },\n  {\n    text: 'message 2'\n  }\n]\n\n// Enable multiple entry insertion for this request\napp.service('messages').create(messages, {\n  adapter: {\n    multi: true\n  }\n})\n```\n\n\n\n## params.paginate\n\nSetting `paginate` in the [service method `params`](../services.md#params) allows to change or disable the default pagination for a single request:\n\n```ts\n// Get all messages as an array\nconst allMessages = await app.service('messages').find({\n  paginate: false\n})\n```\n\n## Extending Adapters\n\nTh\n\n[... content truncated for knowledge base ...]",
    "version": "v5",
    "tokens": [
      "common",
      "database",
      "api",
      "feathers",
      "adapters",
      "implement",
      "interface",
      "initialization",
      "pagination",
      "extending",
      "querying",
      "chapter",
      "describes",
      "adapter",
      "options",
      "enable",
      "use",
      "details",
      "specific",
      "service",
      "methods",
      "behave",
      "extend",
      "custom",
      "functionality",
      "new",
      "name",
      "exports",
      "class",
      "exported",
      "extended",
      "ts",
      "import",
      "nameservice",
      "app",
      "messages",
      "id",
      "events",
      "paginate",
      "following",
      "available",
      "string",
      "optional",
      "field",
      "property",
      "usually",
      "set",
      "default",
      "object",
      "containing",
      "max",
      "page",
      "size",
      "multi",
      "boolean",
      "false",
      "allow",
      "create",
      "arrays",
      "patch",
      "remove",
      "null",
      "change",
      "multiple",
      "items",
      "true",
      "array",
      "allowed",
      "legacy",
      "still",
      "avoided",
      "deprecated",
      "list",
      "md",
      "sent",
      "option",
      "registering",
      "application",
      "usepath",
      "instead",
      "operators",
      "additional",
      "non",
      "standard",
      "query",
      "parameters",
      "regex",
      "necessary",
      "using",
      "schema",
      "validators",
      "validatequery",
      "filters",
      "top",
      "level",
      "populate",
      "also",
      "converter",
      "function",
      "like",
      "ignorecase",
      "value",
      "see",
      "documentation",
      "initializing",
      "sets",
      "number",
      "limit",
      "maximum",
      "per",
      "even",
      "if",
      "parameter",
      "higher",
      "find",
      "return",
      "normal",
      "form",
      "total",
      "records",
      "skip",
      "skipped",
      "offset",
      "data",
      "follows",
      "js",
      "const",
      "require",
      "db",
      "todos",
      "25",
      "override",
      "params",
      "call",
      "100",
      "200",
      "disable",
      "setting",
      "method",
      "services",
      "allows",
      "dynamically",
      "modify",
      "based",
      "request",
      "temporarily",
      "entry",
      "creation",
      "changes",
      "settings",
      "text",
      "message",
      "insertion",
      "single",
      "get",
      "allmessages",
      "await",
      "th",
      "content",
      "truncated",
      "knowledge",
      "base"
    ],
    "category": "databases",
    "source": {
      "path": "api/databases/common.md"
    },
    "tags": [
      "database",
      "common",
      "pagination",
      "multi",
      "params",
      "find",
      "get",
      "create",
      "patch",
      "remove"
    ]
  },
  {
    "id": "v5-doc-050",
    "title": "Knex (SQL) Adapter",
    "content": "# SQL Databases\n\n\n\nSupport for SQL databases like PostgreSQL, MySQL, MariaDB, SQLite or MSSQL is provided in Feathers via the `@feathersjs/knex` database adapter which uses [KnexJS](https://knexjs.org/). Knex is a fast and flexible query builder for SQL and supports many databases without the overhead of a full blown ORM like Sequelize. It still provides an intuitive syntax and more advanced tooling like migration support.\n\n```bash\n$ npm install --save @feathersjs/knex\n```\n\n\n\n## API\n\n### KnexService(options)\n\n`new KnexService(options)` returns a new service instance initialized with the given options. The following example extends the `KnexService` and then uses the `sqliteClient` (or relevant client for your SQL database type) from the app configuration and provides it to the `Model` option, which is passed to the new `MessagesService`.\n\n```ts\nimport type { Params } from '@feathersjs/feathers'\nimport { KnexService } from '@feathersjs/knex'\nimport type { KnexAdapterParams, KnexAdapterOptions } from '@feathersjs/knex'\n\nimport type { Application } from '../../declarations'\nimport type { Messages, MessagesData, MessagesQuery } from './messages.schema'\n\nexport interface MessagesParams extends KnexAdapterParams<MessagesQuery> {}\n\nexport class MessagesService<ServiceParams extends Params = MessagesParams> extends KnexService<\n  Messages,\n  MessagesData,\n  ServiceParams\n> {}\n\nexport const messages = (app: Application) => {\n  const options: KnexAdapterOptions = {\n    paginate: app.get('paginate'),\n    Model: app.get('sqliteClient'),\n    name: 'messages'\n  }\n  app.use('messages', new MessagesService(options))\n}\n```\n\n### Options\n\nThe Knex specific adapter options are:\n\n- `Model {Knex}` (**required**) - The KnexJS database instance\n- `name {string}` (**required**) - The name of the table\n- `schema {string}` (_optional_) - The name of the schema table prefix (example: `schema.table`)\n- `tableOptions {only: boolean` (_optional_) - For PostgreSQL only. Argument for passing options to knex db builder. ONLY keyword is used before the tableName to discard inheriting tables' data. (https://knexjs.org/guide/query-builder.html#common)\n- `extendedOperators {[string]: string}` (_optional_) - A map defining additional operators for the query builder. Example: `{ $fulltext: '@@' }` for PostgreSQL full text search. See [Knex source](https://github.com/knex/knex/blob/master/lib/formatter/wrappingFormatter.js#L10) for operators supported by Knex.\n\nThe [common API options](./common.md#options) are:\n\n- `id {string}` (_optional_, default: `'id'`) - The name of the id field property. By design, Knex will always add an `id` property.\n- `paginate {Object}` (_optional_) - A [pagination object](#pagination) containing a `default` and `max` page size\n- `multi {string[]|boolean}` (_optional_, default: `false`) - Allow `create` with arrays and `patch` and `remove` with id `null` to change multiple items. Can be `true` for all methods or an array of allowed methods (e.g. `[ 'remove', 'create' ]`)\n\nThere are additionally several legacy options in the [common API options](./common.md#options)\n\n### getModel([params])\n\n`service.getModel([params])` returns the [Knex](https://knexjs.org/guide/query-builder.html) client for this table.\n\n### db(params)\n\n`service.db([params])` returns the Knex database instance for a request. This will include the `schema` table prefix and use a transaction if passed in `params`.\n\n### createQuery(params)\n\n`service.createQuery(params)` returns a query builder for a service request, including all conditions matching the query syntax. This method can be overriden to e.g. [include associations](#associations) or used in a hook customize the query and then passing it to the service call as [params.knex](#paramsknex).\n\n```ts\napp.service('messages').hooks({\n  before: {\n    find: [\n      async (context: HookContext) => {\n        const query = context.service.createQuery(context.params)\n\n        // do something with query here\n        query.orderBy(\n\n[... content truncated for knowledge base ...]",
    "version": "v5",
    "tokens": [
      "knex",
      "sql",
      "adapter",
      "databases",
      "support",
      "like",
      "postgresql",
      "mysql",
      "mariadb",
      "sqlite",
      "mssql",
      "provided",
      "feathers",
      "via",
      "feathersjs",
      "database",
      "uses",
      "knexjs",
      "https",
      "org",
      "fast",
      "flexible",
      "query",
      "builder",
      "supports",
      "many",
      "without",
      "overhead",
      "full",
      "blown",
      "orm",
      "sequelize",
      "still",
      "provides",
      "intuitive",
      "syntax",
      "advanced",
      "tooling",
      "migration",
      "bash",
      "npm",
      "install",
      "save",
      "api",
      "knexservice",
      "options",
      "new",
      "returns",
      "service",
      "instance",
      "initialized",
      "given",
      "following",
      "example",
      "extends",
      "sqliteclient",
      "relevant",
      "client",
      "type",
      "app",
      "configuration",
      "model",
      "option",
      "passed",
      "messagesservice",
      "ts",
      "import",
      "params",
      "knexadapterparams",
      "knexadapteroptions",
      "application",
      "declarations",
      "messages",
      "messagesdata",
      "messagesquery",
      "schema",
      "export",
      "interface",
      "messagesparams",
      "class",
      "serviceparams",
      "const",
      "paginate",
      "get",
      "name",
      "use",
      "specific",
      "required",
      "string",
      "table",
      "optional",
      "prefix",
      "tableoptions",
      "boolean",
      "argument",
      "passing",
      "db",
      "keyword",
      "used",
      "tablename",
      "discard",
      "inheriting",
      "tables",
      "data",
      "guide",
      "html",
      "common",
      "extendedoperators",
      "map",
      "defining",
      "additional",
      "operators",
      "fulltext",
      "text",
      "search",
      "see",
      "source",
      "github",
      "com",
      "blob",
      "master",
      "lib",
      "formatter",
      "wrappingformatter",
      "js",
      "l10",
      "supported",
      "md",
      "id",
      "default",
      "field",
      "property",
      "design",
      "always",
      "add",
      "object",
      "pagination",
      "containing",
      "max",
      "page",
      "size",
      "multi",
      "false",
      "allow",
      "create",
      "arrays",
      "patch",
      "remove",
      "null",
      "change",
      "multiple",
      "items",
      "true",
      "methods",
      "array",
      "allowed",
      "additionally",
      "several",
      "legacy",
      "getmodel",
      "request",
      "include",
      "transaction",
      "if",
      "createquery",
      "including",
      "conditions",
      "matching",
      "method",
      "overriden",
      "associations",
      "hook",
      "customize",
      "call",
      "paramsknex",
      "hooks",
      "find",
      "async",
      "context",
      "hookcontext",
      "something",
      "orderby",
      "content",
      "truncated",
      "knowledge",
      "base"
    ],
    "category": "databases",
    "source": {
      "path": "api/databases/knex.md"
    },
    "tags": [
      "knex",
      "sql",
      "postgresql",
      "mysql",
      "sqlite",
      "transactions"
    ]
  },
  {
    "id": "v5-doc-051",
    "title": "MongoDB Adapter",
    "content": "# MongoDB\n\n\n\nSupport for MongoDB is provided in Feathers via the `@feathersjs/mongodb` database adapter which uses the [MongoDB Client for Node.js](https://www.npmjs.com/package/mongodb). The adapter uses the [MongoDB Aggregation Framework](https://www.mongodb.com/docs/manual/aggregation/), internally, and enables using Feathers' friendly syntax with the full power of [aggregation operators](https://www.mongodb.com/docs/manual/meta/aggregation-quick-reference/). The adapter automatically uses the [MongoDB Query API](https://www.mongodb.com/docs/drivers/node/current/quick-reference/) when you need features like [Collation](https://www.mongodb.com/docs/drivers/node/current/fundamentals/collations/).\n\n```bash\n$ npm install --save @feathersjs/mongodb\n```\n\n\n\n## API\n\n### `MongoDBService(options)`\n\n`new MongoDBService(options)` returns a new service instance initialized with the given options. The following example extends the `MongoDBService` and then uses the `mongodbClient` from the app configuration and provides it to the `Model` option, which is passed to the new `MessagesService`.\n\n```ts\nimport type { Params } from '@feathersjs/feathers'\nimport { MongoDBService } from '@feathersjs/mongodb'\nimport type { MongoDBAdapterParams, MongoDBAdapterOptions } from '@feathersjs/mongodb'\n\nimport type { Application } from '../../declarations'\nimport type { Messages, MessagesData, MessagesQuery } from './messages.schema'\n\nexport interface MessagesParams extends MongoDBAdapterParams<MessagesQuery> {}\n\nexport class MessagesService<ServiceParams extends Params = MessagesParams> extends MongoDBService<\n  Messages,\n  MessagesData,\n  ServiceParams\n> {}\n\nexport const messages = (app: Application) => {\n  const options: MongoDBAdapterOptions = {\n    paginate: app.get('paginate'),\n    Model: app.get('mongodbClient').then((db) => db.collection('messages'))\n  }\n  app.use('messages', new MessagesService(options))\n}\n```\n\nHere's an overview of the `options` object:\n\n### Options\n\nMongoDB adapter specific options are:\n\n- `Model {Promise<MongoDBCollection>}` (**required**) - A Promise that resolves with the MongoDB collection instance. This can also be the return value of an `async` function without `await`\n- `disableObjectify {boolean}` (_optional_, default `false`) - This will disable conversion of the id field to a MongoDB ObjectID if you want to e.g. use normal strings\n- `useEstimatedDocumentCount {boolean}` (_optional_, default `false`) - If `true` document counting will rely on `estimatedDocumentCount` instead of `countDocuments`\n\nThe [common API options](./common.md#options) are:\n\n- `id {string}` (_optional_, default: `'_id'`) - The name of the id field property. By design, MongoDB will always add an `_id` property. But you can choose to use a different property as your primary key.\n- `paginate {Object}` (_optional_) - A [pagination object](#pagination) containing a `default` and `max` page size\n- `multi {string[]|boolean}` (_optional_, default: `false`) - Allow `create` with arrays and `patch` and `remove` with id `null` to change multiple items. Can be `true` for all methods or an array of allowed methods (e.g. `[ 'remove', 'create' ]`)\n\nThere are additionally several legacy options in the [common API options](./common.md#options)\n\n### getModel()\n\n`getModel([params])` returns a Promise that resolves with the MongoDB collection object. The optional `params` is the service parameters which may allow to override the collection via [params.adapter](./common.md#paramsadapter).\n\n### aggregateRaw(params)\n\nThe `find` method has been split into separate utilities for converting params into different types of MongoDB requests. When using `params.pipeline`, the `aggregateRaw` method is used to convert the Feathers params into a MongoDB aggregation pipeline with the `model.aggregate` method. This method returns a raw MongoDB Cursor object, which can be used to perform custom pagination or in custom server scripts, if desired.\n\n### findRaw(params)\n\n`findRaw(params\n\n[... content truncated for knowledge base ...]",
    "version": "v5",
    "tokens": [
      "mongodb",
      "adapter",
      "support",
      "provided",
      "feathers",
      "via",
      "feathersjs",
      "database",
      "uses",
      "client",
      "node",
      "js",
      "https",
      "www",
      "npmjs",
      "com",
      "package",
      "aggregation",
      "framework",
      "docs",
      "manual",
      "internally",
      "enables",
      "using",
      "friendly",
      "syntax",
      "full",
      "power",
      "operators",
      "meta",
      "quick",
      "reference",
      "automatically",
      "query",
      "api",
      "drivers",
      "current",
      "need",
      "features",
      "like",
      "collation",
      "fundamentals",
      "collations",
      "bash",
      "npm",
      "install",
      "save",
      "mongodbservice",
      "options",
      "new",
      "returns",
      "service",
      "instance",
      "initialized",
      "given",
      "following",
      "example",
      "extends",
      "mongodbclient",
      "app",
      "configuration",
      "provides",
      "model",
      "option",
      "passed",
      "messagesservice",
      "ts",
      "import",
      "type",
      "params",
      "mongodbadapterparams",
      "mongodbadapteroptions",
      "application",
      "declarations",
      "messages",
      "messagesdata",
      "messagesquery",
      "schema",
      "export",
      "interface",
      "messagesparams",
      "class",
      "serviceparams",
      "const",
      "paginate",
      "get",
      "db",
      "collection",
      "use",
      "overview",
      "object",
      "specific",
      "promise",
      "mongodbcollection",
      "required",
      "resolves",
      "also",
      "return",
      "value",
      "async",
      "function",
      "without",
      "await",
      "disableobjectify",
      "boolean",
      "optional",
      "default",
      "false",
      "disable",
      "conversion",
      "id",
      "field",
      "objectid",
      "if",
      "want",
      "normal",
      "strings",
      "useestimateddocumentcount",
      "true",
      "document",
      "counting",
      "rely",
      "estimateddocumentcount",
      "instead",
      "countdocuments",
      "common",
      "md",
      "string",
      "name",
      "property",
      "design",
      "always",
      "add",
      "choose",
      "different",
      "primary",
      "key",
      "pagination",
      "containing",
      "max",
      "page",
      "size",
      "multi",
      "allow",
      "create",
      "arrays",
      "patch",
      "remove",
      "null",
      "change",
      "multiple",
      "items",
      "methods",
      "array",
      "allowed",
      "additionally",
      "several",
      "legacy",
      "getmodel",
      "parameters",
      "override",
      "paramsadapter",
      "aggregateraw",
      "find",
      "method",
      "split",
      "into",
      "separate",
      "utilities",
      "converting",
      "types",
      "requests",
      "pipeline",
      "used",
      "convert",
      "aggregate",
      "raw",
      "cursor",
      "perform",
      "custom",
      "server",
      "scripts",
      "desired",
      "findraw",
      "content",
      "truncated",
      "knowledge",
      "base"
    ],
    "category": "databases",
    "source": {
      "path": "api/databases/mongodb.md"
    },
    "tags": [
      "mongodb",
      "nosql",
      "aggregation",
      "objectid",
      "pipeline"
    ]
  },
  {
    "id": "v5-doc-052",
    "title": "Memory Adapter",
    "content": "# Memory Adapter\n\n\n\n`@feathersjs/memory` is a service adatper for in-memory data storage that works on all platforms. It is normally not used to store data on a production server but can be useful for data that isn't persistent and to e.g. cache data in browser or React Native applications.\n\n```bash\n$ npm install --save @feathersjs/memory\n```\n\n\n\n## API\n\n### Usage\n\n```ts\nimport { MemoryService } from '@feathersjs/memory'\n\ntype Message = {\n  id: number\n  text: string\n}\n\ntype MessageData = Pick<Message, 'text'>\n\nclass MyMessageService extends MemoryService<Message, MessageData> {}\n\napp.use('messages', new MyMessageService({}))\n```\n\n### Options\n\nThe following options are available:\n\n- `id` (_optional_, default: `'id'`) - The name of the id field property.\n- `startId` (_optional_, default: `0`) - An id number to start with that will be incremented for every new record (unless it is already set).\n- `store` (_optional_) - An object with id to item assignments to pre-initialize the data store\n- `events` (_optional_) - A list of [custom service events](https://docs.feathersjs.com/api/events.html#custom-events) sent by this service\n- `paginate` (_optional_) - A [pagination object](https://docs.feathersjs.com/api/databases/common.html#pagination) containing a `default` and `max` page size\n- `allow` (_optional_) - A list of additional query parameters to allow\n- `multi` (_optional_) - Allow `create` with arrays and `update` and `remove` with `id` `null` to change multiple items. Can be `true` for all methods or an array of allowed methods (e.g. `[ 'remove', 'create' ]`)",
    "version": "v5",
    "tokens": [
      "memory",
      "adapter",
      "feathersjs",
      "service",
      "adatper",
      "data",
      "storage",
      "works",
      "platforms",
      "normally",
      "used",
      "store",
      "production",
      "server",
      "useful",
      "isn",
      "persistent",
      "cache",
      "browser",
      "react",
      "native",
      "applications",
      "bash",
      "npm",
      "install",
      "save",
      "api",
      "usage",
      "ts",
      "import",
      "memoryservice",
      "type",
      "message",
      "id",
      "number",
      "text",
      "string",
      "messagedata",
      "pick",
      "class",
      "mymessageservice",
      "extends",
      "app",
      "use",
      "messages",
      "new",
      "options",
      "following",
      "available",
      "optional",
      "default",
      "name",
      "field",
      "property",
      "startid",
      "start",
      "incremented",
      "record",
      "unless",
      "already",
      "set",
      "object",
      "item",
      "assignments",
      "pre",
      "initialize",
      "events",
      "list",
      "custom",
      "https",
      "docs",
      "com",
      "html",
      "sent",
      "paginate",
      "pagination",
      "databases",
      "common",
      "containing",
      "max",
      "page",
      "size",
      "allow",
      "additional",
      "query",
      "parameters",
      "multi",
      "create",
      "arrays",
      "update",
      "remove",
      "null",
      "change",
      "multiple",
      "items",
      "true",
      "methods",
      "array",
      "allowed"
    ],
    "category": "databases",
    "source": {
      "path": "api/databases/memory.md"
    },
    "tags": [
      "memory",
      "inmemory",
      "testing",
      "prototype"
    ]
  },
  {
    "id": "v5-doc-053",
    "title": "Query Syntax",
    "content": "# Querying\n\nAll official database adapters support a common way for querying, sorting, limiting and selecting `find` and `get` method calls as part of `params.query`. Querying also applies `update`, `patch` and `remove` method calls.\n\n\n\n## Filters\n\nFilters are special properties (starting with a `$`) added at the top level of a query. They can determine page settings, the properties to select and more.\n\n### $limit\n\n`$limit` will return only the number of results you specify:\n\n```js\n// Retrieves the first two unread messages\napp.service('messages').find({\n  query: {\n    $limit: 2,\n    read: false\n  }\n})\n```\n\n```\nGET /messages?$limit=2&read=false\n```\n\n\n\n### $skip\n\n`$skip` will skip the specified number of results:\n\n```js\n// Retrieves the next two unread messages\napp.service('messages').find({\n  query: {\n    $limit: 2,\n    $skip: 2,\n    read: false\n  }\n})\n```\n\n```\nGET /messages?$limit=2&$skip=2&read=false\n```\n\n### $sort\n\n`$sort` will sort based on the object you provide. It can contain a list of properties by which to sort mapped to the order (`1` ascending, `-1` descending).\n\n```js\n// Find the 10 newest messages\napp.service('messages').find({\n  query: {\n    $limit: 10,\n    $sort: {\n      createdAt: -1\n    }\n  }\n})\n```\n\n```\n/messages?$limit=10&$sort[createdAt]=-1\n```\n\n### $select\n\n`$select` allows to pick which fields to include in the result. This will work for any service method.\n\n```js\n// Only return the `text` and `userId` field in a message\napp.service('messages').find({\n  query: {\n    $select: ['text', 'userId']\n  }\n})\n\napp.service('messages').get(1, {\n  query: {\n    $select: ['text']\n  }\n})\n```\n\n```\nGET /messages?$select[]=text&$select[]=userId\nGET /messages/1?$select[]=text\n```\n\n### $or\n\nFind all records that match any of the given criteria.\n\n```js\n// Find all messages that are not marked as archived\n// or any message from room 2\napp.service('messages').find({\n  query: {\n    $or: [{ archived: { $ne: true } }, { roomId: 2 }]\n  }\n})\n```\n\n```\nGET /messages?$or[0][archived][$ne]=true&$or[1][roomId]=2\n```\n\n### $and\n\nFind all records that match all of the given criteria.\n\n```js\n// Find all messages that are not marked as archived and in room 2\napp.service('messages').find({\n  query: {\n    $and: [{ archived: { $ne: true } }, { roomId: 2 }]\n  }\n})\n```\n\n```\nGET /messages?$and[0][archived][$ne]=true&$and[1][roomId]=2\n```\n\n## Operators\n\nOperators either query a property for a specific value or determine nested special properties (starting with a `$`) that allow querying the property for certain conditions. When multiple operators are set, all conditions have to apply for a property to match.\n\n### Equality\n\nAll fields that do not contain special query parameters are compared directly for equality.\n\n```js\n// Find all unread messages in room #2\napp.service('messages').find({\n  query: {\n    read: false,\n    roomId: 2\n  }\n})\n```\n\n```\nGET /messages?read=false&roomId=2\n```\n\n### $in, $nin\n\nFind all records where the property does (`$in`) or does not (`$nin`) match any of the given values.\n\n```js\n// Find all messages in room 2 or 5\napp.service('messages').find({\n  query: {\n    roomId: {\n      $in: [2, 5]\n    }\n  }\n})\n```\n\n```\nGET /messages?roomId[$in][]=2&roomId[$in][]=5\n```\n\n### $lt, $lte\n\nFind all records where the value is less (`$lt`) or less and equal (`$lte`) to a given value.\n\n```js\n// Find all messages older than a day\nconst DAY_MS = 24 * 60 * 60 * 1000\n\napp.service('messages').find({\n  query: {\n    createdAt: {\n      $lt: new Date().getTime() - DAY_MS\n    }\n  }\n})\n```\n\n```\nGET /messages?createdAt[$lt]=1479664146607\n```\n\n### $gt, $gte\n\nFind all records where the value is more (`$gt`) or more and equal (`$gte`) to a given value.\n\n```js\n// Find all messages within the last day\nconst DAY_MS = 24 * 60 * 60 * 1000\n\napp.service('messages').find({\n  query: {\n    createdAt: {\n      $gt: new Date().getTime() - DAY_MS\n    }\n  }\n})\n```\n\n```\nGET /messages?createdAt[$gt]=1479664146607\n```\n\n### $ne\n\nFind all records that do not equal the given pro\n\n[... content truncated for knowledge base ...]",
    "version": "v5",
    "tokens": [
      "query",
      "syntax",
      "querying",
      "official",
      "database",
      "adapters",
      "support",
      "common",
      "way",
      "sorting",
      "limiting",
      "selecting",
      "find",
      "get",
      "method",
      "calls",
      "part",
      "params",
      "also",
      "applies",
      "update",
      "patch",
      "remove",
      "filters",
      "special",
      "properties",
      "starting",
      "added",
      "top",
      "level",
      "determine",
      "page",
      "settings",
      "select",
      "limit",
      "return",
      "number",
      "results",
      "specify",
      "js",
      "retrieves",
      "first",
      "two",
      "unread",
      "messages",
      "app",
      "service",
      "read",
      "false",
      "skip",
      "specified",
      "next",
      "sort",
      "based",
      "object",
      "provide",
      "contain",
      "list",
      "mapped",
      "order",
      "ascending",
      "descending",
      "10",
      "newest",
      "createdat",
      "allows",
      "pick",
      "fields",
      "include",
      "result",
      "work",
      "text",
      "userid",
      "field",
      "message",
      "records",
      "match",
      "given",
      "criteria",
      "marked",
      "archived",
      "room",
      "ne",
      "true",
      "roomid",
      "operators",
      "property",
      "specific",
      "value",
      "nested",
      "allow",
      "certain",
      "conditions",
      "multiple",
      "set",
      "apply",
      "equality",
      "parameters",
      "compared",
      "directly",
      "nin",
      "values",
      "lt",
      "lte",
      "less",
      "equal",
      "older",
      "day",
      "const",
      "ms",
      "24",
      "60",
      "1000",
      "new",
      "date",
      "gettime",
      "1479664146607",
      "gt",
      "gte",
      "within",
      "last",
      "pro",
      "content",
      "truncated",
      "knowledge",
      "base"
    ],
    "category": "databases",
    "source": {
      "path": "api/databases/querying.md"
    },
    "tags": [
      "query",
      "filter",
      "sort",
      "limit",
      "skip",
      "select",
      "operators",
      "$gt",
      "$lt",
      "$in"
    ]
  },
  {
    "id": "v5-doc-054",
    "title": "Databases: Pagination",
    "content": "Pagination\n\nWhen initializing an adapter you can set the following pagination options in the `paginate` object:\n\n- `default` - Sets the default number of items when `$limit` is not set\n- `max` - Sets the maximum allowed number of items per page (even if the `$limit` query parameter is set higher)\n\nWhen `paginate.default` is set, `find` will return a _page object_ (instead of the normal array) in the following form:\n\n```\n{\n  \"total\": \"<total number of records>\",\n  \"limit\": \"<max number of items per page>\",\n  \"skip\": \"<number of skipped items (offset)>\",\n  \"data\": [/* data */]\n}\n```\n\nThe pagination options can be set as follows:\n\n```js\nconst service = require('feathers-<db-name>')\n\n// Set the `paginate` option during initialization\napp.use(\n  '/todos',\n  service({\n    paginate: {\n      default: 5,\n      max: 25\n    }\n  })\n)\n\n// override pagination in `params.paginate` for this call\napp.service('todos').find({\n  paginate: {\n    default: 100,\n    max: 200\n  }\n})\n\n// disable pagination for this call\napp.service('todos').find({\n  paginate: false\n})\n```\n\n\n\n",
    "version": "v5",
    "tokens": [
      "databases",
      "pagination",
      "initializing",
      "adapter",
      "set",
      "following",
      "options",
      "paginate",
      "object",
      "default",
      "sets",
      "number",
      "items",
      "limit",
      "max",
      "maximum",
      "allowed",
      "per",
      "page",
      "even",
      "if",
      "query",
      "parameter",
      "higher",
      "find",
      "return",
      "instead",
      "normal",
      "array",
      "form",
      "total",
      "records",
      "skip",
      "skipped",
      "offset",
      "data",
      "follows",
      "js",
      "const",
      "service",
      "require",
      "feathers",
      "db",
      "name",
      "option",
      "initialization",
      "app",
      "use",
      "todos",
      "25",
      "override",
      "params",
      "call",
      "100",
      "200",
      "disable",
      "false"
    ],
    "category": "databases",
    "source": {
      "path": "api/databases/common.md"
    },
    "tags": [
      "database",
      "pagination"
    ]
  },
  {
    "id": "v5-doc-055",
    "title": "Databases: params.adapter",
    "content": "params.adapter\n\nSetting the `adapter` in the [service method `params`](../services.md#params) allows do dynamically modify the database adapter options based on the request. This e.g. allows to temporarily allow multiple entry creation/changes or the pagination settings.\n\n```ts\nconst messages = [\n  {\n    text: 'message 1'\n  },\n  {\n    text: 'message 2'\n  }\n]\n\n// Enable multiple entry insertion for this request\napp.service('messages').create(messages, {\n  adapter: {\n    multi: true\n  }\n})\n```\n\n\n\n",
    "version": "v5",
    "tokens": [
      "databases",
      "params",
      "adapter",
      "setting",
      "service",
      "method",
      "services",
      "md",
      "allows",
      "dynamically",
      "modify",
      "database",
      "options",
      "based",
      "request",
      "temporarily",
      "allow",
      "multiple",
      "entry",
      "creation",
      "changes",
      "pagination",
      "settings",
      "ts",
      "const",
      "messages",
      "text",
      "message",
      "enable",
      "insertion",
      "app",
      "create",
      "multi",
      "true"
    ],
    "category": "databases",
    "source": {
      "path": "api/databases/common.md"
    },
    "tags": [
      "database",
      "params",
      "adapter"
    ]
  },
  {
    "id": "v5-doc-056",
    "title": "Databases: Extending Adapters",
    "content": "Extending Adapters\n\nThere are two ways to extend existing database adapters. Either by extending the base class or by adding functionality through hooks.\n\n### Classes\n\nAll modules also export an [ES6 class](https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Classes) as `<Name>Service` that can be directly extended. See the [Service CLI guide](../../guides/cli/service.class.md) on how to override existing and implement new methods.\n\n",
    "version": "v5",
    "tokens": [
      "databases",
      "extending",
      "adapters",
      "two",
      "ways",
      "extend",
      "existing",
      "database",
      "base",
      "class",
      "adding",
      "functionality",
      "hooks",
      "classes",
      "modules",
      "also",
      "export",
      "es6",
      "https",
      "developer",
      "mozilla",
      "org",
      "en",
      "docs",
      "web",
      "javascript",
      "reference",
      "name",
      "service",
      "directly",
      "extended",
      "see",
      "cli",
      "guide",
      "guides",
      "md",
      "override",
      "implement",
      "new",
      "methods"
    ],
    "category": "databases",
    "source": {
      "path": "api/databases/common.md"
    },
    "tags": [
      "database",
      "extending",
      "adapters"
    ]
  },
  {
    "id": "v5-doc-057",
    "title": "Query: # Querying",
    "content": "# Querying\n\nAll official database adapters support a common way for querying, sorting, limiting and selecting `find` and `get` method calls as part of `params.query`. Querying also applies `update`, `patch` and `remove` method calls.\n\n\n\n",
    "version": "v5",
    "tokens": [
      "query",
      "querying",
      "official",
      "database",
      "adapters",
      "support",
      "common",
      "way",
      "sorting",
      "limiting",
      "selecting",
      "find",
      "get",
      "method",
      "calls",
      "part",
      "params",
      "also",
      "applies",
      "update",
      "patch",
      "remove"
    ],
    "category": "databases",
    "source": {
      "path": "api/databases/querying.md"
    },
    "tags": [
      "query",
      "querying"
    ]
  },
  {
    "id": "v5-doc-058",
    "title": "Query: Filters",
    "content": "Filters\n\nFilters are special properties (starting with a `$`) added at the top level of a query. They can determine page settings, the properties to select and more.\n\n### $limit\n\n`$limit` will return only the number of results you specify:\n\n```js\n// Retrieves the first two unread messages\napp.service('messages').find({\n  query: {\n    $limit: 2,\n    read: false\n  }\n})\n```\n\n```\nGET /messages?$limit=2&read=false\n```\n\n\n\n### $skip\n\n`$skip` will skip the specified number of results:\n\n```js\n// Retrieves the next two unread messages\napp.service('messages').find({\n  query: {\n    $limit: 2,\n    $skip: 2,\n    read: false\n  }\n})\n```\n\n```\nGET /messages?$limit=2&$skip=2&read=false\n```\n\n### $sort\n\n`$sort` will sort based on the object you provide. It can contain a list of properties by which to sort mapped to the order (`1` ascending, `-1` descending).\n\n```js\n// Find the 10 newest messages\napp.service('messages').find({\n  query: {\n    $limit: 10,\n    $sort: {\n      createdAt: -1\n    }\n  }\n})\n```\n\n```\n/messages?$limit=10&$sort[createdAt]=-1\n```\n\n### $select\n\n`$select` allows to pick which fields to include in the result. This will work for any service method.\n\n```js\n// Only return the `text` and `userId` field in a message\napp.service('messages').find({\n  query: {\n    $select: ['text', 'userId']\n  }\n})\n\napp.service('messages').get(1, {\n  query: {\n    $select: ['text']\n  }\n})\n```\n\n```\nGET /messages?$select[]=text&$select[]=userId\nGET /messages/1?$select[]=text\n```\n\n### $or\n\nFind all records that match any of the given criteria.\n\n```js\n// Find all messages that are not marked as archived\n// or any message from room 2\napp.service('messages').find({\n  query: {\n    $or: [{ archived: { $ne: true } }, { roomId: 2 }]\n  }\n})\n```\n\n```\nGET /messages?$or[0][archived][$ne]=true&$or[1][roomId]=2\n```\n\n### $and\n\nFind all records that match all of the given criteria.\n\n```js\n// Find all messages that are not marked as archived and in room 2\napp.service('messages').find({\n  query: {\n    $and: [{ arch\n\n[... content truncated for knowledge base ...]",
    "version": "v5",
    "tokens": [
      "query",
      "filters",
      "special",
      "properties",
      "starting",
      "added",
      "top",
      "level",
      "determine",
      "page",
      "settings",
      "select",
      "limit",
      "return",
      "number",
      "results",
      "specify",
      "js",
      "retrieves",
      "first",
      "two",
      "unread",
      "messages",
      "app",
      "service",
      "find",
      "read",
      "false",
      "get",
      "skip",
      "specified",
      "next",
      "sort",
      "based",
      "object",
      "provide",
      "contain",
      "list",
      "mapped",
      "order",
      "ascending",
      "descending",
      "10",
      "newest",
      "createdat",
      "allows",
      "pick",
      "fields",
      "include",
      "result",
      "work",
      "method",
      "text",
      "userid",
      "field",
      "message",
      "records",
      "match",
      "given",
      "criteria",
      "marked",
      "archived",
      "room",
      "ne",
      "true",
      "roomid",
      "arch",
      "content",
      "truncated",
      "knowledge",
      "base"
    ],
    "category": "databases",
    "source": {
      "path": "api/databases/querying.md"
    },
    "tags": [
      "query",
      "filters"
    ]
  },
  {
    "id": "v5-doc-059",
    "title": "Query: Operators",
    "content": "Operators\n\nOperators either query a property for a specific value or determine nested special properties (starting with a `$`) that allow querying the property for certain conditions. When multiple operators are set, all conditions have to apply for a property to match.\n\n### Equality\n\nAll fields that do not contain special query parameters are compared directly for equality.\n\n```js\n// Find all unread messages in room #2\napp.service('messages').find({\n  query: {\n    read: false,\n    roomId: 2\n  }\n})\n```\n\n```\nGET /messages?read=false&roomId=2\n```\n\n### $in, $nin\n\nFind all records where the property does (`$in`) or does not (`$nin`) match any of the given values.\n\n```js\n// Find all messages in room 2 or 5\napp.service('messages').find({\n  query: {\n    roomId: {\n      $in: [2, 5]\n    }\n  }\n})\n```\n\n```\nGET /messages?roomId[$in][]=2&roomId[$in][]=5\n```\n\n### $lt, $lte\n\nFind all records where the value is less (`$lt`) or less and equal (`$lte`) to a given value.\n\n```js\n// Find all messages older than a day\nconst DAY_MS = 24 * 60 * 60 * 1000\n\napp.service('messages').find({\n  query: {\n    createdAt: {\n      $lt: new Date().getTime() - DAY_MS\n    }\n  }\n})\n```\n\n```\nGET /messages?createdAt[$lt]=1479664146607\n```\n\n### $gt, $gte\n\nFind all records where the value is more (`$gt`) or more and equal (`$gte`) to a given value.\n\n```js\n// Find all messages within the last day\nconst DAY_MS = 24 * 60 * 60 * 1000\n\napp.service('messages').find({\n  query: {\n    createdAt: {\n      $gt: new Date().getTime() - DAY_MS\n    }\n  }\n})\n```\n\n```\nGET /messages?createdAt[$gt]=1479664146607\n```\n\n### $ne\n\nFind all records that do not equal the given property value.\n\n```js\n// Find all messages that are not marked as archived\napp.service('messages').find({\n  query: {\n    archived: {\n      $ne: true\n    }\n  }\n})\n```\n\n```\nGET /messages?archived[$ne]=true\n```\n\n",
    "version": "v5",
    "tokens": [
      "query",
      "operators",
      "property",
      "specific",
      "value",
      "determine",
      "nested",
      "special",
      "properties",
      "starting",
      "allow",
      "querying",
      "certain",
      "conditions",
      "multiple",
      "set",
      "apply",
      "match",
      "equality",
      "fields",
      "contain",
      "parameters",
      "compared",
      "directly",
      "js",
      "find",
      "unread",
      "messages",
      "room",
      "app",
      "service",
      "read",
      "false",
      "roomid",
      "get",
      "nin",
      "records",
      "given",
      "values",
      "lt",
      "lte",
      "less",
      "equal",
      "older",
      "day",
      "const",
      "ms",
      "24",
      "60",
      "1000",
      "createdat",
      "new",
      "date",
      "gettime",
      "1479664146607",
      "gt",
      "gte",
      "within",
      "last",
      "ne",
      "marked",
      "archived",
      "true"
    ],
    "category": "databases",
    "source": {
      "path": "api/databases/querying.md"
    },
    "tags": [
      "query",
      "operators"
    ]
  },
  {
    "id": "v5-doc-060",
    "title": "Query: Search",
    "content": "Search\n\nSearching is not part of the common querying syntax since it is very specific to the database you are using. For built in databases, see the [SQL search](./knex.md#search) and [MongoDb search](./mongodb.md#search) documentation. If you are using [a community supported adapter](/ecosystem/?cat=Database&sort=lastPublish) their documentation may contain additional information on how to implement search functionality.",
    "version": "v5",
    "tokens": [
      "query",
      "search",
      "searching",
      "part",
      "common",
      "querying",
      "syntax",
      "since",
      "specific",
      "database",
      "using",
      "built",
      "databases",
      "see",
      "sql",
      "knex",
      "md",
      "mongodb",
      "documentation",
      "if",
      "community",
      "supported",
      "adapter",
      "ecosystem",
      "cat",
      "sort",
      "lastpublish",
      "contain",
      "additional",
      "information",
      "implement",
      "functionality"
    ],
    "category": "databases",
    "source": {
      "path": "api/databases/querying.md"
    },
    "tags": [
      "query",
      "search"
    ]
  }
]