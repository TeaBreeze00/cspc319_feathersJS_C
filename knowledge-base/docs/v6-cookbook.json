[
  {
    "id": "v6-doc-018",
    "title": "Discord",
    "content": "# Discord\n\nDiscord login can be initialized like any other [OAuth provider](../../api/authentication/oauth) by adding the app id and secret to `config/default.json`:\n\n```js\n{\n  \"authentication\": {\n    \"oauth\": {\n      \"discord\": {\n        \"key\": \" \",\n        \"secret\": \" \",\n        \"scope\": [\"identify email\"]\n      }\n    }\n  }\n}\n```\n\n> __Protip:__ A list of all available Discord scopes can be found [here](https://discord.com/developers/docs/topics/oauth2#shared-resources-oauth2-scopes)\n\n## Application client and secret\n\nThe client id (App ID) and secret can be found [here](https://discord.com/developers/applications/):\n![Discord App](https://cdn.discordapp.com/attachments/468897350807453706/722369856317423656/unknown.png)\n\nNow add this to your src/authentication.ts:\n\n```ts\nimport {OAuthProfile, OAuthStrategy} from \"@feathersjs/authentication-oauth\";\nimport {AuthenticationRequest} from \"@feathersjs/authentication\";\nimport axios, {AxiosRequestConfig} from 'axios'\nimport {ServiceAddons} from '@feathersjs/feathers';\nimport {AuthenticationService, JWTStrategy} from '@feathersjs/authentication';\nimport {LocalStrategy} from '@feathersjs/authentication-local';\nimport {oauth} from '@feathersjs/authentication-oauth';\nimport {Application} from './declarations';\n\nexport default function (app: Application) {\n  const authentication = new AuthenticationService(app);\n\n  authentication.register('jwt', new JWTStrategy());\n  authentication.register('local', new LocalStrategy());\n  authentication.register('discord', new DiscordStrategy());\n\n  app.use('/authentication', authentication);\n  app.configure(oauth());\n}\n\nexport class DiscordStrategy extends OAuthStrategy {\n  async getProfile(authResult: AuthenticationRequest) {\n    // This is the OAuth access token that can be used\n    // for Discord API requests as the Bearer token\n    const accessToken = authResult.access_token;\n    const userOptions: AxiosRequestConfig = {\n      method: 'GET',\n      headers: {'Authorization': `Bearer ${accessToken}`},\n      url: `https://discord.com/api/users/@me`,\n    };\n    const {data} = await axios(userOptions);\n    return data;\n  }\n\n  async getEntityData(profile: OAuthProfile) {\n    // `profile` is the data returned by getProfile\n    const baseData = await super.getEntityData(profile);\n\n    if (profile.avatar == null) {\n      profile.avatar = 'https://cdn.discordapp.com/embed/avatars/0.png'\n    } else {\n      const isGif = profile.avatar.startsWith('a_');\n      profile.avatar = `https://cdn.discordapp.com/avatars/${profile['id']}/${profile['avatar']}.${isGif ? 'gif' : 'png'}`\n    }\n\n    return {\n      ...baseData,\n      username: profile.username,\n      email: profile.email,\n      avatar: profile.avatar,\n    };\n  }\n}\n```\n\nIf you don't need the avatar then you can simply remove the lines of code.\nIf the user doesn't have an avatar then we will set it to Discord's default avatar.",
    "version": "v6",
    "tokens": [
      "discord",
      "login",
      "initialized",
      "like",
      "oauth",
      "provider",
      "api",
      "authentication",
      "adding",
      "app",
      "id",
      "secret",
      "config",
      "default",
      "json",
      "js",
      "key",
      "scope",
      "identify",
      "email",
      "protip",
      "list",
      "available",
      "scopes",
      "found",
      "https",
      "com",
      "developers",
      "docs",
      "topics",
      "oauth2",
      "shared",
      "resources",
      "application",
      "client",
      "applications",
      "cdn",
      "discordapp",
      "attachments",
      "468897350807453706",
      "722369856317423656",
      "unknown",
      "png",
      "now",
      "add",
      "src",
      "ts",
      "import",
      "oauthprofile",
      "oauthstrategy",
      "feathersjs",
      "authenticationrequest",
      "axios",
      "axiosrequestconfig",
      "serviceaddons",
      "feathers",
      "authenticationservice",
      "jwtstrategy",
      "localstrategy",
      "local",
      "declarations",
      "export",
      "function",
      "const",
      "new",
      "register",
      "jwt",
      "discordstrategy",
      "use",
      "configure",
      "class",
      "extends",
      "async",
      "getprofile",
      "authresult",
      "access",
      "token",
      "used",
      "requests",
      "bearer",
      "accesstoken",
      "useroptions",
      "method",
      "get",
      "headers",
      "authorization",
      "url",
      "users",
      "data",
      "await",
      "return",
      "getentitydata",
      "profile",
      "returned",
      "basedata",
      "super",
      "if",
      "avatar",
      "null",
      "embed",
      "avatars",
      "else",
      "isgif",
      "startswith",
      "gif",
      "username",
      "don",
      "need",
      "simply",
      "remove",
      "lines",
      "code",
      "user",
      "doesn",
      "set"
    ],
    "category": "cookbook",
    "source": {
      "path": "cookbook/authentication/_discord.md",
      "url": "https://v6.feathersjs.com/cookbook/authentication/_discord"
    },
    "tags": [
      "authentication",
      "auth"
    ],
    "embedding": [
      -0.087481,
      0.035493,
      0.011787,
      0.034764,
      0.080767,
      -0.070131,
      0.095596,
      0.083876,
      0.04893,
      -0.018451,
      -0.021427,
      0.002483,
      0.021104,
      0.051325,
      0.090913,
      0.022774,
      -0.003583,
      -0.045923,
      0.012774,
      -0.056911,
      0.075915,
      -0.02097,
      0.022889,
      0.021916,
      0.035314,
      -0.166277,
      0.071273,
      0.008858,
      -0.023772,
      0.013148,
      0.052911,
      0.01631,
      -0.059586,
      -0.00531,
      -0.067399,
      0.005421,
      0.066772,
      -0.000509,
      0.043588,
      0.032618,
      0.074954,
      0.072327,
      -0.041202,
      -0.039006,
      0.057825,
      -0.08594,
      -0.033685,
      0.012136,
      -0.028157,
      0.145999,
      0.002423,
      -0.029822,
      -0.057731,
      0.050097,
      -0.02639,
      -0.025684,
      -0.082087,
      0.04434,
      0.019077,
      -0.057432,
      0.006131,
      -0.078633,
      0.092848,
      -0.081946,
      0.032166,
      -0.00232,
      -0.052113,
      0.02021,
      -0.049007,
      -0.01859,
      -0.001945,
      0.020537,
      0.014323,
      -0.071341,
      -0.035301,
      -0.01975,
      -0.072767,
      0.015898,
      -0.017913,
      -0.035838,
      0.038023,
      0.026521,
      0.041856,
      0.081731,
      -0.009552,
      0.033652,
      0.012945,
      -0.0384,
      -0.047508,
      -0.079358,
      -0.005304,
      -0.015058,
      -0.039952,
      -0.003669,
      0.095937,
      0.035789,
      -0.099737,
      0.000347,
      -0.072412,
      0.043761,
      -0.025065,
      -0.04739,
      0.008317,
      0.014093,
      0.074791,
      0.012311,
      0.006821,
      -0.062496,
      0.024711,
      0.061707,
      -0.031891,
      0.048371,
      -0.029145,
      0.037949,
      0.052524,
      0.069475,
      -0.039082,
      0.023488,
      0.105284,
      0.055794,
      0.059402,
      -0.009869,
      0.01379,
      0.026264,
      0.030836,
      0.008668,
      0.030208,
      0,
      -0.041326,
      0.047197,
      -0.035315,
      0.082133,
      -0.029164,
      -0.010294,
      0.053173,
      -0.026157,
      -0.097765,
      0.033062,
      -0.097621,
      0.095872,
      0.049926,
      -0.057174,
      0.032898,
      -0.045067,
      0.084501,
      -0.044159,
      0.071681,
      0.023483,
      0.01564,
      0.06852,
      0.035148,
      0.011687,
      0.054476,
      -0.018242,
      -0.037177,
      -0.048257,
      -0.064653,
      -0.007939,
      0.052745,
      0.073783,
      0.055799,
      0.068345,
      0.038038,
      -0.090472,
      0.000433,
      -0.011526,
      -0.055208,
      -0.059065,
      0.042975,
      -0.019613,
      -0.073605,
      -0.040503,
      -0.111064,
      -0.045648,
      -0.029583,
      -0.029043,
      0.130855,
      -0.036862,
      -0.081661,
      0.062618,
      -0.011683,
      -0.077484,
      0.098762,
      -0.092777,
      -0.092562,
      -0.012629,
      0.016576,
      -0.130787,
      0.025076,
      -0.091675,
      0.01613,
      -0.05029,
      -0.019837,
      0.034606,
      -0.094775,
      -0.011795,
      0.071404,
      -0.066638,
      -0.053616,
      0.033373,
      -0.039101,
      0.005859,
      -0.085023,
      -0.038775,
      0.032681,
      0.044884,
      0.062343,
      -0.014177,
      0.052308,
      -0.040679,
      -0.086928,
      0.033795,
      -0.040111,
      0.030676,
      0.0296,
      -0.016884,
      -0.060462,
      0.035356,
      -0.039309,
      0.044528,
      0.041305,
      -0.007646,
      -0.033381,
      0,
      0.061334,
      -0.022725,
      0.010307,
      -0.014563,
      -0.028215,
      0.040008,
      0.070584,
      -0.041241,
      0.0125,
      0.051678,
      0.006072,
      0.033011,
      0.022091,
      -0.042399,
      0.017067,
      0.056195,
      -0.064423,
      0.053452,
      0.086461,
      -0.118816,
      -0.045146,
      0.014731,
      0.011253,
      -0.028585,
      -0.01675,
      0.047592,
      0.041404,
      -0.031534,
      -0.037088,
      -0.043432,
      -0.03301,
      0.043046,
      -0.046788,
      0.044631,
      -0.047315,
      -0.053573,
      0.044516,
      0.071542,
      -0.050169,
      -0.069607,
      0.068833,
      -0.028384,
      -0.046949,
      -0.031205,
      -0.014901,
      -0.036686,
      0.008184,
      0.02738,
      -0.049409,
      -0.009616,
      0.103159,
      -0.07274,
      0.024775,
      -0.02077,
      -0.024023,
      0.013834,
      0.066366,
      -0.0586,
      0.039855,
      -0.063876,
      0.000899,
      -0.076996,
      -0.014166,
      0.093508,
      0.049011,
      -0.070255,
      -0.094572,
      0.078118,
      0.038682,
      0.022458,
      -0.027163,
      0.003516,
      0.023317,
      0.004295,
      0.023901,
      0.014836,
      -0.012176,
      -0.134361,
      0.047628,
      -0.003989,
      -0.073478,
      -0.04641,
      -0.009086,
      0.022934,
      -0.071478,
      -0.014977,
      -0.000821,
      0.098472,
      0.047135,
      0.011581,
      -0.03716,
      -0.072396,
      -0.014819,
      -0.05178,
      0.015248,
      0,
      -0.0764,
      0.018195,
      -0.006054,
      0.007176,
      -0.033496,
      0.000861,
      0.032052,
      -0.038011,
      0.037061,
      0.028504,
      -0.111788,
      0.078369,
      0.04571,
      -0.036743,
      -0.044446,
      0.027005,
      0.029221,
      0.058064,
      0.045483,
      0.024001,
      -0.011871,
      -0.013,
      -0.006936,
      0.015989,
      -0.012456,
      0.00665,
      -0.013509,
      0.022775,
      -0.045154,
      0.040258,
      -0.119936,
      -0.060538,
      0.115864,
      -0.080036,
      -0.055253,
      0.021949,
      -0.04426,
      -0.010723,
      0.020442,
      -0.066035,
      0.061218,
      -0.010453,
      0.041572,
      -0.047612,
      -0.007976,
      -0.007774,
      0.049514,
      -0.016066,
      0.03144,
      -0.00223,
      0.008848,
      0.035423,
      0.012002,
      0.045235,
      -0.011726,
      -0.029651,
      0.015039,
      -0.036285,
      0.037355,
      -0.057002,
      0.053507,
      0.026134,
      0.004933,
      -0.055032
    ]
  },
  {
    "id": "v6-doc-019",
    "title": "Anonymous authentication",
    "content": "# Anonymous authentication\n\nAnonymous authentication can be allowed by creating a [custom strategy](../../api/authentication/strategy) that returns the `params` that you would like to use to identify an authenticated user.\n\n```ts\nimport { Params } from '@feathersjs/feathers';\nimport { AuthenticationBaseStrategy, AuthenticationResult, AuthenticationService } from '@feathersjs/authentication';\n\nclass AnonymousStrategy extends AuthenticationBaseStrategy {\n  async authenticate(authentication: AuthenticationResult, params: Params) {\n    return {\n      anonymous: true\n    }\n  }\n}\n\nexport default function(app: Application) {\n  const authentication = new AuthenticationService(app);\n  // ... authentication service setup\n  authentication.register('anonymous', new AnonymousStrategy());\n}\n```\n\nNext, we create a hook called `allow-anonymous` that sets `params.authentication` if it does not exist and if `params.provider` exists (which means it is an external call) to use that `anonymous` strategy:\n\n```ts\nimport { Hook, HookContext } from '@feathersjs/feathers';\n\nexport default (): Hook => {\n  return async (context: HookContext, next?: NextFunction) => {\n    const { params } = context;\n\n    if (params.provider && !params.authentication) {\n      context.params = {\n        ...params,\n        authentication: {\n          strategy: 'anonymous'\n        }\n      }\n    }\n\n    if (next) {\n      await next();\n    }\n\n    return context;\n  }\n}\n```\n\nThis hook should be added __before__ the [authenticate hook](../../api/authentication/hook) wherever anonymous authentication should be allowed:\n\n```js\nall: [ allowAnonymous(), authenticate('jwt', 'anonymous') ],\n```\n\nIf an anonymous user now accesses the service externally, the service call will succeed and have `params.anonymous` set to `true`.",
    "version": "v6",
    "tokens": [
      "anonymous",
      "authentication",
      "allowed",
      "creating",
      "custom",
      "strategy",
      "api",
      "returns",
      "params",
      "like",
      "use",
      "identify",
      "authenticated",
      "user",
      "ts",
      "import",
      "feathersjs",
      "feathers",
      "authenticationbasestrategy",
      "authenticationresult",
      "authenticationservice",
      "class",
      "anonymousstrategy",
      "extends",
      "async",
      "authenticate",
      "return",
      "true",
      "export",
      "default",
      "function",
      "app",
      "application",
      "const",
      "new",
      "service",
      "setup",
      "register",
      "next",
      "create",
      "hook",
      "called",
      "allow",
      "sets",
      "if",
      "exist",
      "provider",
      "exists",
      "means",
      "external",
      "call",
      "hookcontext",
      "context",
      "nextfunction",
      "await",
      "added",
      "wherever",
      "js",
      "allowanonymous",
      "jwt",
      "now",
      "accesses",
      "externally",
      "succeed",
      "set"
    ],
    "category": "cookbook",
    "source": {
      "path": "cookbook/authentication/anonymous.md",
      "url": "https://v6.feathersjs.com/cookbook/authentication/anonymous"
    },
    "tags": [
      "authentication",
      "auth"
    ],
    "embedding": [
      -0.131469,
      0.047721,
      -0.044902,
      0.039883,
      -0.018902,
      -0.068785,
      0.09337,
      -0.018885,
      0.041823,
      -0.040006,
      -0.005493,
      0.031106,
      -0.042019,
      0.021739,
      0.049934,
      0.038709,
      0.013099,
      0.022973,
      0.023036,
      -0.017565,
      -0.014739,
      -0.06628,
      0.025442,
      0.06041,
      -0.016537,
      -0.129256,
      0.05558,
      -0.023689,
      0.015547,
      -0.000653,
      0.080691,
      -0.026445,
      -0.123805,
      -0.008539,
      -0.033735,
      0.031472,
      0.006776,
      -0.043018,
      -0.019275,
      -0.074896,
      0.005411,
      0.024984,
      -0.128586,
      -0.063395,
      -0.018134,
      -0.055222,
      -0.021454,
      0.018579,
      -0.018477,
      0.062554,
      0.038909,
      -0.025545,
      -0.082353,
      -0.017858,
      -0.014117,
      0.008534,
      -0.03014,
      0.007784,
      -0.044365,
      -0.020101,
      0.021943,
      -0.092131,
      0.015312,
      0.034164,
      0.012324,
      0.03733,
      0.004396,
      0.011522,
      0.028961,
      -0.046343,
      0.025072,
      -0.019178,
      0.001282,
      0.007342,
      -0.013076,
      -0.02258,
      -0.058715,
      -0.005078,
      0.023055,
      0.022161,
      0.021218,
      -0.010921,
      0.032372,
      0.106895,
      0.050765,
      0.03094,
      -0.019927,
      -0.006067,
      0.008698,
      -0.016001,
      0.019696,
      0.034687,
      -0.028721,
      0.000902,
      0.091583,
      -0.004783,
      -0.055747,
      0.055675,
      -0.065595,
      0.063073,
      -0.080736,
      0.002638,
      0.005425,
      -0.016206,
      0.09501,
      0.019001,
      -0.004442,
      -0.150855,
      0.002899,
      0.110759,
      0.006785,
      -0.019761,
      -0.010447,
      0.044383,
      0.019792,
      0.020703,
      0.033809,
      -0.000805,
      0.024009,
      0.017778,
      0.064879,
      0.004161,
      0.084081,
      0.007096,
      0.054269,
      0.08335,
      0.017019,
      0,
      0.007731,
      0.058962,
      0.023483,
      0.068189,
      -0.049429,
      0.029021,
      0.055747,
      -0.051933,
      -0.072316,
      0.069987,
      -0.029517,
      0.051491,
      0.063303,
      -0.016762,
      0.090865,
      0.010637,
      0.090884,
      -0.046447,
      0.105461,
      0.028284,
      0.054791,
      0.01655,
      0.008202,
      -0.003603,
      0.035004,
      -0.056636,
      -0.026753,
      -0.068779,
      -0.097774,
      0.027684,
      0.12496,
      -0.03,
      0.006362,
      0.101248,
      0.034625,
      -0.011434,
      0.027931,
      -0.021451,
      -0.083896,
      -0.047406,
      0.014296,
      -0.043721,
      -0.05122,
      0.041048,
      -0.129646,
      -0.039106,
      -0.014662,
      -0.026159,
      0.080478,
      0.024229,
      -0.063463,
      0.037751,
      -0.00865,
      -0.072497,
      0.092578,
      -0.082397,
      -0.019619,
      -0.035257,
      -0.056473,
      -0.094211,
      -0.002213,
      -0.072577,
      -0.076463,
      -0.068491,
      0.046531,
      -0.026697,
      -0.085565,
      -0.001086,
      -0.005032,
      -0.045849,
      0.021109,
      -0.01697,
      -0.050487,
      -0.004071,
      -0.062084,
      -0.025677,
      0.044651,
      0.070574,
      0.062202,
      -0.079097,
      0.043501,
      0.002866,
      -0.041371,
      0.137095,
      -0.012532,
      0.002877,
      -0.016279,
      0.026249,
      0.011342,
      -0.004589,
      0.030481,
      0.04956,
      0.042581,
      0.009836,
      -0.098154,
      0,
      -0.000991,
      -0.008635,
      -0.081331,
      0.018745,
      0.022345,
      0.020327,
      0.075351,
      0.026102,
      0.006816,
      0.016681,
      -0.036654,
      0.061645,
      0.052018,
      0.036509,
      0.006384,
      0.054886,
      -0.087734,
      0.01435,
      0.040428,
      -0.081957,
      -0.046876,
      0.033726,
      0.040331,
      -0.028775,
      -0.02228,
      0.051779,
      0.009151,
      -0.020031,
      -0.029317,
      -0.000673,
      0.004938,
      0.053915,
      0.030486,
      -0.078389,
      -0.05527,
      -0.050811,
      0.037809,
      0.146398,
      -0.075896,
      -0.037362,
      -0.023585,
      -0.02561,
      -0.047503,
      -0.104822,
      -0.02562,
      -0.081848,
      0.002267,
      -0.004025,
      -0.032777,
      0.033894,
      0.006758,
      -0.01096,
      0.095533,
      0.039153,
      -0.045813,
      -0.009457,
      0.036293,
      -0.080439,
      0.124359,
      0.021025,
      0.058235,
      -0.065702,
      0.033286,
      0.10383,
      0.009617,
      -0.033944,
      -0.104535,
      0.031498,
      -0.008571,
      0.035161,
      -0.049102,
      -0.003308,
      0.031686,
      -0.004104,
      0.067065,
      -0.042138,
      -0.016905,
      -0.103959,
      0.121422,
      0.021199,
      -0.005763,
      -0.018566,
      0.024555,
      -0.043572,
      -0.035492,
      -0.09469,
      0.01438,
      0.057756,
      0.049364,
      0.023389,
      -0.006964,
      -0.001675,
      -0.099156,
      -0.055688,
      0.034366,
      0,
      -0.037295,
      0.012539,
      0.023472,
      0.019409,
      0.017479,
      0.028588,
      -0.010073,
      -0.039895,
      0.019616,
      0.00044,
      -0.030597,
      0.032767,
      0.045441,
      -0.045755,
      -0.022908,
      0.01331,
      0.000907,
      0.002244,
      -0.082331,
      -0.017601,
      -0.07524,
      0.046793,
      -0.056118,
      -0.032881,
      0.021532,
      0.022358,
      0.022426,
      0.033476,
      0.069494,
      0.041906,
      -0.141153,
      0.047968,
      0.033506,
      -0.070577,
      -0.182303,
      0.056198,
      -0.039733,
      0.007506,
      0.007783,
      -0.012313,
      -0.042453,
      -0.018179,
      0.014127,
      -0.005538,
      0.000708,
      -0.016266,
      0.113776,
      -0.053055,
      0.01955,
      0.050733,
      0.037805,
      -0.018153,
      -0.010658,
      0.08256,
      -0.018773,
      -0.050838,
      -0.02696,
      0.009692,
      0.010707,
      -0.038955,
      -0.001721,
      -0.040992,
      0.028632,
      -0.038592
    ]
  },
  {
    "id": "v6-doc-020",
    "title": "API Key Authentication",
    "content": "# API Key Authentication\n\nWe will start by providing the required configuration for this strategy. You should change all of these values as per your requirement.\n\n```js\n{\n  \"authentication\": {\n    ...otherConfig,\n    \"authStrategies\": [ ...otherStrategies, \"apiKey\" ],\n    \"apiKey\": {\n      \"allowedKeys\": [ \"API_KEY_1\", \"API_KEY_2\" ],\n      \"header\": \"x-access-token\"\n    }\n  }\n}\n```\n\nNote: if all you want is api key authentication, it is still necessary to register a secret, service and entity. Since no other authentication method is used, entity can be `null`.\n\nA fully working example with just API key authentication:\n```json\n{\n  \"host\": \"localhost\",\n  \"port\": 3030,\n  \"public\": \"../public/\",\n  \"paginate\": {\n    \"default\": 10,\n    \"max\": 50\n  },\n  \"authentication\": {\n    \"secret\": \"some-secret\",\n    \"service\": \"users\",\n    \"entity\": null,\n    \"authStrategies\": [\"apiKey\"],\n    \"apiKey\": {\n      \"allowedKeys\": [ \"API_KEY_1\", \"API_KEY_2\" ],\n      \"header\": \"x-access-token\"\n    }\n  }\n}\n```\n\nNext we will be creating a [custom strategy](../../api/authentication/strategy) that returns the `params` that you would like to use to identify an authenticated user/request.\n\n```ts\nimport { AuthenticationBaseStrategy, AuthenticationResult, AuthenticationService } from '@feathersjs/authentication';\nimport { NotAuthenticated } from '@feathersjs/errors';\nimport { ServiceAddons } from '@feathersjs/feathers';\nimport { Application } from './declarations';\n\ndeclare module './declarations' {\n  interface ServiceTypes {\n    'authentication': AuthenticationService & ServiceAddons ;\n  }\n}\n\nclass ApiKeyStrategy extends AuthenticationBaseStrategy {\n  app: Application;\n\n  constructor(app: Application) {\n    super();\n    this.app = app;\n  }\n\n  async authenticate(authentication: AuthenticationResult) {\n    const { token } = authentication;\n\n    const config = this.app.get('authentication').apiKey;\n\n    const match = config.allowedKeys.includes(token);\n    if (!match) throw new NotAuthenticated('Incorrect API Key');\n\n    return {\n      apiKey: true\n    }\n  }\n}\n\nexport default function (app: Application) {\n  const authentication = new AuthenticationService(app);\n\n  // This can have multiple .register calls if multiple strategies have been added\n  authentication.register('apiKey', new ApiKeyStrategy(app));\n\n  app.use('/authentication', authentication);\n}\n```\n\nNext, we create a hook called `allow-apiKey` that sets `params.authentication` if it does not exist and if `params.provider` exists (which means it is an external call) to use that `apiKey` strategy. We will also provide the capability for the apiKey to be read from the request header: (you could also read the token as a query parameter but you will have to filter it out before it's passed to Feathers calls like `get` and `find`.\n\n```ts\nimport { HookContext, NextFunction } from '@feathersjs/feathers';\n\nexport default () => async (context: HookContext, next: NextFunction) => {\n  const { params, app } = context;\n\n  const headerField = app.get('authentication').apiKey.header;\n  const token = params.headers ? params.headers[headerField] : null;\n\n  if (token && params.provider && !params.authentication) {\n    context.params = {\n      ...params,\n      authentication: {\n        strategy: 'apiKey',\n        token\n      }\n    };\n  }\n\n  return next();\n}\n```\n\nThis hook should be added __before__ the [authenticate hook](../../api/authentication/hook) wherever API Key authentication should be allowed:\n\n```js\nimport { authenticate } from '@feathersjs/authentication/lib/hooks';\nimport allowApiKey from './hooks/allow-api-key';\n\nall: [ allowApiKey(), authenticate('jwt', 'apiKey') ],\n```\n\nIf a user now accesses the service externally with the correct apiKey, the service call will succeed and have `params.apiKey` set to `true`.",
    "version": "v6",
    "tokens": [
      "api",
      "key",
      "authentication",
      "start",
      "providing",
      "required",
      "configuration",
      "strategy",
      "change",
      "values",
      "per",
      "requirement",
      "js",
      "otherconfig",
      "authstrategies",
      "otherstrategies",
      "apikey",
      "allowedkeys",
      "header",
      "access",
      "token",
      "note",
      "if",
      "want",
      "still",
      "necessary",
      "register",
      "secret",
      "service",
      "entity",
      "since",
      "method",
      "used",
      "null",
      "fully",
      "working",
      "example",
      "json",
      "host",
      "localhost",
      "port",
      "3030",
      "public",
      "paginate",
      "default",
      "10",
      "max",
      "50",
      "users",
      "next",
      "creating",
      "custom",
      "returns",
      "params",
      "like",
      "use",
      "identify",
      "authenticated",
      "user",
      "request",
      "ts",
      "import",
      "authenticationbasestrategy",
      "authenticationresult",
      "authenticationservice",
      "feathersjs",
      "notauthenticated",
      "errors",
      "serviceaddons",
      "feathers",
      "application",
      "declarations",
      "declare",
      "module",
      "interface",
      "servicetypes",
      "class",
      "apikeystrategy",
      "extends",
      "app",
      "constructor",
      "super",
      "async",
      "authenticate",
      "const",
      "config",
      "get",
      "match",
      "includes",
      "throw",
      "new",
      "incorrect",
      "return",
      "true",
      "export",
      "function",
      "multiple",
      "calls",
      "strategies",
      "added",
      "create",
      "hook",
      "called",
      "allow",
      "sets",
      "exist",
      "provider",
      "exists",
      "means",
      "external",
      "call",
      "also",
      "provide",
      "capability",
      "read",
      "query",
      "parameter",
      "filter",
      "passed",
      "find",
      "hookcontext",
      "nextfunction",
      "context",
      "headerfield",
      "headers",
      "wherever",
      "allowed",
      "lib",
      "hooks",
      "allowapikey",
      "jwt",
      "now",
      "accesses",
      "externally",
      "correct",
      "succeed",
      "set"
    ],
    "category": "cookbook",
    "source": {
      "path": "cookbook/authentication/apiKey.md",
      "url": "https://v6.feathersjs.com/cookbook/authentication/apiKey"
    },
    "tags": [
      "authentication",
      "auth"
    ],
    "embedding": [
      -0.074942,
      0.065411,
      -0.054788,
      -0.047655,
      -0.029762,
      0.002431,
      0.022107,
      0.041439,
      -0.012159,
      0.031282,
      0.01468,
      -0.078887,
      0.093952,
      0.043613,
      0.120352,
      0.096436,
      -0.043416,
      0.010436,
      -0.013357,
      -0.05881,
      0.025431,
      -0.010011,
      0.003178,
      -0.052376,
      -0.006339,
      -0.032347,
      0.023316,
      -0.019916,
      -0.020504,
      0.047513,
      0.004602,
      -0.063999,
      -0.074903,
      0.052874,
      -0.07205,
      0.022073,
      0.085502,
      -0.053256,
      0.030812,
      0.00615,
      -0.002071,
      0.044546,
      -0.108803,
      -0.083023,
      -0.033332,
      -0.03838,
      -0.059853,
      0.011485,
      -0.043733,
      0.04489,
      0.017331,
      -0.044204,
      -0.028433,
      -0.028397,
      -0.049832,
      -0.005921,
      -0.109878,
      0.01866,
      0.022043,
      -0.004195,
      0.064263,
      -0.039294,
      0.060198,
      -0.037062,
      -0.03239,
      -0.026095,
      -0.045362,
      -0.065057,
      0.056887,
      0.044523,
      0.032662,
      -0.004148,
      -0.059712,
      -0.142155,
      -0.019361,
      -0.014536,
      -0.041515,
      -0.040663,
      -0.025678,
      -0.047941,
      -0.061459,
      0.002234,
      -0.022078,
      0.063959,
      -0.036013,
      0.044493,
      -0.063664,
      -0.029893,
      -0.07095,
      0.022254,
      -0.025823,
      -0.040515,
      0.006317,
      -0.031026,
      0.15518,
      0.076721,
      -0.025698,
      -0.039366,
      -0.060531,
      0.036159,
      -0.026527,
      -0.043081,
      0.005871,
      -0.007175,
      0.148861,
      0.010214,
      -0.034947,
      -0.060221,
      -0.042401,
      0.108891,
      0.012971,
      0.095784,
      -0.060746,
      0.038516,
      -0.030462,
      0.155655,
      0.059407,
      -0.018826,
      0.052692,
      0.020728,
      0.063617,
      -0.056049,
      -0.034451,
      0.023443,
      0.01526,
      -0.02481,
      -0.0062,
      0,
      0.042127,
      0.100002,
      0.044096,
      -0.001986,
      -0.02741,
      0.035625,
      0.067832,
      -0.009669,
      0.034941,
      0.031271,
      -0.04291,
      0.068726,
      -0.008813,
      -0.036234,
      -0.002477,
      -0.011741,
      0.0018,
      -0.009062,
      0.084754,
      0.026909,
      -0.015189,
      -0.000216,
      -0.028075,
      0.043968,
      0.009524,
      -0.013098,
      -0.005545,
      -0.035975,
      -0.095454,
      0.003125,
      0.06446,
      0.010219,
      -0.026084,
      0.039309,
      -0.004032,
      -0.018048,
      0.029999,
      0.00683,
      -0.065541,
      -0.108996,
      -0.003896,
      0.001712,
      -0.091859,
      -0.023405,
      -0.033676,
      0.002497,
      0.023875,
      -0.039385,
      0.071373,
      0.012147,
      -0.089361,
      0.017018,
      -0.010711,
      -0.057998,
      0.080637,
      -0.071662,
      -0.012423,
      0.065011,
      -0.063016,
      -0.090316,
      -0.035886,
      -0.018933,
      0.025097,
      0.012156,
      0.043092,
      0.025108,
      -0.026422,
      0.015137,
      0.005499,
      -0.05636,
      0.005635,
      0.055817,
      -0.010539,
      0.032804,
      -0.05878,
      -0.080223,
      0.09165,
      0.070521,
      0.051875,
      -0.013811,
      0.111286,
      0.025559,
      -0.081128,
      0.116109,
      -0.028331,
      0.039866,
      -0.018539,
      0.01665,
      -0.022649,
      -0.035575,
      0.004343,
      0.043849,
      0.037392,
      -0.013972,
      -0.090006,
      0,
      0.02178,
      -0.083738,
      0.034867,
      0.041542,
      0.006889,
      -0.023785,
      0.078787,
      0.009979,
      -0.0301,
      0.009429,
      -0.012217,
      -0.019619,
      0.079126,
      -0.023814,
      -0.013856,
      0.013445,
      -0.068488,
      -0.002666,
      0.053342,
      0.047855,
      -0.032701,
      0.049565,
      0.033215,
      0.028176,
      0.005222,
      -0.014507,
      -0.090334,
      0.000407,
      -0.130274,
      -0.03578,
      0.03585,
      0.026962,
      0.016611,
      -0.038386,
      -0.019741,
      -0.169689,
      -0.014681,
      0.163668,
      -0.013266,
      0.034863,
      -0.019093,
      -0.029422,
      0.066829,
      0.025989,
      -0.013569,
      -0.007379,
      0.062859,
      -0.002404,
      -0.121506,
      0.015603,
      -0.017904,
      0.000875,
      -0.02194,
      0.021575,
      -0.040801,
      0.015704,
      -0.004371,
      -0.002405,
      0.039576,
      0.017097,
      0.001319,
      -0.043581,
      0.047094,
      0.142514,
      0.045009,
      -0.100373,
      -0.085145,
      0.025874,
      -0.037078,
      -0.018375,
      0.00069,
      -0.038805,
      0.069023,
      0.065862,
      0.059527,
      -0.102432,
      -0.027341,
      -0.073329,
      0.072813,
      0.018396,
      -0.066064,
      0.013774,
      -0.012953,
      0.035321,
      0.034483,
      -0.016141,
      0.023583,
      0.060598,
      -0.023898,
      0.046813,
      0.009081,
      -0.002932,
      -0.075832,
      -0.058715,
      0.031417,
      0,
      0.011602,
      0.033598,
      -0.013755,
      -0.04362,
      -0.051229,
      -0.030699,
      0.013498,
      0.00654,
      0.018146,
      -0.051133,
      0.001537,
      0.120405,
      -0.042626,
      0.006311,
      -0.107286,
      -0.021624,
      -0.03031,
      0.0086,
      -0.008573,
      -0.012325,
      -0.034291,
      -0.015789,
      0.038709,
      -0.042195,
      0.081373,
      0.081683,
      0.087386,
      0.022559,
      0.056008,
      0.002092,
      -0.119705,
      0.004893,
      0.03949,
      -0.040244,
      -0.093756,
      0.016179,
      -0.020867,
      0.004879,
      -0.034879,
      0.020516,
      0.000711,
      0.038126,
      -0.063935,
      0.001884,
      0.014165,
      0.04326,
      0.072583,
      0.056637,
      0.046887,
      -0.019247,
      -0.008667,
      -0.038737,
      0.036336,
      -0.018112,
      -0.018224,
      0.03784,
      -0.062262,
      0.022947,
      0.09919,
      -0.020431,
      0.038266,
      -0.008353,
      -0.01643,
      -0.015517
    ]
  },
  {
    "id": "v6-doc-021",
    "title": "Auth0",
    "content": "# Auth0\n\nTo enable OAuth logins with [Auth0](http://auth0.com), we need the following settings after creating an application:\n\n![Auth0 application](../assets/auth0-app.png)\n\nThis should be added in your configuration (usually `config/default.json`) as follows:\n\n```json\n\"authentication\": {\n  \"oauth\": {\n    \"redirect\": \"/\",\n    \"auth0\": {\n      \"key\": \" \",\n      \"secret\": \" \",\n      \"subdomain\": \"  __Important:__ `subdomain` should be the \"Domain\" from the application settings __without__ the `auth0.com` part. So, in the screenshot above, the subdomain for `dev-6gqkmpt6.auth0.com` would be `dev-6gqkmpt6`. If the subdomain includes a region, it needs to be included as well so the subdomain for `dev-6gqkmpt6.us.auth0.com` would be `dev-6gqkmpt6.us`\n\n## Strategy\n\nTo use Auth0 in the chat application from the [Feathers guide](../../guides/) we have to do the same modifications as already shown [for the GitHub login in the authentication guide](../../guides/basics/authentication).\n\nIn `src/authentication.ts` like this:\n\n```ts\nimport { ServiceAddons, Params } from '@feathersjs/feathers';\nimport { AuthenticationService, JWTStrategy } from '@feathersjs/authentication';\nimport { LocalStrategy } from '@feathersjs/authentication-local';\nimport { oauth, OAuthStrategy, OAuthProfile } from '@feathersjs/authentication-oauth';\n\nimport { Application } from './declarations';\n\ndeclare module './declarations' {\n  interface ServiceTypes {\n    'authentication': AuthenticationService & ServiceAddons ;\n  }\n}\n\nclass Auth0Strategy extends OAuthStrategy {\n  async getEntityData(profile: OAuthProfile, existing: any, params: Params) {\n    const baseData = await super.getEntityData(profile, existing, params);\n\n    return {\n      ...baseData,\n      email: profile.email\n    };\n  }\n}\n\nexport default function(app: Application) {\n  const authentication = new AuthenticationService(app);\n\n  authentication.register('jwt', new JWTStrategy());\n  authentication.register('local', new LocalStrategy());\n  authentication.register('auth0', new Auth0Strategy());\n\n  app.use('/authentication', authentication);\n  app.configure(oauth());\n}\n```\n\nAdditionally, `auth0Id` needs to be included in the data in the users service class.",
    "version": "v6",
    "tokens": [
      "auth0",
      "enable",
      "oauth",
      "logins",
      "http",
      "com",
      "need",
      "following",
      "settings",
      "creating",
      "application",
      "assets",
      "app",
      "png",
      "added",
      "configuration",
      "usually",
      "config",
      "default",
      "json",
      "follows",
      "authentication",
      "redirect",
      "key",
      "secret",
      "subdomain",
      "important",
      "domain",
      "without",
      "part",
      "screenshot",
      "dev",
      "6gqkmpt6",
      "if",
      "includes",
      "region",
      "needs",
      "included",
      "well",
      "us",
      "strategy",
      "use",
      "chat",
      "feathers",
      "guide",
      "guides",
      "modifications",
      "already",
      "shown",
      "github",
      "login",
      "basics",
      "src",
      "ts",
      "like",
      "import",
      "serviceaddons",
      "params",
      "feathersjs",
      "authenticationservice",
      "jwtstrategy",
      "localstrategy",
      "local",
      "oauthstrategy",
      "oauthprofile",
      "declarations",
      "declare",
      "module",
      "interface",
      "servicetypes",
      "class",
      "auth0strategy",
      "extends",
      "async",
      "getentitydata",
      "profile",
      "existing",
      "const",
      "basedata",
      "await",
      "super",
      "return",
      "email",
      "export",
      "function",
      "new",
      "register",
      "jwt",
      "configure",
      "additionally",
      "auth0id",
      "data",
      "users",
      "service"
    ],
    "category": "cookbook",
    "source": {
      "path": "cookbook/authentication/auth0.md",
      "url": "https://v6.feathersjs.com/cookbook/authentication/auth0"
    },
    "tags": [
      "authentication",
      "auth"
    ],
    "embedding": [
      -0.050395,
      0.041809,
      -0.01437,
      -0.033539,
      0.01481,
      -0.133273,
      0.046423,
      0.015736,
      -0.002865,
      0.01571,
      -0.021571,
      -0.030832,
      0.067884,
      0.058561,
      0.074705,
      0.080931,
      -0.031244,
      -0.033072,
      -0.024687,
      -0.009241,
      0.095673,
      0.010098,
      0.110914,
      0.001739,
      0.046321,
      -0.141117,
      -0.004191,
      0.04821,
      0.026376,
      0.043832,
      0.066912,
      0.029031,
      -0.047276,
      0.003664,
      -0.048136,
      0.083091,
      0.088461,
      -0.038071,
      -0.017964,
      0.010827,
      0.038242,
      -0.004034,
      0.009387,
      -0.056456,
      -0.002234,
      -0.00472,
      -0.023321,
      -0.001501,
      0.004242,
      0.110169,
      0.031881,
      -0.044557,
      -0.057591,
      0.053699,
      -0.04123,
      0.069846,
      -0.091377,
      0.041494,
      0.08473,
      -0.021071,
      0.045744,
      -0.016081,
      0.043133,
      -0.040405,
      -0.010711,
      -0.038085,
      -0.026176,
      -0.012039,
      -0.026491,
      0.032253,
      0.01985,
      -0.001333,
      -0.087239,
      -0.134748,
      0.007418,
      0.056604,
      -0.104892,
      -0.001521,
      -0.040903,
      -0.118,
      0.053052,
      0.004314,
      0.013076,
      0.080569,
      0.002472,
      0.024071,
      0.020042,
      -0.057385,
      -0.022582,
      0.005979,
      0.040876,
      -0.103179,
      -0.050125,
      0.002861,
      0.103031,
      -0.016541,
      -0.022718,
      0.050125,
      -0.062089,
      0.039652,
      -0.023234,
      -0.015403,
      0.055844,
      -0.015704,
      0.125849,
      0.006755,
      0.003457,
      0.038864,
      0.028235,
      0.067479,
      -0.01543,
      0.026805,
      0.011402,
      0.023831,
      0.03037,
      0.081392,
      0.027303,
      -0.014844,
      -0.010463,
      0.028351,
      0.096583,
      -0.03675,
      -0.019234,
      0.012905,
      0.044346,
      -0.02341,
      -0.017765,
      0,
      0.052115,
      0.029724,
      0.011803,
      0.009639,
      -0.000794,
      -0.025203,
      0.01527,
      -0.050907,
      -0.067117,
      0.063391,
      -0.058336,
      0.060302,
      0.007463,
      -0.014113,
      -0.00261,
      -0.013597,
      0.011886,
      -0.022033,
      0.108991,
      0.060996,
      -0.041033,
      0.027147,
      0.009379,
      0.048429,
      0.004854,
      0.018001,
      0.028182,
      -0.045691,
      -0.083197,
      -0.001769,
      0.063308,
      0.01462,
      0.051379,
      -0.011333,
      -0.000008,
      -0.070234,
      0.039097,
      -0.024073,
      -0.059129,
      -0.026598,
      -0.013966,
      -0.073826,
      -0.088787,
      0.001266,
      -0.019231,
      -0.039418,
      0.010161,
      0.006858,
      0.11777,
      -0.001108,
      -0.087353,
      0.009616,
      -0.02042,
      -0.079716,
      0.041823,
      -0.149201,
      -0.060025,
      -0.028227,
      -0.057195,
      -0.115566,
      -0.076149,
      -0.045171,
      -0.024377,
      -0.00332,
      -0.030362,
      -0.004231,
      -0.024272,
      0.021859,
      -0.016527,
      -0.052985,
      -0.017071,
      0.081095,
      -0.025449,
      0.068323,
      -0.124853,
      0.015482,
      0.068711,
      0.09319,
      0.019128,
      0.008455,
      0.007346,
      0.07067,
      -0.081458,
      0.083366,
      -0.09144,
      0.04195,
      0.101828,
      -0.053665,
      -0.081548,
      -0.010015,
      0.047791,
      0.02722,
      0.057513,
      -0.015359,
      -0.096792,
      0,
      0.060533,
      -0.040607,
      -0.03862,
      0.04752,
      0.055906,
      -0.007533,
      0.158249,
      0.015438,
      0.023407,
      -0.04218,
      0.012848,
      0.048696,
      0.018109,
      -0.040627,
      0.02113,
      0.018858,
      -0.040209,
      0.026586,
      0.067288,
      0.003137,
      -0.005515,
      0.081862,
      -0.03733,
      0.005377,
      -0.012383,
      0.042329,
      -0.02442,
      -0.041969,
      -0.100247,
      -0.101384,
      0.044863,
      0.034388,
      -0.069849,
      -0.018013,
      -0.019528,
      -0.090561,
      0.018477,
      0.124444,
      0.003857,
      -0.043249,
      0.074494,
      -0.002875,
      -0.057649,
      0.003793,
      0.016238,
      -0.007008,
      0.051236,
      -0.014594,
      -0.076145,
      0.014763,
      0.091902,
      -0.018441,
      0.06708,
      -0.028349,
      0.014716,
      0.059459,
      0.049755,
      0.011882,
      0.007021,
      0.008519,
      -0.002379,
      -0.020804,
      0.091457,
      0.083139,
      -0.026405,
      -0.010833,
      -0.029667,
      0.092686,
      0.019068,
      -0.023564,
      -0.080724,
      -0.075002,
      0.042557,
      -0.03869,
      0.07136,
      -0.030827,
      0.044751,
      -0.062815,
      0.040745,
      0.008341,
      -0.117927,
      0.018667,
      -0.064167,
      0.038047,
      0.007383,
      -0.001566,
      -0.044717,
      0.099456,
      0.028895,
      0.034465,
      -0.065514,
      -0.011396,
      -0.006776,
      -0.073066,
      0.03603,
      0,
      -0.019458,
      -0.014909,
      -0.063973,
      -0.035521,
      -0.010307,
      0.018376,
      -0.008304,
      -0.024955,
      -0.034434,
      -0.010391,
      -0.052442,
      0.048556,
      -0.066356,
      -0.052924,
      -0.09948,
      -0.054336,
      -0.016741,
      0.054901,
      -0.043364,
      -0.085983,
      -0.06771,
      -0.002844,
      -0.032148,
      -0.023329,
      -0.009631,
      0.011652,
      -0.002285,
      0.006664,
      -0.051339,
      0.012266,
      -0.042528,
      -0.000739,
      -0.047589,
      -0.056548,
      -0.064111,
      -0.01457,
      -0.031348,
      -0.014713,
      0.00783,
      -0.057043,
      0.003531,
      -0.042441,
      0.066914,
      -0.059601,
      -0.026071,
      -0.00957,
      0.078411,
      0.045588,
      0.078926,
      0.017195,
      -0.002786,
      -0.003057,
      -0.007136,
      0.029367,
      0.081533,
      -0.022415,
      0.011103,
      -0.050673,
      0.081728,
      -0.021664,
      0.014433,
      -0.012089,
      0.017029,
      -0.020946
    ]
  },
  {
    "id": "v6-doc-022",
    "title": "Facebook",
    "content": "# Facebook\n\nFacebook login can be initialized like any other [OAuth provider](../../api/authentication/oauth) by adding the app id and secret to `config/default.json`:\n\n```js\n{\n  \"authentication\": {\n    \"oauth\": {\n      \"facebook\": {\n        \"key\": \" \",\n        \"secret\": \" \"\n      }\n    }\n  }\n}\n```\n\nRequesting the email property requires adding additional `scope` to the oauth configuration:\n```js\n{\n  \"authentication\": {\n    \"oauth\": {\n      \"facebook\": {\n        \"key\": \" \",\n        \"secret\": \" \",\n        \"scope\": [\"email, public_profile\"]\n      }\n    }\n  }\n}\n```\n\n## Application client and secret\n\nThe client id (App ID) and secret can be found in the Settings of the [Facebook app](https://developers.facebook.com/apps):\n\n![Facebook app settings](../assets/facebook-app.png)\n\n## Getting profile data\n\nThe standard OAuth strategy only returns the default profile fields (`id` and `name`). To get other fields, like the email or profile picture, the [getProfile](../../api/authentication/oauth#getprofile-data-params) method of the [OAuth strategy needs to be customized](../../api/authentication/oauth#customization) to call the Graph API profile endpoint `https://graph.facebook.com/me` with an HTTP request library like [Axios](https://developers.facebook.com/tools/explorer/) requesting the additional fields.\n\n> __Pro tip:__ Facebook API requests can be tested via the [Graph API explorer](https://developers.facebook.com/tools/explorer/).\n\nThe following example allows to log in with Facebook in the [chat application from the guide](../../guides/index):\n\n```ts\nimport { Params } from '@feathersjs/feathers';\nimport { AuthenticationService, JWTStrategy, AuthenticationRequest } from '@feathersjs/authentication';\nimport { LocalStrategy } from '@feathersjs/authentication-local';\nimport { expressOauth, OAuthStrategy, OAuthProfile } from '@feathersjs/authentication-oauth';\nimport axios from 'axios';\nimport { Application } from './declarations';\n\ndeclare module './declarations' {\n  interface ServiceTypes {\n    'authentication': AuthenticationService & ServiceAddons ;\n  }\n}\n\nclass FacebookStrategy extends OAuthStrategy {\n  async getProfile (authResult: AuthenticationRequest, _params: Params) {\n    // This is the OAuth access token that can be used\n    // for Facebook API requests as the Bearer token\n    const accessToken = authResult.access_token;\n\n    const { data } = await axios.get('https://graph.facebook.com/me', {\n      headers: {\n        authorization: `Bearer ${accessToken}`\n      },\n      params: {\n        // There are\n        fields: 'id,name,email'\n      }\n    });\n\n    return data;\n  }\n\n  async getEntityData(profile: OAuthProfile, existing: any, params: Params) {\n    // `profile` is the data returned by getProfile\n    const baseData = await super.getEntityData(profile, existing, params);\n\n    return {\n      ...baseData,\n      email: profile.email\n    };\n  }\n}\n\nexport default function(app: Application) {\n  const authentication = new AuthenticationService(app);\n\n  authentication.register('jwt', new JWTStrategy());\n  authentication.register('local', new LocalStrategy());\n  authentication.register('facebook', new FacebookStrategy());\n\n  app.use('/authentication', authentication);\n  app.configure(expressOauth());\n}\n```\n\n> __Pro tip:__ [See all available Facebook user options here](https://developers.facebook.com/docs/graph-api/reference/user/).",
    "version": "v6",
    "tokens": [
      "facebook",
      "login",
      "initialized",
      "like",
      "oauth",
      "provider",
      "api",
      "authentication",
      "adding",
      "app",
      "id",
      "secret",
      "config",
      "default",
      "json",
      "js",
      "key",
      "requesting",
      "email",
      "property",
      "requires",
      "additional",
      "scope",
      "configuration",
      "public",
      "profile",
      "application",
      "client",
      "found",
      "settings",
      "https",
      "developers",
      "com",
      "apps",
      "assets",
      "png",
      "getting",
      "data",
      "standard",
      "strategy",
      "returns",
      "fields",
      "name",
      "get",
      "picture",
      "getprofile",
      "params",
      "method",
      "needs",
      "customized",
      "customization",
      "call",
      "graph",
      "endpoint",
      "http",
      "request",
      "library",
      "axios",
      "tools",
      "explorer",
      "pro",
      "tip",
      "requests",
      "tested",
      "via",
      "following",
      "example",
      "allows",
      "log",
      "chat",
      "guide",
      "guides",
      "index",
      "ts",
      "import",
      "feathersjs",
      "feathers",
      "authenticationservice",
      "jwtstrategy",
      "authenticationrequest",
      "localstrategy",
      "local",
      "expressoauth",
      "oauthstrategy",
      "oauthprofile",
      "declarations",
      "declare",
      "module",
      "interface",
      "servicetypes",
      "serviceaddons",
      "class",
      "facebookstrategy",
      "extends",
      "async",
      "authresult",
      "access",
      "token",
      "used",
      "bearer",
      "const",
      "accesstoken",
      "await",
      "headers",
      "authorization",
      "return",
      "getentitydata",
      "existing",
      "returned",
      "basedata",
      "super",
      "export",
      "function",
      "new",
      "register",
      "jwt",
      "use",
      "configure",
      "see",
      "available",
      "user",
      "options",
      "docs",
      "reference"
    ],
    "category": "cookbook",
    "source": {
      "path": "cookbook/authentication/facebook.md",
      "url": "https://v6.feathersjs.com/cookbook/authentication/facebook"
    },
    "tags": [
      "authentication",
      "auth"
    ],
    "embedding": [
      -0.076043,
      0.118591,
      -0.03125,
      0.054507,
      0.089138,
      -0.068543,
      0.00023,
      0.086746,
      0.022279,
      -0.038591,
      -0.03051,
      0.016619,
      0.025142,
      0.014927,
      0.121831,
      0.079157,
      -0.041979,
      0.038664,
      -0.049179,
      0.009552,
      0.011106,
      -0.040055,
      0.035466,
      -0.002033,
      0.002947,
      -0.153035,
      0.025345,
      -0.035602,
      0.001723,
      -0.002852,
      0.15426,
      0.008445,
      -0.047105,
      0.00562,
      -0.123473,
      -0.04935,
      0.058241,
      -0.029753,
      -0.005481,
      -0.033557,
      0.011582,
      0.055446,
      -0.050736,
      0.05088,
      0.017401,
      -0.005701,
      -0.008215,
      0.052392,
      -0.102078,
      0.008298,
      -0.044972,
      -0.079852,
      -0.079133,
      0.041737,
      -0.02718,
      -0.002308,
      -0.028793,
      0.037829,
      0.043265,
      0.064181,
      0.012669,
      -0.066958,
      0.041014,
      0.011988,
      0.026472,
      0.00928,
      -0.075605,
      -0.064832,
      -0.083508,
      0.016785,
      0.018115,
      -0.010169,
      -0.012393,
      -0.071708,
      0.049333,
      -0.052359,
      -0.076363,
      0.084271,
      0.027706,
      -0.015241,
      0.007544,
      -0.016687,
      0.004672,
      0.072233,
      -0.002739,
      0.024458,
      -0.081099,
      -0.034065,
      -0.022424,
      0.060649,
      -0.052179,
      -0.04889,
      -0.084977,
      0.017782,
      0.089216,
      0.020838,
      -0.090593,
      -0.029929,
      -0.077941,
      0.023044,
      -0.037549,
      0.012158,
      0.080556,
      0.028359,
      0.102546,
      0.024569,
      -0.004356,
      -0.033024,
      -0.036652,
      0.083842,
      0.067482,
      0.019585,
      -0.004129,
      -0.047833,
      0.025259,
      0.001153,
      -0.023597,
      0.055907,
      0.100155,
      0.091167,
      0.047111,
      0.032554,
      0.008361,
      -0.022513,
      -0.017922,
      -0.035747,
      -0.012791,
      0,
      0.022535,
      0.053965,
      0.047246,
      0.057281,
      -0.077332,
      0.018972,
      0.022087,
      -0.09065,
      -0.039987,
      0.014119,
      -0.035954,
      0.106063,
      0.023345,
      0.022221,
      0.00304,
      -0.050563,
      0.054823,
      -0.046298,
      0.053243,
      0.031174,
      0.023544,
      -0.03347,
      -0.001884,
      0.023541,
      0.086288,
      -0.003648,
      0.078036,
      0.042228,
      -0.111678,
      -0.004361,
      0.007989,
      0.059931,
      -0.005736,
      0.027063,
      0.067837,
      -0.053614,
      0.056305,
      0.027217,
      -0.043984,
      -0.074302,
      0.099273,
      0.001086,
      -0.050523,
      0.014791,
      -0.109243,
      0.038169,
      0.01286,
      0.029986,
      0.124158,
      0.002112,
      -0.055486,
      -0.031754,
      -0.056892,
      -0.017066,
      0.068535,
      -0.021547,
      -0.069014,
      -0.050586,
      -0.072944,
      -0.083232,
      -0.013069,
      -0.038055,
      0.02953,
      -0.027661,
      -0.091735,
      0.026119,
      -0.016401,
      -0.014217,
      -0.012123,
      -0.070171,
      -0.040539,
      0.028756,
      -0.029989,
      -0.017847,
      -0.069057,
      0.021706,
      0.023306,
      0.058307,
      -0.026194,
      -0.014471,
      0.075902,
      0.02447,
      -0.081914,
      0.126934,
      -0.084448,
      0.056694,
      0.051449,
      0.027872,
      -0.078219,
      0.009274,
      0.016462,
      0.003351,
      0.059169,
      0.038099,
      -0.065765,
      0,
      0.061736,
      -0.062804,
      0.063746,
      -0.018937,
      0.027241,
      -0.013819,
      0.090077,
      -0.016258,
      0.041692,
      0.017121,
      -0.074845,
      -0.02205,
      0.002222,
      -0.045769,
      0.041371,
      0.065691,
      -0.054393,
      0.040108,
      0.043427,
      -0.042281,
      -0.046697,
      -0.023319,
      -0.025372,
      -0.023923,
      0.022818,
      0.047006,
      -0.044542,
      -0.020945,
      -0.022129,
      -0.03636,
      -0.021712,
      0.010269,
      -0.043245,
      0.015073,
      -0.066216,
      -0.05897,
      0.007973,
      0.055272,
      0.021421,
      -0.080463,
      0.082951,
      0.006541,
      -0.024093,
      0.069705,
      0.014478,
      0.062093,
      0.020836,
      0.000735,
      -0.073512,
      0.022583,
      0.065655,
      -0.009869,
      0.002202,
      -0.010221,
      -0.079665,
      -0.009247,
      0.086981,
      -0.001781,
      0.067508,
      -0.016472,
      0.042298,
      -0.049302,
      -0.062541,
      0.077756,
      -0.052023,
      -0.080685,
      0.00392,
      0.02677,
      0.008481,
      0.052345,
      -0.067169,
      -0.040192,
      0.033937,
      -0.000886,
      0.044096,
      0.059276,
      0.021567,
      -0.062201,
      0.0335,
      0.047939,
      -0.049502,
      -0.039743,
      -0.045117,
      0.022722,
      -0.008511,
      -0.058637,
      -0.044666,
      -0.003804,
      0.067309,
      0.023278,
      -0.044672,
      0.027291,
      -0.068474,
      -0.047604,
      0.017632,
      0,
      -0.0431,
      -0.075807,
      -0.014709,
      0.010354,
      -0.061422,
      -0.001835,
      0.045826,
      0.0057,
      0.033724,
      -0.028612,
      -0.080286,
      0.077899,
      0.000542,
      -0.003711,
      -0.0766,
      -0.001716,
      0.046888,
      -0.019974,
      0.044753,
      0.076256,
      -0.037318,
      -0.020205,
      0.002893,
      -0.028569,
      0.060238,
      -0.064965,
      -0.063376,
      0.017118,
      -0.05256,
      0.089332,
      -0.03407,
      -0.006135,
      0.087846,
      -0.092519,
      -0.088632,
      0.038947,
      -0.029514,
      -0.073352,
      0.003513,
      -0.030341,
      0.067084,
      -0.008675,
      0.069886,
      -0.036367,
      -0.111583,
      0.007452,
      0.086995,
      -0.004921,
      0.054718,
      -0.022423,
      -0.013125,
      0.006515,
      -0.030566,
      0.026095,
      -0.095374,
      0.000701,
      -0.008191,
      -0.00019,
      0.070297,
      -0.091157,
      0.012771,
      -0.001051,
      0.008539,
      -0.019704
    ]
  },
  {
    "id": "v6-doc-023",
    "title": "Firebase",
    "content": "# Firebase\n\n[Firebase](https://firebase.google.com/docs/auth) requires a custom [OAuth Authentication Strategy](../../api/authentication/oauth.html#oauthstrategy). This is because one is not provided to us, by the default [Grant](https://github.com/simov/grant) configuration Feathers uses for [OAuth](https://docs.feathersjs.com/api/authentication/oauth.html#oauth).\n\nSince Firebase does not provide a UI for us to redirect to, we use flow #2 outlined in [OAuth Flow](../../api/authentication/oauth.html#flow).\n\n## Authentation Setup\n\nUpdate `config/default.json`:\n\n```json\n{\n  \"authentication\": {\n    \"oauth\": {}\n  },\n  \"firebase\": {\n    \"type\": \"THIS SHOULD BE YOUR SERVICE ACCOUNT\",\n    \"project_id\": \"GENERATED UNDER FIREBASE CONSOLE\",\n    \"...\": \"...\"\n  }\n}\n\n```\n> Note: Since Firebase can be used for more than just authentication, we'll store our service account in the root of our config. Otherwise, if preferred, you can store under `authentication.oauth`.\n\n## Authentication Strategy\n\nCreate a file under `src/firebase.js`:\n\n```js\nconst firebase = require('firebase-admin');\nconst { OAuthStrategy } = require('@feathersjs/authentication-oauth');\nconst { NotAuthenticated } = require('@feathersjs/errors');\n\nconst logger = require('./logger');\n\nfunction initialize(app){\n  const firebaseConfig = app.get('firebase');\n\n  // Initialize app\n  try {\n    firebase.initializeApp({\n      credential: firebase.credential.cert(firebaseConfig)\n    });\n  } catch (e) {\n    console.log('erorr initializing firebase', e);\n  }\n}\n\nclass FirebaseStrategy extends OAuthStrategy {\n\n  async authenticate(authentication, params){\n    logger.debug('firebase:strategy:authenticate');\n    return super.authenticate(authentication, params);\n  }\n\n  async getProfile(data, _params){\n    const firebase = require('firebase-admin');\n    let user;\n\n    try {\n      user = await firebase.auth().verifyIdToken(data.access_token);\n    } catch(e){\n      logger.error(e);\n      throw new NotAuthenticated();\n    }\n\n    logger.debug(`firebase:strategy:getProfile:successful ${user.user_id}`);\n\n    return {\n      email: user.email,\n      id: user.user_id\n    };\n  }\n\n  async getEntityData(profile) {\n    const baseData = await super.getEntityData(profile);\n\n    return {\n      ...baseData,\n      email: profile.email\n    };\n  }\n}\n\nmodule.exports = { initialize, FirebaseStrategy };\n```\n\nNow we can edit `src/authentication.js`\n\n```js\nconst { AuthenticationService, JWTStrategy } = require('@feathersjs/authentication');\nconst { expressOauth } = require('@feathersjs/authentication-oauth');\n\nconst { FirebaseStrategy } = require('./firebase');\n\nmodule.exports = app => {\n  const authentication = new AuthenticationService(app);\n\n  authentication.register('firebase', new FirebaseStrategy());\n\n  app.use('/authentication', authentication);\n  app.configure(expressOauth());\n};\n```\n\n## Building frontend\n\nTo save time, you can leverage the pre-built UI provided by [Firebase UI](https://firebase.google.com/docs/auth/web/firebaseui).\n\n### Create auth page\n\nFirst, create a `public/firebase_auth.html` file that initializes everything we'll need for our different auth components.\n\n```html\n \n \n \n   \n   \n   Firebase Authentication Example \n   \n    \n\n   \n    \n\n   \n    \n   \n\n \n \n   \n   Welcome to My Awesome App \n\n   \n    \n\n   \n   \n      \n     Loading... \n   \n\n   \n    \n\n   \n    \n    \n    \n \n \n```\n\n### Initialize client w/Firebase auth\nNow, let's make a `public/client.js` file where all of our JavaScript will live.\n\n> Be sure to update `firebaseConfig` with the one provided from your [Firebase Console](https://console.firebase.google.com/). Additionally, checkout [Firebase UI](https://firebase.google.com/docs/auth/web/firebaseui) docs for more information on customizing `ui.start`. This includes theming options, all providers supported by Firebase & more.\n\n```js\nlet client, ui;\n\ninit();\n\nfunction init(){\n  initializeFeathers();\n  initializeAuth();\n  initializeFirebase();\n}\n\nfunction initializeFeathers(){\n  // Establish\n\n[... content truncated for knowledge base ...]",
    "version": "v6",
    "tokens": [
      "firebase",
      "https",
      "google",
      "com",
      "docs",
      "auth",
      "requires",
      "custom",
      "oauth",
      "authentication",
      "strategy",
      "api",
      "html",
      "oauthstrategy",
      "one",
      "provided",
      "us",
      "default",
      "grant",
      "github",
      "simov",
      "configuration",
      "feathers",
      "uses",
      "feathersjs",
      "since",
      "provide",
      "ui",
      "redirect",
      "use",
      "flow",
      "outlined",
      "authentation",
      "setup",
      "update",
      "config",
      "json",
      "type",
      "service",
      "account",
      "project",
      "id",
      "generated",
      "console",
      "note",
      "used",
      "ll",
      "store",
      "root",
      "otherwise",
      "if",
      "preferred",
      "create",
      "file",
      "src",
      "js",
      "const",
      "require",
      "admin",
      "notauthenticated",
      "errors",
      "logger",
      "function",
      "initialize",
      "app",
      "firebaseconfig",
      "get",
      "try",
      "initializeapp",
      "credential",
      "cert",
      "catch",
      "log",
      "erorr",
      "initializing",
      "class",
      "firebasestrategy",
      "extends",
      "async",
      "authenticate",
      "params",
      "debug",
      "return",
      "super",
      "getprofile",
      "data",
      "let",
      "user",
      "await",
      "verifyidtoken",
      "access",
      "token",
      "error",
      "throw",
      "new",
      "successful",
      "email",
      "getentitydata",
      "profile",
      "basedata",
      "module",
      "exports",
      "now",
      "edit",
      "authenticationservice",
      "jwtstrategy",
      "expressoauth",
      "register",
      "configure",
      "building",
      "frontend",
      "save",
      "time",
      "leverage",
      "pre",
      "built",
      "web",
      "firebaseui",
      "page",
      "first",
      "public",
      "initializes",
      "everything",
      "need",
      "different",
      "components",
      "example",
      "welcome",
      "awesome",
      "loading",
      "client",
      "make",
      "javascript",
      "live",
      "sure",
      "additionally",
      "checkout",
      "information",
      "customizing",
      "start",
      "includes",
      "theming",
      "options",
      "providers",
      "supported",
      "init",
      "initializefeathers",
      "initializeauth",
      "initializefirebase",
      "establish",
      "content",
      "truncated",
      "knowledge",
      "base"
    ],
    "category": "cookbook",
    "source": {
      "path": "cookbook/authentication/firebase.md",
      "url": "https://v6.feathersjs.com/cookbook/authentication/firebase"
    },
    "tags": [
      "authentication",
      "auth"
    ],
    "embedding": [
      -0.036007,
      0.029079,
      0.011627,
      0.030644,
      0.050244,
      -0.027829,
      0.038086,
      -0.03037,
      0.029895,
      -0.008553,
      -0.100636,
      0.056065,
      -0.017845,
      0.038226,
      0.019572,
      0.061383,
      -0.069106,
      0.01987,
      -0.001505,
      0.013394,
      -0.024958,
      -0.004514,
      0.048147,
      0.065942,
      -0.016345,
      -0.089958,
      -0.02317,
      -0.024594,
      -0.042741,
      0.084977,
      0.058462,
      -0.040654,
      -0.042698,
      -0.002031,
      -0.0592,
      0.036493,
      0.042998,
      -0.035595,
      -0.07269,
      0.020564,
      0.029638,
      -0.014978,
      -0.076065,
      0.010716,
      -0.030082,
      -0.003013,
      -0.021331,
      -0.061168,
      0.007615,
      0.16801,
      0.026192,
      -0.040044,
      -0.114599,
      0.065833,
      0.013737,
      0.079473,
      -0.01157,
      0.014719,
      -0.026197,
      -0.041031,
      0.048127,
      -0.062355,
      0.019092,
      -0.022085,
      -0.004759,
      -0.021548,
      0.017331,
      0.007539,
      0.003274,
      -0.095013,
      0.092993,
      0.044587,
      -0.053664,
      -0.090951,
      -0.045859,
      0.035432,
      -0.029603,
      0.064689,
      0.035794,
      -0.019123,
      0.027402,
      -0.053659,
      0.045907,
      0.133752,
      0.012637,
      0.047181,
      -0.051546,
      -0.024329,
      0.035109,
      0.059944,
      0.055882,
      0.001815,
      0.022519,
      -0.038427,
      0.07946,
      -0.013223,
      -0.051615,
      0.050455,
      -0.078808,
      -0.015011,
      -0.06769,
      -0.002378,
      0.005173,
      -0.015877,
      0.112771,
      -0.017901,
      -0.039794,
      -0.033588,
      -0.005529,
      0.034958,
      0.035826,
      -0.043424,
      0.014575,
      0.008125,
      0.009259,
      0.052963,
      -0.071546,
      -0.054506,
      -0.017625,
      0.086374,
      0.075401,
      0.041737,
      0.069571,
      0.027776,
      0.031658,
      -0.006691,
      -0.088754,
      0,
      0.029955,
      0.069041,
      0.022956,
      0.043495,
      0.000456,
      -0.009962,
      0.029061,
      -0.058911,
      -0.078739,
      0.024475,
      -0.042959,
      0.137796,
      0.061038,
      -0.043398,
      -0.003845,
      -0.023704,
      -0.005017,
      -0.047639,
      0.093695,
      0.06391,
      0.000148,
      -0.031386,
      0.008284,
      0.049829,
      0.020923,
      -0.011893,
      -0.060017,
      -0.025855,
      -0.103676,
      0.00477,
      0.054327,
      -0.117841,
      0.020155,
      -0.035314,
      -0.038206,
      -0.07013,
      0.004452,
      -0.073328,
      -0.059618,
      -0.015162,
      -0.02368,
      -0.058451,
      -0.059333,
      0.044223,
      -0.00449,
      -0.019055,
      -0.009901,
      -0.013302,
      0.137178,
      -0.011316,
      -0.000677,
      -0.052383,
      -0.01898,
      -0.060359,
      0.034607,
      -0.054991,
      -0.069555,
      -0.009826,
      -0.063959,
      -0.038163,
      -0.009644,
      -0.026984,
      0.009296,
      -0.052837,
      0.039266,
      -0.020135,
      -0.037797,
      0.07271,
      0.041414,
      -0.030751,
      0.004058,
      0.049547,
      -0.039858,
      0.032883,
      -0.076726,
      -0.059061,
      0.057797,
      0.075892,
      0.026393,
      -0.025859,
      0.014252,
      -0.035993,
      -0.027335,
      0.120353,
      -0.004006,
      0.000256,
      0.082126,
      0.017171,
      -0.060589,
      0.02407,
      0.069101,
      0.029409,
      0.139155,
      -0.009304,
      -0.057003,
      0,
      -0.001347,
      -0.104019,
      -0.063142,
      0.02288,
      0.036525,
      0.04468,
      0.1275,
      -0.010041,
      0.046529,
      0.048365,
      -0.042189,
      0.098495,
      -0.016896,
      -0.024941,
      -0.035021,
      0.000833,
      -0.053389,
      -0.04597,
      0.039089,
      -0.07475,
      -0.032093,
      0.050024,
      -0.016406,
      -0.014842,
      -0.091162,
      0.045534,
      -0.00987,
      -0.085593,
      -0.029705,
      0.015248,
      0.002829,
      0.012109,
      -0.065771,
      0.013898,
      -0.00803,
      -0.040383,
      0.014879,
      0.0832,
      -0.00826,
      -0.004656,
      0.019001,
      -0.00125,
      -0.014338,
      -0.065994,
      -0.013345,
      0.038943,
      -0.015312,
      -0.018453,
      -0.078409,
      0.039975,
      0.065152,
      -0.017281,
      -0.005589,
      0.034968,
      -0.060276,
      0.009973,
      0.054571,
      -0.054367,
      0.059942,
      0.018753,
      0.062713,
      -0.096561,
      0.024129,
      0.134182,
      -0.076257,
      -0.006635,
      -0.003646,
      0.112069,
      -0.034298,
      0.019396,
      -0.102151,
      -0.033,
      0.114877,
      0.050708,
      0.030617,
      -0.003173,
      0.036951,
      -0.073544,
      0.076542,
      0.020361,
      -0.036735,
      0.062882,
      -0.006676,
      0.014298,
      0.027949,
      -0.136991,
      -0.034521,
      0.057995,
      0.046523,
      0.002469,
      -0.073747,
      -0.040766,
      -0.021598,
      -0.044965,
      0.03975,
      0,
      -0.006338,
      0.05267,
      -0.011442,
      0.043198,
      0.050813,
      0.007742,
      -0.018071,
      0.004847,
      0.003972,
      -0.035415,
      -0.038061,
      0.079371,
      0.020034,
      -0.048189,
      -0.017211,
      -0.020789,
      0.043418,
      -0.047814,
      -0.020818,
      -0.040888,
      -0.073415,
      0.056017,
      -0.079026,
      -0.053167,
      -0.073533,
      0.020691,
      -0.004775,
      0.007131,
      -0.009871,
      0.023798,
      -0.061645,
      -0.016452,
      -0.003461,
      -0.07586,
      -0.096362,
      -0.018478,
      0.010548,
      -0.047758,
      0.007822,
      -0.003437,
      0.00797,
      0.000975,
      0.076778,
      -0.086987,
      -0.045177,
      -0.051501,
      0.085757,
      0.01962,
      0.075528,
      0.102716,
      0.054037,
      -0.013218,
      0.014944,
      0.048737,
      0.063626,
      -0.04628,
      -0.050708,
      -0.025966,
      0.046398,
      -0.070917,
      0.017887,
      0.03033,
      0.064653,
      -0.035344
    ]
  },
  {
    "id": "v6-doc-024",
    "title": "Google",
    "content": "# Google\n\nTo enable Google login, add the app id, app secret and scope property to `config/default.json`:\n\n```js\n{\n  \"authentication\": {\n    \"oauth\": {\n      \"google\": {\n        \"key\": \" \",\n        \"secret\": \" \",\n        \"scope\": [\"openid\"]\n      }\n    }\n  }\n}\n```\n\nAccording to the [documentation of Google](https://developers.google.com/identity/protocols/OpenIDConnect#scope-param):\n\"The scope value must begin with the string openid and then include profile or email or both.\".\n\nTo also request the email address, add the string \"email\" to the array of the 'scope' property:\n```js\n{\n  \"authentication\": {\n    \"oauth\": {\n      \"google\": {\n        \"key\": \" \",\n        \"secret\": \" \",\n        \"scope\": [\"openid\", \"email\"],\n        \"nonce\": true\n      }\n    }\n  }\n}\n```\n\nThe property 'nonce', according to the documentation: \"A random value generated by your app that enables replay protection.\".\n\n## Application client and secret\n\nThe client id (App ID) and secret can be acquired by creating a [OAuth client ID](https://console.developers.google.com/apis/credentials):\n1. Click on 'OAuth client ID'\n![Creating OAuth client ID - step 1](https://bartduisters.com/img/feathers/oauth-client-id-1.png)\n2. Select 'web application', fill in the information and click 'Create'\n![Creating OAuth client ID - step 2](https://bartduisters.com/img/feathers/oauth-client-id-2.png)\n\n**Important**: Fill in the callback url, in a default Feathers setup it will be /oauth/google/callback.\n\n3. Replace ` ` and ` ` with the id and secret of the created OAuth client ID application\n\n```js\n{\n  \"authentication\": {\n    \"oauth\": {\n      \"google\": {\n        \"key\": \" .apps.googleusercontent.com\",\n        \"secret\": \" \",\n        \"scope\": [\"openid\", \"email\"],\n        \"nonce\": true\n      }\n    }\n  }\n}\n```\n\nNote: Use the generated credentials of the OAuth client ID.\n\nNote: ` ` will be replaced by a string similar to **481298021138-hv27glb811ocr7pdon5lsg8hh5a6pgjv**.apps.googleusercontent.com.\n\nNote: ` ` will be replaced by a string similar to **XkWl0witdP4ogeNIgyOi-CeS**.\n\n## Using the data returned from the Google App through a custom OAuth Strategy\n\nIn `src/authentication.js`:\n\n```js\nconst axios = require('axios');\nconst { OAuthStrategy } = require('@feathersjs/authentication-oauth');\n\nclass GoogleStrategy extends OAuthStrategy {\n  async getEntityData(profile) {\n\n    // this will set 'googleId'\n    const baseData = await super.getEntityData(profile);\n\n    // this will grab the picture and email address of the Google profile\n    return {\n      ...baseData,\n      profilePicture: profile.picture,\n      email: profile.email\n    };\n  }\n}\n\nmodule.exports = app => {\n  const authentication = new AuthenticationService(app);\n\n  authentication.register('jwt', new JWTStrategy());\n  authentication.register('local', new LocalStrategy());\n  authentication.register('google', new GoogleStrategy());\n\n  app.use('/authentication', authentication);\n  app.configure(expressOauth());\n};\n```\n**Important**: googleId, profilePicture and email are properties that should exist on the database model!",
    "version": "v6",
    "tokens": [
      "google",
      "enable",
      "login",
      "add",
      "app",
      "id",
      "secret",
      "scope",
      "property",
      "config",
      "default",
      "json",
      "js",
      "authentication",
      "oauth",
      "key",
      "openid",
      "according",
      "documentation",
      "https",
      "developers",
      "com",
      "identity",
      "protocols",
      "openidconnect",
      "param",
      "value",
      "begin",
      "string",
      "include",
      "profile",
      "email",
      "also",
      "request",
      "address",
      "array",
      "nonce",
      "true",
      "random",
      "generated",
      "enables",
      "replay",
      "protection",
      "application",
      "client",
      "acquired",
      "creating",
      "console",
      "apis",
      "credentials",
      "click",
      "step",
      "bartduisters",
      "img",
      "feathers",
      "png",
      "select",
      "web",
      "fill",
      "information",
      "create",
      "important",
      "callback",
      "url",
      "setup",
      "replace",
      "created",
      "apps",
      "googleusercontent",
      "note",
      "use",
      "replaced",
      "similar",
      "481298021138",
      "hv27glb811ocr7pdon5lsg8hh5a6pgjv",
      "xkwl0witdp4ogenigyoi",
      "ces",
      "using",
      "data",
      "returned",
      "custom",
      "strategy",
      "src",
      "const",
      "axios",
      "require",
      "oauthstrategy",
      "feathersjs",
      "class",
      "googlestrategy",
      "extends",
      "async",
      "getentitydata",
      "set",
      "googleid",
      "basedata",
      "await",
      "super",
      "grab",
      "picture",
      "return",
      "profilepicture",
      "module",
      "exports",
      "new",
      "authenticationservice",
      "register",
      "jwt",
      "jwtstrategy",
      "local",
      "localstrategy",
      "configure",
      "expressoauth",
      "properties",
      "exist",
      "database",
      "model"
    ],
    "category": "cookbook",
    "source": {
      "path": "cookbook/authentication/google.md",
      "url": "https://v6.feathersjs.com/cookbook/authentication/google"
    },
    "tags": [
      "authentication",
      "auth"
    ],
    "embedding": [
      -0.148125,
      -0.00013,
      0.053834,
      -0.00334,
      0.028669,
      -0.039846,
      0.079756,
      0.009338,
      -0.012848,
      0.003552,
      -0.054425,
      -0.006707,
      0.076655,
      -0.015199,
      0.05329,
      0.099367,
      0.025707,
      0.016887,
      -0.022681,
      -0.026635,
      0.015651,
      0.018238,
      0.060093,
      -0.005612,
      -0.03612,
      -0.166115,
      0.018248,
      -0.016445,
      0.015001,
      0.043426,
      0.09058,
      0.001391,
      -0.025638,
      0.021541,
      -0.060358,
      -0.027895,
      0.022531,
      0.057383,
      -0.072814,
      -0.03352,
      -0.005278,
      -0.019347,
      -0.094677,
      -0.02661,
      0.059636,
      -0.023027,
      -0.01681,
      0.001896,
      -0.04772,
      0.061146,
      0.012993,
      -0.072018,
      -0.071352,
      -0.027763,
      -0.070981,
      0.0242,
      -0.091546,
      0.061152,
      0.077415,
      0.059401,
      -0.033054,
      -0.066953,
      0.017822,
      -0.024999,
      0.008023,
      0.006342,
      -0.014808,
      -0.055388,
      -0.056715,
      0.007896,
      0.036725,
      0.068226,
      -0.064907,
      -0.121167,
      -0.00095,
      0.009148,
      -0.098956,
      0.05065,
      0.034056,
      0.063857,
      0.010678,
      -0.023871,
      -0.01126,
      0.096906,
      -0.042148,
      -0.01021,
      -0.022517,
      0.005413,
      0.030134,
      0.038246,
      -0.010065,
      -0.026837,
      -0.058211,
      -0.008372,
      0.128626,
      0.015641,
      -0.087512,
      -0.010356,
      -0.027454,
      0.007194,
      -0.008718,
      0.013371,
      0.05459,
      0.0081,
      0.003466,
      0.003979,
      0.002092,
      -0.00144,
      0.014222,
      0.047557,
      0.096554,
      0.077473,
      0.042489,
      -0.016602,
      -0.008074,
      0.031623,
      -0.062016,
      -0.010775,
      0.075811,
      0.070118,
      0.008129,
      -0.03597,
      0.004655,
      -0.05846,
      -0.006157,
      0.033594,
      0.034164,
      0,
      0.062807,
      0.054731,
      0.067162,
      -0.025496,
      -0.111998,
      0.055223,
      -0.001262,
      -0.060632,
      -0.042913,
      -0.032742,
      -0.070827,
      0.14175,
      0.059989,
      0.026783,
      -0.006001,
      0.071461,
      0.023404,
      0.034551,
      0.077656,
      0.022788,
      -0.045877,
      -0.023035,
      0.068691,
      -0.035275,
      0.0093,
      0.000342,
      0.021719,
      -0.067525,
      -0.102075,
      0.010756,
      0.006936,
      -0.016988,
      -0.016484,
      0.071751,
      0.032679,
      -0.015555,
      -0.022333,
      -0.017194,
      -0.024703,
      -0.067951,
      0.013736,
      0.020975,
      -0.007434,
      0.029251,
      -0.107432,
      0.008888,
      0.101616,
      -0.076571,
      0.131703,
      0.035789,
      -0.003308,
      -0.015664,
      -0.131479,
      -0.103848,
      0.00165,
      -0.019221,
      -0.017211,
      -0.029972,
      -0.079222,
      -0.048654,
      -0.010966,
      0.02194,
      0.041033,
      -0.027305,
      -0.019646,
      -0.068109,
      -0.057321,
      -0.018855,
      0.01243,
      -0.017886,
      -0.004297,
      -0.035862,
      -0.010686,
      0.029604,
      -0.085498,
      -0.034242,
      0.071537,
      0.118908,
      -0.037588,
      -0.008195,
      0.095508,
      -0.037016,
      -0.058188,
      0.088479,
      -0.067192,
      0.053326,
      0.026907,
      0.025221,
      -0.066439,
      -0.00415,
      -0.016854,
      -0.053437,
      0.016253,
      0.049705,
      -0.052599,
      0,
      -0.003809,
      -0.085751,
      0.053335,
      -0.019326,
      0.039552,
      -0.043479,
      0.118863,
      0.039144,
      0.022834,
      0.038901,
      -0.034031,
      0.018594,
      0.040718,
      0.078731,
      0.028182,
      -0.022076,
      -0.050748,
      0.038006,
      0.000438,
      -0.028847,
      0.012112,
      0.00852,
      0.022994,
      -0.017653,
      0.005956,
      0.021206,
      -0.023841,
      -0.058239,
      -0.002558,
      0.00497,
      0.037423,
      0.066805,
      -0.049073,
      0.039688,
      0.025794,
      -0.099025,
      0.067752,
      0.044518,
      0.013803,
      -0.081072,
      0.014647,
      0.029105,
      0.030099,
      -0.044868,
      0.049007,
      0.081164,
      0.052551,
      0.032265,
      -0.083552,
      0.039596,
      0.078305,
      0.046836,
      0.013675,
      -0.035002,
      0.007119,
      -0.018155,
      0.039737,
      -0.093513,
      0.05099,
      -0.042016,
      0.018134,
      -0.110278,
      0.03307,
      0.050681,
      0.005249,
      -0.003335,
      0.03607,
      0.040012,
      -0.004938,
      -0.000379,
      -0.13345,
      -0.093175,
      0.051491,
      -0.014898,
      -0.01066,
      0.039807,
      -0.01779,
      -0.056182,
      0.033145,
      0.002403,
      0.024429,
      -0.040461,
      -0.009027,
      -0.035278,
      0.053469,
      -0.071569,
      -0.050171,
      0.059455,
      0.121416,
      0.055689,
      -0.043506,
      0.013034,
      -0.088879,
      -0.05468,
      -0.052257,
      0,
      0.029021,
      0.008253,
      -0.0179,
      0.06314,
      -0.02829,
      -0.026762,
      0.00732,
      -0.079188,
      0.029127,
      -0.076596,
      -0.034368,
      0.029868,
      -0.007446,
      -0.010124,
      -0.059482,
      -0.008727,
      -0.040319,
      -0.079084,
      0.033792,
      0.041754,
      -0.089693,
      -0.021038,
      -0.008434,
      -0.02799,
      0.016234,
      -0.036541,
      0.040092,
      0.012004,
      -0.019785,
      0.009626,
      -0.063791,
      -0.055899,
      -0.019281,
      -0.07245,
      -0.069378,
      0.008566,
      0.020568,
      -0.095002,
      0.010618,
      -0.081894,
      0.029862,
      0.030957,
      0.120828,
      -0.039246,
      -0.02567,
      0.047169,
      0.071115,
      -0.01638,
      0.050637,
      0.095119,
      -0.04648,
      -0.017657,
      0.013351,
      0.059,
      0.000752,
      -0.074513,
      -0.02208,
      -0.063333,
      0.029657,
      -0.069469,
      0.042095,
      0.018391,
      0.014897,
      -0.027784
    ]
  },
  {
    "id": "v6-doc-025",
    "title": "Revoking JWTs",
    "content": "# Revoking JWTs\n\nBy default a valid JWT can be used for as long as it is valid. To do a normal logout the client just \"forgets\" their JWT (usually by removing it from localStorage).\n\nTo add the ability to revoke an access token so that it can be no longer used even if it is still valid [the authentication service](../../api/authentication/service) can be customized as follows.\n\n## Basic example\n\nThe following example shows the basic flow of how a JWT can be revoked by storing it in a plain object. In a normal application you would use something like the [Redis storage shown below](#using-redis).\n\n```js\nconst { AuthenticationService } = require('@feathersjs/authentication');\nconst { NotAuthenticated } = require('@feathersjs/errors');\n\nconst revokedTokens = {};\n\nclass RevokableAuthService extends AuthenticationService {\n  async revokeAccessToken (accessToken) {\n    // First make sure the access token is valid\n    const verified = await this.verifyAccessToken(accessToken);\n\n    revokedTokens[accessToken] = true;\n\n    return verified;\n  }\n\n  async verifyAccessToken(accessToken) {\n    // First check if the token has been revoked\n    if (revokedTokens[accessToken]) {\n      throw new NotAuthenticated('Token revoked');\n    }\n\n    return super.verifyAccessToken(accessToken);\n  }\n\n  async remove (id, params) {\n    const authResult = await super.remove(id, params);\n    const { accessToken } = authResult;\n\n    if (accessToken) {\n      // If there is an access token, revoke it\n      await this.revokeAccessToken(accessToken);\n    }\n\n    return authResult;\n  }\n}\n\napp.use('/authentication', new RevokableAuthService(app));\n```\n\n## Using Redis\n\n[Redis](https://redis.io/) is a great storage mechanism for revoked JWTs because it allows to remove keys after a certain time. A revoked JWT does not have to be stored forever and can be removed from storage after it has expired since it will no longer be valid anyway. The flow is the same as shown above but using the NodeJS Redis adapter instead:\n\n```\nnpm install redis\n```\n\n```js\nconst redis = require('redis');\n\nconst { AuthenticationService } = require('@feathersjs/authentication');\nconst { NotAuthenticated } = require('@feathersjs/errors');\n\nclass RedisAuthService extends AuthenticationService {\n  constructor (app, configKey) {\n    super(app, configKey);\n\n    const client = redis.createClient();\n\n    this.redis = {\n      client,\n      get: client.get.bind(client),\n      set: client.set.bind(client),\n      exists: client.exists.bind(client),\n      expireat: client.exists.bind(client)\n    }\n\n    (async () => {\n      await this.redis.client.connect();\n    })()\n  }\n\n  async revokeAccessToken (accessToken) {\n    // First make sure the access token is valid\n    const verified = await this.verifyAccessToken(accessToken);\n    // Calculate the remaining valid time for the token (in seconds)\n    const expiry = verified.exp - Math.floor(Date.now() / 1000);\n\n    // Add the revoked token to Redis and set expiration\n    await this.redis.set(accessToken, 1, { EX: expiry });\n\n    return verified;\n  }\n\n  async verifyAccessToken(accessToken) {\n    if (await this.redis.exists(accessToken)) {\n      throw new NotAuthenticated('Token revoked');\n    }\n\n    return super.verifyAccessToken(accessToken);\n  }\n\n  async remove (id, params) {\n    const authResult = await super.remove(id, params);\n    const { accessToken } = authResult;\n\n    if (accessToken) {\n      // If there is an access token, revoke it\n      await this.revokeAccessToken(accessToken);\n    }\n\n    return authResult;\n  }\n}\n\napp.use('/authentication', new RedisAuthService(app));\n```",
    "version": "v6",
    "tokens": [
      "revoking",
      "jwts",
      "default",
      "valid",
      "jwt",
      "used",
      "long",
      "normal",
      "logout",
      "client",
      "forgets",
      "usually",
      "removing",
      "localstorage",
      "add",
      "ability",
      "revoke",
      "access",
      "token",
      "longer",
      "even",
      "if",
      "still",
      "authentication",
      "service",
      "api",
      "customized",
      "follows",
      "basic",
      "example",
      "following",
      "shows",
      "flow",
      "revoked",
      "storing",
      "plain",
      "object",
      "application",
      "use",
      "something",
      "like",
      "redis",
      "storage",
      "shown",
      "using",
      "js",
      "const",
      "authenticationservice",
      "require",
      "feathersjs",
      "notauthenticated",
      "errors",
      "revokedtokens",
      "class",
      "revokableauthservice",
      "extends",
      "async",
      "revokeaccesstoken",
      "accesstoken",
      "first",
      "make",
      "sure",
      "verified",
      "await",
      "verifyaccesstoken",
      "true",
      "return",
      "check",
      "throw",
      "new",
      "super",
      "remove",
      "id",
      "params",
      "authresult",
      "app",
      "https",
      "io",
      "great",
      "mechanism",
      "allows",
      "keys",
      "certain",
      "time",
      "stored",
      "forever",
      "removed",
      "expired",
      "since",
      "anyway",
      "nodejs",
      "adapter",
      "instead",
      "npm",
      "install",
      "redisauthservice",
      "constructor",
      "configkey",
      "createclient",
      "get",
      "bind",
      "set",
      "exists",
      "expireat",
      "connect",
      "calculate",
      "remaining",
      "seconds",
      "expiry",
      "exp",
      "math",
      "floor",
      "date",
      "now",
      "1000",
      "expiration",
      "ex"
    ],
    "category": "cookbook",
    "source": {
      "path": "cookbook/authentication/revoke-jwt.md",
      "url": "https://v6.feathersjs.com/cookbook/authentication/revoke-jwt"
    },
    "tags": [
      "authentication",
      "auth",
      "jwt"
    ],
    "embedding": [
      -0.064748,
      0.112243,
      -0.006876,
      0.025652,
      -0.010878,
      -0.03387,
      0.080416,
      -0.059886,
      0.076884,
      -0.022105,
      -0.025054,
      0.12309,
      0.012178,
      -0.018738,
      -0.041413,
      -0.028364,
      0.000402,
      0.163803,
      -0.040645,
      0.002836,
      0.015527,
      -0.00725,
      -0.038246,
      0.068273,
      0.00667,
      -0.065593,
      0.057371,
      -0.026295,
      -0.019206,
      -0.003315,
      0.067031,
      -0.031795,
      -0.085589,
      -0.089151,
      -0.057994,
      0.055231,
      -0.013928,
      -0.041907,
      0.046532,
      -0.036019,
      -0.038328,
      0.027875,
      -0.088213,
      -0.012374,
      0.018519,
      -0.024644,
      -0.071888,
      -0.024334,
      -0.013017,
      0.05517,
      0.101126,
      -0.008623,
      -0.052504,
      0.021953,
      -0.084056,
      -0.003221,
      -0.0066,
      -0.000578,
      -0.067567,
      0.03623,
      -0.021581,
      -0.045116,
      0.061155,
      -0.040322,
      -0.048247,
      0.052759,
      0.005607,
      -0.050772,
      0.064135,
      0.055866,
      0.000937,
      -0.007686,
      -0.007016,
      -0.050035,
      -0.033289,
      0.04824,
      -0.006339,
      0.059902,
      0.014625,
      0.014227,
      0.052286,
      -0.003701,
      0.111436,
      0.02977,
      0.012817,
      0.023164,
      -0.055669,
      0.024547,
      0.034072,
      -0.000904,
      0.01879,
      0.113461,
      0.087424,
      0.002973,
      0.08616,
      -0.085007,
      -0.059542,
      0.020071,
      -0.028002,
      0.032741,
      -0.035016,
      0.017204,
      -0.013005,
      0.008716,
      0.097948,
      -0.036725,
      -0.040307,
      -0.039867,
      0.042917,
      0.028209,
      -0.020005,
      0.030313,
      -0.041987,
      0.029506,
      -0.007584,
      0.111678,
      0.005778,
      0.04612,
      -0.040015,
      -0.002765,
      0.039038,
      0.009936,
      0.045917,
      -0.078612,
      0.038585,
      -0.030163,
      -0.044464,
      0,
      -0.084723,
      0.043324,
      0.000122,
      0.041639,
      -0.006241,
      -0.054505,
      -0.035914,
      -0.027467,
      -0.021973,
      -0.042076,
      0.054171,
      0.04941,
      0.01608,
      -0.034561,
      0.070302,
      -0.019941,
      0.077515,
      -0.041531,
      0.105983,
      -0.075785,
      0.044536,
      0.016787,
      0.040647,
      -0.000229,
      -0.02701,
      -0.04419,
      -0.02964,
      -0.055718,
      -0.093791,
      -0.005585,
      0.037895,
      0.007897,
      0.006526,
      0.033941,
      -0.014272,
      -0.024289,
      0.027644,
      -0.024769,
      0.005677,
      -0.033301,
      -0.038373,
      0.014796,
      -0.108822,
      0.063611,
      -0.035483,
      -0.109282,
      0.053998,
      -0.029549,
      0.089653,
      0.027568,
      -0.039938,
      0.063454,
      0.00661,
      -0.0408,
      0.019819,
      -0.049031,
      0.008306,
      -0.001948,
      -0.065746,
      -0.063265,
      0.002056,
      -0.018179,
      0.007509,
      -0.025822,
      -0.002462,
      0.040339,
      -0.04066,
      -0.064038,
      -0.13685,
      -0.098832,
      -0.010999,
      0.043667,
      0.045058,
      -0.068911,
      -0.106536,
      -0.033104,
      0.121056,
      0.09017,
      -0.000718,
      -0.024544,
      0.089803,
      -0.049104,
      -0.077775,
      0.07176,
      0.043579,
      -0.092396,
      0.032292,
      -0.024989,
      -0.002819,
      -0.019382,
      0.069175,
      -0.015136,
      0.030933,
      0.012854,
      -0.024701,
      0,
      0.005065,
      -0.023523,
      -0.079541,
      0.054234,
      -0.030473,
      0.006192,
      0.002189,
      0.069382,
      -0.105903,
      -0.02936,
      -0.022176,
      0.023481,
      0.02061,
      0.097658,
      -0.096082,
      0.064916,
      -0.046812,
      0.019519,
      -0.02051,
      -0.022375,
      0.065296,
      0.068591,
      0.079779,
      0.013665,
      -0.067332,
      0.025917,
      -0.048816,
      0.003014,
      -0.044859,
      -0.086835,
      0.041039,
      -0.022281,
      0.082474,
      -0.056701,
      -0.014624,
      -0.116661,
      -0.014878,
      0.132813,
      -0.092695,
      -0.015278,
      0.034541,
      -0.024673,
      0.000174,
      -0.058991,
      0.023262,
      0.000519,
      -0.033518,
      0.023853,
      -0.004875,
      0.052896,
      -0.034043,
      -0.003416,
      0.013232,
      0.074596,
      -0.048494,
      0.011303,
      0.058717,
      -0.028428,
      0.057083,
      0.039339,
      0.047579,
      -0.110312,
      0.07467,
      0.104199,
      0.011623,
      -0.024989,
      -0.001183,
      0.113072,
      0.011863,
      0.026437,
      0.002455,
      0.044382,
      0.008924,
      0.028825,
      0.056302,
      0.00706,
      0.023201,
      -0.120225,
      0.014858,
      -0.006227,
      -0.006896,
      -0.040529,
      0.004799,
      0.014913,
      0.024664,
      -0.106858,
      -0.066962,
      0.004146,
      0.034739,
      0.008317,
      0.026189,
      -0.030807,
      -0.013237,
      -0.035856,
      0.011881,
      0,
      -0.037863,
      -0.022039,
      0.058672,
      -0.015809,
      0.024998,
      -0.051529,
      -0.010249,
      0.033918,
      -0.050262,
      -0.012238,
      -0.021337,
      0.043424,
      0.00272,
      -0.154837,
      -0.066979,
      0.061328,
      0.015815,
      -0.021044,
      0.029399,
      0.016912,
      -0.053139,
      -0.003061,
      0.007913,
      0.031343,
      0.022575,
      -0.000933,
      0.111587,
      0.022249,
      0.028184,
      -0.008613,
      -0.096384,
      0.015116,
      0.122973,
      0.013059,
      -0.154837,
      -0.001257,
      -0.03051,
      0.008501,
      0.002287,
      0.013611,
      -0.031381,
      -0.012684,
      -0.024636,
      0.007263,
      -0.031333,
      0.037262,
      0.050685,
      0.020859,
      0.019535,
      -0.000374,
      -0.033046,
      0.020097,
      -0.040753,
      0.070778,
      -0.045987,
      0.010888,
      0.010011,
      0.06961,
      0.077266,
      -0.004481,
      0.03112,
      0.007286,
      0.015171,
      -0.049119
    ]
  },
  {
    "id": "v6-doc-026",
    "title": "Stateless JWT",
    "content": "# Stateless JWT\n\nBy default, an authentication token is associated to an entity (usually a user). It is also possible to issue tokens that are stateless and not tied to an entity lookup. This can be useful when all the information necessary can be contained in the token payload. The drawback is that the token information can not be changed and will always be valid until the token expires so it is e.g. not possible to disable a user or change their permissions before the token expires.\n\n## Configuration\n\nStateless tokens can be issued by setting the `entity` option in the [JWT strategy authentication configuration](../../api/authentication/jwt#configuration) to `null` (in which case `service` option also won't be used):\n\n```json\n{\n  \"authentication\": {\n    \"secret\": \"CHANGE_ME\",\n    \"entity\": null,\n    \"authStrategies\": [ \"jwt\", \"local\" ],\n    \"jwtOptions\": {\n      \"header\": { \"typ\": \"access\" },\n      \"audience\": \"https://yourdomain.com\",\n      \"issuer\": \"feathers\",\n      \"algorithm\": \"HS256\",\n      \"expiresIn\": \"1d\"\n    }\n  }\n}\n```\n\n> __Note:__ When still using other built-in strategies (like the [local strategy](../../api/authentication/local)) with an entity, the option can be set for each strategy (e.g. `{ \"authentication\": { \"local\": { \"entity\": \"user\" } } }`).\n\n## Customizing the payload\n\nIn order for the token to contain information, the `getPayload` method needs to be customize by [extending the authentication service](../../api/authentication/service#customization):\n\n```js\nconst { AuthenticationService } = require('@feathersjs/authentication');\n\nclass MyAuthService extends AuthenticationService {\n  async getPayload(authResult, params) {\n    // Call original `getPayload` first\n    const payload = await super.getPayload(authResult, params);\n    const { user } = authResult;\n\n    if (user && user.permissions) {\n      payload.permissions = user.permissions;\n    }\n\n    return payload;\n  }\n}\n\napp.use('/authentication', new MyAuthService(app));\n```",
    "version": "v6",
    "tokens": [
      "stateless",
      "jwt",
      "default",
      "authentication",
      "token",
      "associated",
      "entity",
      "usually",
      "user",
      "also",
      "possible",
      "issue",
      "tokens",
      "tied",
      "lookup",
      "useful",
      "information",
      "necessary",
      "contained",
      "payload",
      "drawback",
      "changed",
      "always",
      "valid",
      "expires",
      "disable",
      "change",
      "permissions",
      "configuration",
      "issued",
      "setting",
      "option",
      "strategy",
      "api",
      "null",
      "case",
      "service",
      "won",
      "used",
      "json",
      "secret",
      "authstrategies",
      "local",
      "jwtoptions",
      "header",
      "typ",
      "access",
      "audience",
      "https",
      "yourdomain",
      "com",
      "issuer",
      "feathers",
      "algorithm",
      "hs256",
      "expiresin",
      "1d",
      "note",
      "still",
      "using",
      "built",
      "strategies",
      "like",
      "set",
      "customizing",
      "order",
      "contain",
      "getpayload",
      "method",
      "needs",
      "customize",
      "extending",
      "customization",
      "js",
      "const",
      "authenticationservice",
      "require",
      "feathersjs",
      "class",
      "myauthservice",
      "extends",
      "async",
      "authresult",
      "params",
      "call",
      "original",
      "first",
      "await",
      "super",
      "if",
      "return",
      "app",
      "use",
      "new"
    ],
    "category": "cookbook",
    "source": {
      "path": "cookbook/authentication/stateless.md",
      "url": "https://v6.feathersjs.com/cookbook/authentication/stateless"
    },
    "tags": [
      "authentication",
      "auth",
      "jwt"
    ],
    "embedding": [
      -0.102461,
      0.041617,
      0.030015,
      -0.004308,
      0.003445,
      -0.01292,
      -0.00616,
      -0.026892,
      0.021591,
      -0.024831,
      -0.030278,
      0.033806,
      0.033881,
      -0.023763,
      0.056672,
      0.01936,
      0.037064,
      0.05931,
      -0.023859,
      -0.030139,
      0.061935,
      -0.010958,
      -0.035704,
      -0.01501,
      0.033441,
      -0.044763,
      0.005656,
      -0.050184,
      -0.008003,
      0.089397,
      0.017551,
      0.010731,
      -0.038134,
      -0.007537,
      -0.072089,
      -0.017685,
      0.036576,
      -0.012549,
      0.041393,
      -0.052339,
      -0.037523,
      0.02877,
      -0.124644,
      -0.034188,
      -0.014478,
      0.042352,
      0.01115,
      -0.070163,
      -0.109608,
      0.016927,
      0.046364,
      -0.026834,
      0.018943,
      -0.036176,
      -0.02213,
      -0.002936,
      -0.009883,
      0.04587,
      0.013269,
      0.048204,
      -0.024538,
      -0.050888,
      0.112702,
      -0.036182,
      0.037992,
      -0.016435,
      0.033095,
      0.010224,
      0.092942,
      0.00653,
      0.022915,
      0.037539,
      -0.03209,
      -0.068095,
      0.002951,
      0.028489,
      0.006601,
      0.057291,
      0.109976,
      -0.002264,
      -0.02344,
      -0.018027,
      0.073316,
      0.012369,
      -0.021503,
      -0.037483,
      -0.087344,
      0.041467,
      0.020179,
      0.061393,
      -0.012866,
      0.028929,
      0.005259,
      -0.04497,
      0.086493,
      -0.008558,
      -0.045394,
      0.012798,
      -0.085072,
      0.036245,
      -0.041713,
      0.003647,
      0.025176,
      0.104091,
      0.115429,
      -0.035305,
      -0.011139,
      0.025429,
      0.042319,
      0.071762,
      0.035807,
      0.026214,
      0.00644,
      -0.006863,
      -0.097138,
      0.009747,
      -0.017039,
      0.029926,
      -0.008897,
      0.000947,
      0.031173,
      -0.031345,
      0.031545,
      -0.032229,
      -0.023476,
      0.07455,
      -0.036044,
      0,
      -0.031498,
      0.071379,
      0.065766,
      -0.015834,
      -0.0351,
      -0.04527,
      -0.049538,
      -0.059964,
      0.010322,
      -0.007173,
      0.041982,
      0.056074,
      0.02901,
      0.009745,
      0.058804,
      -0.043115,
      0.01791,
      -0.054482,
      0.158899,
      -0.038977,
      0.021737,
      -0.008767,
      0.005358,
      -0.009158,
      -0.035371,
      -0.022903,
      -0.02698,
      -0.019965,
      -0.112521,
      0.031147,
      -0.02244,
      -0.03602,
      -0.01033,
      0.038406,
      -0.018189,
      -0.0274,
      0.00043,
      -0.022512,
      -0.03705,
      -0.09335,
      -0.023283,
      -0.008008,
      -0.038836,
      0.049233,
      -0.075388,
      -0.075298,
      0.008132,
      -0.043046,
      0.043912,
      0.075621,
      -0.083618,
      0.0346,
      -0.010384,
      -0.160168,
      0.052298,
      -0.022267,
      0.036158,
      0.016506,
      -0.072559,
      -0.076418,
      -0.016323,
      -0.039625,
      0.024556,
      -0.007454,
      -0.006208,
      0.097636,
      -0.052165,
      -0.067276,
      -0.071117,
      -0.080883,
      -0.005376,
      0.118492,
      0.054277,
      -0.020494,
      -0.080328,
      -0.041094,
      0.120931,
      0.027775,
      -0.050832,
      0.027585,
      0.124343,
      -0.052534,
      -0.044829,
      0.066456,
      0.075389,
      -0.049821,
      -0.020282,
      -0.010418,
      0.013278,
      -0.038879,
      0.118203,
      -0.030329,
      -0.014456,
      0.10222,
      -0.02212,
      0,
      0.017147,
      -0.02177,
      0.025396,
      -0.004078,
      -0.04813,
      0.005546,
      0.007064,
      0.032547,
      -0.010575,
      -0.029672,
      -0.05735,
      -0.038678,
      -0.024378,
      0.00721,
      -0.055634,
      0.049718,
      -0.060085,
      -0.011924,
      -0.003237,
      0.036482,
      0.002334,
      -0.00011,
      -0.025579,
      0.031736,
      -0.035407,
      0.03125,
      -0.051877,
      0.014425,
      -0.054619,
      -0.075132,
      0.101494,
      -0.05577,
      0.025353,
      -0.110582,
      -0.048682,
      -0.140223,
      -0.004494,
      0.135387,
      -0.041538,
      0.032067,
      0.008026,
      -0.002259,
      0.019008,
      0.035531,
      -0.016336,
      0.062901,
      0.019865,
      0.00448,
      -0.030194,
      0.038601,
      -0.015305,
      0.070649,
      0.016906,
      0.087029,
      -0.020968,
      -0.038768,
      0.053009,
      0.035043,
      0.047519,
      -0.025673,
      0.032481,
      -0.04914,
      0.024588,
      0.12883,
      0.006823,
      -0.012892,
      0.011059,
      0.122322,
      0.024028,
      -0.000634,
      0.05311,
      -0.033209,
      -0.012044,
      -0.032166,
      0.125098,
      0.004625,
      -0.014055,
      -0.126144,
      -0.003169,
      -0.034295,
      -0.031362,
      -0.024239,
      -0.044542,
      -0.017456,
      0.049631,
      -0.044652,
      -0.024899,
      0.099901,
      0.026735,
      0.036047,
      0.058036,
      -0.042654,
      -0.046146,
      -0.001846,
      -0.054556,
      0,
      0.003756,
      -0.012131,
      0.026097,
      -0.055934,
      0.010122,
      -0.016085,
      -0.015693,
      -0.008128,
      0.010715,
      0.002228,
      0.023453,
      0.080346,
      -0.065222,
      -0.144456,
      -0.040634,
      0.000015,
      -0.026233,
      -0.028289,
      -0.018534,
      0.000679,
      -0.096637,
      -0.010524,
      -0.002892,
      -0.014684,
      0.049116,
      -0.023466,
      0.051561,
      0.021614,
      0.014719,
      -0.003852,
      -0.133724,
      0.06977,
      0.037313,
      -0.003993,
      -0.162416,
      0.021043,
      0.012141,
      -0.017055,
      -0.024965,
      0.005978,
      -0.002197,
      0.026382,
      -0.085158,
      0.038786,
      -0.011816,
      0.107289,
      0.089911,
      0.010061,
      0.016665,
      -0.038302,
      -0.013819,
      0.019511,
      -0.020987,
      0.064634,
      -0.050952,
      0.075148,
      0.011623,
      0.081922,
      0.127264,
      0.036422,
      0.041202,
      -0.040335,
      -0.006127,
      -0.075243
    ]
  },
  {
    "id": "v6-doc-027",
    "title": "Dockerize a Feathers application",
    "content": "# Dockerize a Feathers application\n\nA Feathers application can be [dockerized like any other Node.js application](https://nodejs.org/en/docs/guides/nodejs-docker-webapp/).\n\n## Create an app\n\n```sh\nmkdir feathers-app\ncd feathers-app/\nfeathers generate app\n```\n\n### Dockerfile\n\nAdd the following `Dockerfile` to the project directory:\n\n```\nFROM node:lts-alpine\n\nWORKDIR /usr/src/app\n\nCOPY package*.json ./\n\nRUN npm install\n\nCOPY . .\n\nEXPOSE 3030\n\nCMD [\"npm\", \"run\", \"start\"]\n```\n\n## Build the image\n\n```sh\ndocker build -t my-feathers-image .\n```\n\n## Start the container\n\n```sh\ndocker run -d -p 3030:3030 --name my-feathers-container my-feathers-image\n```",
    "version": "v6",
    "tokens": [
      "dockerize",
      "feathers",
      "application",
      "dockerized",
      "like",
      "node",
      "js",
      "https",
      "nodejs",
      "org",
      "en",
      "docs",
      "guides",
      "docker",
      "webapp",
      "create",
      "app",
      "sh",
      "mkdir",
      "cd",
      "generate",
      "dockerfile",
      "add",
      "following",
      "project",
      "directory",
      "lts",
      "alpine",
      "workdir",
      "usr",
      "src",
      "copy",
      "package",
      "json",
      "run",
      "npm",
      "install",
      "expose",
      "3030",
      "cmd",
      "start",
      "build",
      "image",
      "container",
      "name"
    ],
    "category": "cookbook",
    "source": {
      "path": "cookbook/deploy/docker.md",
      "url": "https://v6.feathersjs.com/cookbook/deploy/docker"
    },
    "tags": [],
    "embedding": [
      -0.019977,
      0.060653,
      0.072481,
      0.022685,
      0.060961,
      -0.081845,
      0.019671,
      -0.009562,
      -0.002887,
      0.027584,
      -0.049654,
      -0.001164,
      -0.005307,
      0.02447,
      0.006294,
      0.011236,
      -0.026639,
      0.050796,
      0.039804,
      0.046688,
      -0.066114,
      0.03009,
      0.07764,
      0.030417,
      -0.013513,
      0.009247,
      -0.060867,
      -0.018964,
      0.010747,
      -0.014758,
      0.057579,
      -0.009625,
      0.02623,
      -0.065675,
      0.00313,
      0.197095,
      -0.031452,
      -0.072368,
      -0.059515,
      -0.05767,
      0.062292,
      0.000379,
      -0.070336,
      -0.050577,
      -0.011531,
      -0.097911,
      -0.029274,
      -0.049689,
      -0.015386,
      0.095466,
      -0.063432,
      -0.113201,
      -0.045497,
      -0.038646,
      -0.016917,
      0.101421,
      -0.056626,
      0.052547,
      -0.045359,
      0.01446,
      0.014207,
      0.006551,
      0.019425,
      -0.012288,
      0.088177,
      0.043218,
      -0.037093,
      0.00942,
      0.023271,
      -0.039832,
      0.074206,
      -0.010921,
      -0.031638,
      -0.046705,
      -0.100542,
      -0.025574,
      -0.025266,
      0.049116,
      -0.025048,
      0.079853,
      -0.006062,
      -0.066693,
      0.000449,
      0.018992,
      -0.047499,
      0.079801,
      0.027451,
      -0.022322,
      0.014107,
      -0.099143,
      -0.010957,
      -0.065655,
      -0.038124,
      0.008595,
      0.084915,
      -0.021698,
      -0.0402,
      0.11566,
      -0.023867,
      0.011905,
      0.017338,
      -0.053906,
      0.027543,
      -0.075011,
      0.128774,
      -0.009906,
      -0.026126,
      -0.062863,
      -0.065843,
      0.041722,
      -0.032104,
      -0.014986,
      -0.009507,
      0.023532,
      0.021377,
      0.014981,
      -0.029232,
      -0.063866,
      0.029823,
      0.119397,
      0.140282,
      -0.012634,
      0.125537,
      -0.007557,
      0.010379,
      -0.011679,
      -0.068116,
      0,
      0.037448,
      -0.065294,
      0.059555,
      0.066079,
      0.111221,
      -0.046881,
      0.03355,
      -0.036218,
      -0.114043,
      0.028042,
      -0.063288,
      0.067722,
      0.001864,
      0.046159,
      0.027271,
      -0.073695,
      -0.016187,
      -0.034255,
      0.063973,
      -0.038291,
      -0.019822,
      -0.030037,
      -0.10134,
      0.0156,
      0.021254,
      -0.031908,
      0.042086,
      -0.091604,
      -0.01734,
      0.005379,
      0.121284,
      -0.040658,
      0.00931,
      0.009311,
      0.003207,
      -0.024527,
      -0.031977,
      0.046457,
      -0.098545,
      0.061664,
      0.061442,
      -0.0668,
      -0.013082,
      0.033256,
      0.01007,
      -0.045016,
      -0.023214,
      0.010264,
      0.052367,
      0.010587,
      0.043552,
      -0.002679,
      0.009473,
      0.030498,
      0.015562,
      -0.030539,
      0.012556,
      -0.105201,
      -0.095646,
      -0.046717,
      -0.060994,
      -0.006645,
      0.015021,
      -0.023262,
      0.051771,
      0.011776,
      -0.017561,
      0.025145,
      -0.075415,
      0.088403,
      0.035524,
      -0.00187,
      0.011362,
      -0.000691,
      -0.012863,
      0.012377,
      0.018413,
      0.056889,
      -0.025857,
      -0.040362,
      0.014689,
      0.023499,
      -0.033713,
      0.01371,
      -0.005597,
      -0.027384,
      0.021382,
      0.055205,
      -0.006465,
      0.009252,
      0.083212,
      0.051407,
      -0.04321,
      -0.106494,
      -0.114152,
      0,
      0.032436,
      -0.006606,
      -0.076544,
      0.048947,
      0.016682,
      -0.02209,
      0.082677,
      0.014785,
      0.057189,
      0.020852,
      -0.12588,
      0.069862,
      0.065771,
      0.076595,
      -0.094533,
      0.077889,
      -0.078725,
      -0.019254,
      0.05837,
      -0.064706,
      -0.027866,
      0.010393,
      0.084018,
      0.044528,
      -0.083354,
      -0.003472,
      0.078323,
      -0.079423,
      -0.031577,
      -0.048918,
      -0.058261,
      -0.011265,
      0.009934,
      0.039679,
      -0.022833,
      0.014487,
      -0.017745,
      0.035829,
      -0.045677,
      -0.095783,
      -0.007502,
      -0.081885,
      -0.024407,
      -0.088129,
      -0.013481,
      -0.093742,
      -0.018424,
      0.005918,
      -0.037838,
      -0.032786,
      -0.007415,
      -0.033549,
      0.06338,
      0.065266,
      0.033393,
      0.007123,
      0.021562,
      0.033653,
      0.00888,
      0.07332,
      0.100275,
      -0.068946,
      0.008578,
      -0.03598,
      -0.024007,
      -0.074778,
      -0.126504,
      -0.043112,
      -0.039643,
      0.010317,
      -0.019613,
      0.033007,
      0.031699,
      0.048871,
      -0.025739,
      0.023081,
      0.039909,
      -0.040542,
      0.070008,
      -0.062208,
      -0.033346,
      0.099989,
      0.003689,
      -0.035375,
      -0.013409,
      -0.022997,
      0.05303,
      0.003872,
      0.010347,
      -0.06629,
      0.033585,
      -0.0026,
      -0.021474,
      -0.015365,
      0.02299,
      0,
      0.028657,
      0.042142,
      -0.087377,
      0.020262,
      0.043189,
      0.043972,
      0.042047,
      -0.009524,
      0.006943,
      0.019104,
      -0.072116,
      0.010668,
      -0.052121,
      0.027305,
      0.006601,
      0.014487,
      0.02264,
      0.072316,
      -0.027067,
      -0.081392,
      -0.042786,
      0.064136,
      -0.001928,
      0.004535,
      0.023183,
      0.001045,
      0.046333,
      0.020351,
      0.029759,
      -0.021711,
      -0.076586,
      -0.009189,
      -0.003792,
      -0.029005,
      -0.034781,
      -0.024502,
      -0.048597,
      -0.000042,
      0.04366,
      -0.018176,
      -0.065566,
      -0.013852,
      0.014382,
      -0.054447,
      -0.0282,
      -0.037785,
      -0.004627,
      0.009082,
      -0.051081,
      0.120524,
      0.121372,
      -0.019204,
      0.025525,
      -0.010667,
      0.057755,
      0.087071,
      0.007772,
      0.001156,
      0.001484,
      -0.012869,
      0.048445,
      0.009217,
      0.041422,
      0.006775
    ]
  },
  {
    "id": "v6-doc-028",
    "title": "File uploads in FeathersJS",
    "content": "# File uploads in FeathersJS\n\nOver the last months we at [ciancoders.com](https://ciancoders.com/) have been working in a new SPA project using Feathers and React, the combination of those two turns out to be **just amazing**.\n\nRecently we were struggling to find a way to upload files without having to write a separate Express middleware or having to (re)write a complex Feathers service.\n\n## Our Goals\n\nWe want to implement an upload service to accomplish a few important things:\n\n1. It has to handle large files (+10MB).\n2. It needs to work with the app's authentication and authorization.\n3. The files need to be validated.\n4. At the moment there is no third party storage service involved, but this will change in the near future, so it has to be prepared.\n5. It has to show the upload progress.\n\nThe plan is to upload the files to a feathers service so we can take advantage of hooks for authentication, authorization and validation, and for service events.\n\nFortunately, there exists a file storage service: [feathers-blob](https://github.com/feathersjs/feathers-blob). With it we can meet our goals, but (spoiler alert) it isn't an ideal solution.  We discuss some of its problems below.\n\n## Basic upload with feathers-blob and feathers-client\n\nFor the sake of simplicity, we will be working over a very basic feathers server, with just the upload service.\n\nLets look at the server code:\n\n```javascript\n/* --- server.js --- */\n\nconst feathers = require('@feathersjs/feathers');\nconst express = require('@feathersjs/express');\nconst socketio = require('@feathersjs/socketio');\n\n// feathers-blob service\nconst blobService = require('feathers-blob');\n// Here we initialize a FileSystem storage,\n// but you can use feathers-blob with any other\n// storage service like AWS or Google Drive.\nconst fs = require('fs-blob-store');\nconst blobStorage = fs(__dirname + '/uploads');\n\n// Feathers app\nconst app = express(feathers());\n\n// Parse HTTP JSON bodies\napp.use(express.json());\n// Parse URL-encoded params\napp.use(express.urlencoded({ extended: true }));\n// Add REST API support\napp.configure(express.rest());\n// Configure Socket.io real-time APIs\napp.configure(socketio());\n\n// Upload Service\napp.use('/uploads', blobService({Model: blobStorage}));\n\n// Register a nicer error handler than the default Express one\napp.use(express.errorHandler());\n\n// Start the server\napp.listen(3030, function(){\n    console.log('Feathers app started at localhost:3030')\n});\n```\n\nLet's look at this implemented in the `@feathersjs/cli` generated server code:\n\n```javascript\n/* --- /src/services/uploads/uploads.service.js --- */\n\n// Initializes the `uploads` service on path `/uploads'\n\nconst createModel = require('../../models/uploads.model');\nconst hooks = require('./uploads.hooks');\nconst filters = require('./uploads.filters');\n\n// feathers-blob service\nconst blobService = require('feathers-blob');\n// Here we initialize a FileSystem storage,\n// but you can use feathers-blob with any other\n// storage service like AWS or Google Drive.\nconst fs = require('fs-blob-store');\n\n// File storage location. Folder must be created before upload.\n// Example: './uploads' will be located under feathers app top level.\nconst blobStorage = fs('./uploads');\n\nmodule.exports = function() {\n  const app = this;\n  const Model = createModel(app);\n  const paginate = app.get('paginate');\n\n  // Initialize our service with any options it requires\n  app.use('/uploads', blobService({ Model: blobStorage}));\n\n  // Get our initialized service so that we can register hooks and filters\n  const service = app.service('uploads');\n\n  service.hooks(hooks);\n\n  if (service.filter) {\n    service.filter(filters);\n  }\n};\n```\n\n`feathers-blob` works over abstract-blob-store, which is an abstract interface to various storage backends, such as filesystem, AWS, or Google Drive. It only accepts and retrieves files encoded as dataURI strings.\n\nJust like that we have our backend ready, go ahead and POST something to localhost:3030/uploads\n\n[... content truncated for knowledge base ...]",
    "version": "v6",
    "tokens": [
      "file",
      "uploads",
      "feathersjs",
      "last",
      "months",
      "ciancoders",
      "com",
      "https",
      "working",
      "new",
      "spa",
      "project",
      "using",
      "feathers",
      "react",
      "combination",
      "two",
      "turns",
      "amazing",
      "recently",
      "struggling",
      "find",
      "way",
      "upload",
      "files",
      "without",
      "having",
      "write",
      "separate",
      "express",
      "middleware",
      "re",
      "complex",
      "service",
      "goals",
      "want",
      "implement",
      "accomplish",
      "important",
      "things",
      "handle",
      "large",
      "10mb",
      "needs",
      "work",
      "app",
      "authentication",
      "authorization",
      "need",
      "validated",
      "moment",
      "third",
      "party",
      "storage",
      "involved",
      "change",
      "near",
      "future",
      "prepared",
      "show",
      "progress",
      "plan",
      "take",
      "advantage",
      "hooks",
      "validation",
      "events",
      "fortunately",
      "exists",
      "blob",
      "github",
      "meet",
      "spoiler",
      "alert",
      "isn",
      "ideal",
      "solution",
      "discuss",
      "problems",
      "basic",
      "client",
      "sake",
      "simplicity",
      "server",
      "lets",
      "look",
      "code",
      "javascript",
      "js",
      "const",
      "require",
      "socketio",
      "blobservice",
      "initialize",
      "filesystem",
      "use",
      "like",
      "aws",
      "google",
      "drive",
      "fs",
      "store",
      "blobstorage",
      "dirname",
      "parse",
      "http",
      "json",
      "bodies",
      "url",
      "encoded",
      "params",
      "urlencoded",
      "extended",
      "true",
      "add",
      "rest",
      "api",
      "support",
      "configure",
      "socket",
      "io",
      "real",
      "time",
      "apis",
      "model",
      "register",
      "nicer",
      "error",
      "handler",
      "default",
      "one",
      "errorhandler",
      "start",
      "listen",
      "3030",
      "function",
      "console",
      "log",
      "started",
      "localhost",
      "let",
      "implemented",
      "cli",
      "generated",
      "src",
      "services",
      "initializes",
      "path",
      "createmodel",
      "models",
      "filters",
      "location",
      "folder",
      "created",
      "example",
      "located",
      "top",
      "level",
      "module",
      "exports",
      "paginate",
      "get",
      "options",
      "requires",
      "initialized",
      "if",
      "filter",
      "works",
      "abstract",
      "interface",
      "various",
      "backends",
      "accepts",
      "retrieves",
      "datauri",
      "strings",
      "backend",
      "ready",
      "go",
      "ahead",
      "post",
      "something",
      "content",
      "truncated",
      "knowledge",
      "base"
    ],
    "category": "cookbook",
    "source": {
      "path": "cookbook/express/file-uploading.md",
      "url": "https://v6.feathersjs.com/cookbook/express/file-uploading"
    },
    "tags": [
      "express"
    ],
    "embedding": [
      -0.11734,
      0.015116,
      0.01581,
      0.009081,
      0.051053,
      -0.064923,
      0.0022,
      -0.007502,
      0.001955,
      0.071174,
      -0.040332,
      0.102556,
      -0.031098,
      0.062499,
      -0.032629,
      0.001539,
      -0.014544,
      -0.029148,
      -0.041114,
      0.024424,
      -0.027234,
      -0.064321,
      0.077915,
      0.047898,
      -0.00717,
      -0.051326,
      -0.043926,
      -0.035028,
      -0.037714,
      0.000255,
      0.09001,
      -0.065233,
      -0.067711,
      -0.027231,
      -0.033931,
      0.094305,
      0.021832,
      -0.084502,
      -0.039257,
      -0.074654,
      0.030919,
      0.016698,
      -0.074743,
      0.025356,
      -0.03143,
      -0.052302,
      0.059765,
      -0.018983,
      -0.018133,
      0.049534,
      -0.03881,
      -0.08248,
      -0.076113,
      0.057494,
      -0.027503,
      -0.018044,
      -0.059046,
      -0.033398,
      -0.079617,
      -0.006661,
      0.010257,
      -0.061199,
      0.015342,
      -0.004362,
      0.034261,
      0.100545,
      0.005868,
      0.03035,
      0.022799,
      -0.074611,
      0.022415,
      0.028342,
      -0.083127,
      0.01491,
      -0.038482,
      -0.02757,
      0.0213,
      0.057534,
      0.054849,
      -0.050725,
      0.026215,
      -0.064584,
      0.089065,
      0.049878,
      -0.022235,
      -0.016925,
      -0.01699,
      0.013846,
      -0.038479,
      -0.078612,
      0.040244,
      0.065636,
      0.054409,
      0.030907,
      0.057811,
      0.015217,
      -0.034491,
      0.085976,
      -0.03484,
      0.000546,
      -0.031552,
      0.026256,
      0.02686,
      -0.075098,
      0.101827,
      -0.017972,
      0.042228,
      -0.029518,
      -0.015584,
      0.030932,
      -0.035551,
      -0.051933,
      -0.032221,
      -0.004401,
      0.018709,
      0.072699,
      -0.061892,
      0.029701,
      -0.017423,
      0.03739,
      0.13653,
      -0.029311,
      0.008051,
      -0.029139,
      0.065686,
      0.00923,
      0.001902,
      0,
      -0.006706,
      0.028216,
      0.046644,
      0.114752,
      0.006749,
      -0.082935,
      0.016578,
      -0.018541,
      -0.133076,
      0.060699,
      -0.04473,
      0.104841,
      0.002558,
      0.005364,
      0.050109,
      -0.085072,
      0.024039,
      0.009843,
      0.134095,
      -0.007026,
      -0.044785,
      -0.037291,
      -0.062627,
      0.005063,
      0.042114,
      -0.025433,
      0.020216,
      -0.029435,
      0.011774,
      -0.014479,
      0.094698,
      -0.108492,
      0.043369,
      0.046541,
      -0.042419,
      -0.038906,
      -0.077622,
      -0.069905,
      -0.039755,
      0.036922,
      0.105508,
      -0.053493,
      -0.084203,
      0.094385,
      -0.087968,
      -0.019977,
      -0.061965,
      -0.006443,
      0.044617,
      0.042881,
      0.074247,
      0.029641,
      -0.007654,
      -0.002959,
      0.040816,
      0.01171,
      -0.002756,
      -0.067186,
      -0.00513,
      -0.076731,
      0.016371,
      -0.099083,
      -0.022281,
      -0.014616,
      0.002014,
      -0.074963,
      -0.005909,
      0.021156,
      0.00444,
      0.038565,
      -0.001447,
      0.035109,
      -0.009106,
      -0.049397,
      0.000633,
      -0.043237,
      -0.010341,
      0.037855,
      0.002555,
      -0.040123,
      -0.016126,
      -0.049196,
      -0.01592,
      0.080599,
      0.021246,
      -0.026682,
      -0.017226,
      0.015906,
      -0.025842,
      -0.025907,
      0.0309,
      0.07832,
      0.084407,
      -0.081891,
      -0.021787,
      0,
      0.018403,
      -0.079928,
      -0.09149,
      0.053097,
      0.044153,
      0.073082,
      0.097323,
      0.023155,
      0.048474,
      0.021109,
      -0.094716,
      0.026184,
      -0.018773,
      -0.047538,
      -0.100366,
      0.032155,
      -0.056759,
      -0.043842,
      0.06393,
      -0.067011,
      -0.03341,
      0.033828,
      0.093291,
      0.066035,
      -0.037534,
      0.073176,
      -0.023419,
      -0.004655,
      -0.029289,
      -0.015149,
      -0.027108,
      -0.055961,
      0.009013,
      -0.088161,
      -0.035933,
      -0.046573,
      0.049491,
      0.143207,
      -0.028661,
      0.043861,
      -0.002704,
      -0.031702,
      -0.065701,
      -0.055165,
      0.025001,
      -0.088593,
      -0.066672,
      0.039027,
      -0.052432,
      0.039011,
      -0.005393,
      -0.05823,
      0.051551,
      0.012195,
      0.046223,
      0.048008,
      0.056124,
      -0.055042,
      -0.018008,
      0.071123,
      0.055532,
      -0.064032,
      0.029271,
      0.02233,
      -0.019209,
      0.028645,
      -0.019289,
      -0.037471,
      -0.024482,
      0.051654,
      -0.03685,
      -0.026042,
      0.011092,
      -0.000052,
      0.083141,
      -0.013282,
      0.071142,
      -0.074872,
      0.10159,
      -0.002854,
      -0.010063,
      0.094068,
      0.015077,
      0.046984,
      0.037001,
      -0.062131,
      0.013422,
      -0.001625,
      0.03416,
      -0.011328,
      -0.042447,
      0.074587,
      0.022412,
      -0.048405,
      0.051425,
      0,
      -0.038017,
      0.079457,
      -0.05427,
      0.00839,
      0.000338,
      0.063728,
      -0.028026,
      -0.011858,
      0.07282,
      -0.018338,
      0.018044,
      -0.06746,
      -0.043959,
      -0.019336,
      -0.025393,
      -0.007114,
      0.077842,
      -0.014931,
      -0.09642,
      -0.063168,
      -0.014181,
      0.124368,
      -0.002486,
      -0.00483,
      0.043091,
      0.043834,
      0.0401,
      0.023889,
      0.000892,
      -0.006705,
      -0.125894,
      -0.037794,
      0.024077,
      -0.022878,
      -0.07841,
      0.011229,
      -0.030953,
      -0.00153,
      0.013925,
      0.006775,
      0.074539,
      0.011311,
      0.044936,
      -0.036519,
      0.062076,
      -0.047242,
      0.017009,
      0.008192,
      -0.049347,
      0.077087,
      0.041168,
      -0.033387,
      0.004684,
      0.115743,
      0.035841,
      -0.021033,
      0.034008,
      0.054647,
      0.07913,
      0.035036,
      0.074359,
      -0.001462,
      0.033479,
      0.023099
    ]
  },
  {
    "id": "v6-doc-029",
    "title": "Server Side Rendering",
    "content": "# Server Side Rendering\n\nSince Feathers is just an extension of Express it's really simple to render templated views on the server with data from your Feathers services. There are a few different ways that you can structure your app so this guide will show you 3 typical ways you might have your Feathers app organized.\n\n## Rendering views from services\n\nYou probably already know that when you register a Feathers service, Feathers creates RESTful endpoints for that service automatically. Well, really those are just Express routes, so you can define your own as well.\n\n> **ProTip:** Your own defined REST endpoints won't work with hooks and won't emit socket events. If you find you need that functionality it's probably better for you to turn your endpoints into a minimal Feathers service.\n\nLet's say you want to render a list of messages from most recent to oldest using the [Pug](https://pugjs.org/) template engine.\n\n```js\n// You've set up your main Feathers app already\n\n// Register your view engine\napp.set('view engine', 'pug');\n\n// Register your message service\napp.use('/api/messages', memory());\n\n// Inside your main Feathers app\napp.get('/messages', function(req, res, next){\n  // You namespace your feathers service routes so that\n  // don't get route conflicts and have nice URLs.\n  app.service('api/messages')\n    .find({ query: {$sort: { updatedAt: -1 } } })\n    .then(result => res.render('message-list', result.data))\n    .catch(next);\n});\n```\n\nSimple right? We've now rendered a list of messages using the `/views/message-list.pug` view template. All your hooks will get triggered just like they would normally so you can use hooks to pre-filter your data and keep your template rendering routes super tight. See [Using Template Engines with Express](https://expressjs.com/en/guide/using-template-engines.html) for more information.\n\n> **ProTip:** If you call a Feathers service \"internally\" (ie. not over sockets or REST) you won't have a `context.params.provider` attribute. This allows you to have hooks only execute when services are called externally vs. from your own code.\n\n## Using authentication\n\nFeathers is by default stateless and does not use any sessions. You already can protect Express endpoints with the [express.authenticate](../../api/express#express-authenticate) middleware, however this will only work when passing the `Authorization` header (usually with a JWT) which a normal browser request does not support.\n\nIn order to render authenticated pages, [express-session](https://www.npmjs.com/package/express-session) can be used to add the authentication information to the (browser) session:\n\n> npm i express-session --save\n\nNow you can add the following to `src/middleware/index.js|ts`:\n\n```js\nconst session = require('express-session');\nconst { authenticate } = require('@feathersjs/express');\n\n// This sets `req.authentication` from the information added to the session\nconst setSessionAuthentication = (req, res, next) => {\n  req.authentication = req.session.authentication;\n  next();\n};\n\nmodule.exports = function (app) {\n  // Initialize Express-session - might have to be configured\n  // with a persisten storage adapter (like Redis)\n  app.use(session({\n    secret: 'session-secret',\n    saveUninitialized: false,\n    resave: true\n  }));\n\n  // An endpoint that you can POST to with `email` and `password` that\n  // will then perform a local user authentication\n  // e.g   \n  app.post('/login', async (req, res, next) => {\n    try {\n      const { email, password } = req.body;\n      // Run normal local authentication through our service\n      const { accessToken } = await app.service('authentication').create({\n        strategy: 'local',\n        email,\n        password\n      });\n\n      // Register the JWT authentication information on the session\n      req.session.authentication = {\n        strategy: 'jwt',\n        accessToken\n      };\n\n      // Redirect to an authenticated page\n      res.redirect('/hello');\n    } catch (error) {\n      next(\n\n[... content truncated for knowledge base ...]",
    "version": "v6",
    "tokens": [
      "server",
      "side",
      "rendering",
      "since",
      "feathers",
      "extension",
      "express",
      "really",
      "simple",
      "render",
      "templated",
      "views",
      "data",
      "services",
      "different",
      "ways",
      "structure",
      "app",
      "guide",
      "show",
      "typical",
      "organized",
      "probably",
      "already",
      "know",
      "register",
      "service",
      "creates",
      "restful",
      "endpoints",
      "automatically",
      "well",
      "routes",
      "define",
      "protip",
      "defined",
      "rest",
      "won",
      "work",
      "hooks",
      "emit",
      "socket",
      "events",
      "if",
      "find",
      "need",
      "functionality",
      "better",
      "turn",
      "into",
      "minimal",
      "let",
      "say",
      "want",
      "list",
      "messages",
      "recent",
      "oldest",
      "using",
      "pug",
      "https",
      "pugjs",
      "org",
      "template",
      "engine",
      "js",
      "ve",
      "set",
      "main",
      "view",
      "message",
      "use",
      "api",
      "memory",
      "inside",
      "get",
      "function",
      "req",
      "res",
      "next",
      "namespace",
      "don",
      "route",
      "conflicts",
      "nice",
      "urls",
      "query",
      "sort",
      "updatedat",
      "result",
      "catch",
      "right",
      "now",
      "rendered",
      "triggered",
      "like",
      "normally",
      "pre",
      "filter",
      "keep",
      "super",
      "tight",
      "see",
      "engines",
      "expressjs",
      "com",
      "en",
      "html",
      "information",
      "call",
      "internally",
      "ie",
      "sockets",
      "context",
      "params",
      "provider",
      "attribute",
      "allows",
      "execute",
      "called",
      "externally",
      "vs",
      "code",
      "authentication",
      "default",
      "stateless",
      "sessions",
      "protect",
      "authenticate",
      "middleware",
      "however",
      "passing",
      "authorization",
      "header",
      "usually",
      "jwt",
      "normal",
      "browser",
      "request",
      "support",
      "order",
      "authenticated",
      "pages",
      "session",
      "www",
      "npmjs",
      "package",
      "used",
      "add",
      "npm",
      "save",
      "following",
      "src",
      "index",
      "ts",
      "const",
      "require",
      "feathersjs",
      "sets",
      "added",
      "setsessionauthentication",
      "module",
      "exports",
      "initialize",
      "configured",
      "persisten",
      "storage",
      "adapter",
      "redis",
      "secret",
      "saveuninitialized",
      "false",
      "resave",
      "true",
      "endpoint",
      "post",
      "email",
      "password",
      "perform",
      "local",
      "user",
      "login",
      "async",
      "try",
      "body",
      "run",
      "accesstoken",
      "await",
      "create",
      "strategy",
      "redirect",
      "page",
      "hello",
      "error",
      "content",
      "truncated",
      "knowledge",
      "base"
    ],
    "category": "cookbook",
    "source": {
      "path": "cookbook/express/view-engine.md",
      "url": "https://v6.feathersjs.com/cookbook/express/view-engine"
    },
    "tags": [
      "express"
    ],
    "embedding": [
      -0.052071,
      0.011671,
      0.034156,
      0.050394,
      -0.026278,
      0.005381,
      0.003,
      -0.070014,
      0.029208,
      -0.032665,
      -0.068845,
      0.020136,
      -0.091533,
      0.03409,
      0.011852,
      0.001749,
      0.046382,
      -0.070016,
      0.059195,
      0.012593,
      -0.006694,
      -0.0366,
      0.008186,
      0.054048,
      -0.023437,
      -0.017083,
      0.025306,
      0.0311,
      0.029991,
      -0.015962,
      0.086171,
      -0.065184,
      -0.086209,
      0.000842,
      -0.068103,
      0.088706,
      0.021605,
      -0.055945,
      -0.041292,
      -0.050388,
      0.050151,
      -0.024045,
      -0.110221,
      -0.028969,
      0.047684,
      -0.054789,
      0.030885,
      -0.043058,
      -0.036762,
      0.052085,
      0.004726,
      -0.06121,
      -0.067993,
      0.010398,
      0.024779,
      0.012109,
      -0.081,
      -0.06626,
      -0.055749,
      -0.059237,
      0.021644,
      -0.042826,
      0.070912,
      0.018131,
      0.00826,
      -0.034571,
      0.011043,
      0.049336,
      0.046812,
      -0.060216,
      -0.035124,
      -0.045214,
      -0.057449,
      -0.08732,
      -0.060136,
      0.091423,
      -0.028335,
      -0.063058,
      -0.021763,
      -0.02945,
      0.028021,
      -0.020231,
      0.015168,
      0.114497,
      0.000799,
      0.032302,
      -0.035459,
      0.003806,
      -0.048654,
      -0.072687,
      0.066068,
      0.015646,
      0.021866,
      0.043719,
      0.059854,
      0.029334,
      -0.048502,
      0.026206,
      -0.007259,
      0.018693,
      -0.00702,
      0.0049,
      0.038023,
      -0.026338,
      0.112753,
      -0.028457,
      -0.064308,
      -0.011348,
      -0.080992,
      -0.024611,
      -0.094034,
      0.030418,
      0.00152,
      -0.0076,
      0.030402,
      -0.000875,
      0.031657,
      -0.03675,
      0.024637,
      0.069873,
      0.126887,
      -0.006077,
      0.032394,
      0.041515,
      0.068868,
      0.027987,
      -0.042584,
      0,
      0.06265,
      0.023211,
      0.004461,
      0.030565,
      0.031572,
      -0.039084,
      -0.027073,
      -0.016964,
      -0.043738,
      0.09113,
      -0.001362,
      0.092372,
      0.070841,
      -0.002938,
      0.051017,
      -0.064157,
      0.04437,
      0.025735,
      0.097268,
      -0.061024,
      -0.118935,
      -0.025742,
      -0.055056,
      -0.041816,
      0.018857,
      0.085885,
      -0.029395,
      0.041829,
      -0.128589,
      -0.017867,
      0.139588,
      -0.059724,
      0.014855,
      0.031545,
      -0.02498,
      -0.018697,
      -0.006271,
      -0.079455,
      -0.074548,
      0.073441,
      0.061157,
      -0.050402,
      -0.06437,
      0.018664,
      -0.07786,
      0.014263,
      -0.075801,
      0.051947,
      0.052475,
      -0.021225,
      0.038604,
      0.02917,
      0.033932,
      0.00723,
      0.072209,
      -0.018158,
      0.010838,
      -0.055981,
      0.015652,
      -0.027576,
      -0.072266,
      -0.094929,
      -0.03598,
      -0.057506,
      0.023035,
      -0.029368,
      -0.012549,
      0.01847,
      -0.065802,
      0.047443,
      0.035066,
      0.062206,
      0.030114,
      -0.043617,
      0.02043,
      0.028148,
      -0.020464,
      0.073369,
      0.062552,
      -0.037706,
      -0.012721,
      0.017154,
      -0.035043,
      0.019109,
      0.078373,
      -0.023585,
      0.046333,
      -0.010969,
      -0.022897,
      0.028011,
      -0.04146,
      0.052594,
      0.100333,
      -0.10778,
      -0.066335,
      0,
      -0.014048,
      -0.010688,
      -0.135765,
      0.049196,
      0.020603,
      -0.007249,
      0.067331,
      0.041305,
      0.01893,
      0.050907,
      -0.058657,
      -0.011325,
      0.043599,
      0.054765,
      -0.065712,
      0.106871,
      -0.036994,
      -0.091407,
      0.06252,
      -0.077048,
      -0.090827,
      0.0579,
      0.044996,
      -0.02903,
      -0.07592,
      0.103116,
      0.063194,
      -0.089059,
      -0.041161,
      -0.042606,
      -0.024551,
      -0.082439,
      0.073732,
      -0.000918,
      -0.053063,
      0.012194,
      0.059738,
      0.06206,
      0.003109,
      -0.003066,
      0.041536,
      -0.064655,
      -0.069374,
      -0.041583,
      -0.051714,
      -0.001782,
      -0.070627,
      0.033407,
      -0.040677,
      0.000371,
      -0.022992,
      -0.009608,
      0.004619,
      0.064452,
      -0.036662,
      0.024368,
      0.041727,
      -0.050427,
      0.018657,
      0.035321,
      0.027324,
      -0.092948,
      0.022887,
      0.003987,
      0.034843,
      -0.046723,
      -0.085291,
      -0.106987,
      -0.018105,
      -0.043352,
      -0.032899,
      -0.016682,
      -0.037685,
      0.008881,
      0.055837,
      0.012087,
      0.059141,
      -0.069916,
      0.116688,
      0.033602,
      -0.081652,
      0.030234,
      0.010814,
      0.01348,
      0.033922,
      -0.106045,
      -0.035797,
      0.018382,
      0.026018,
      -0.069269,
      -0.030987,
      0.047691,
      0.004344,
      0.020162,
      0.074727,
      0,
      -0.028297,
      0.002581,
      -0.029061,
      0.007251,
      -0.022391,
      0.042176,
      0.020059,
      -0.028096,
      0.022576,
      0.042953,
      -0.025375,
      -0.016534,
      0.026258,
      0.000944,
      0.075575,
      0.043107,
      0.030214,
      -0.012431,
      -0.066069,
      -0.071895,
      -0.026475,
      0.156082,
      -0.017931,
      -0.03453,
      0.035447,
      0.026147,
      0.072065,
      0.031554,
      0.011755,
      0.017253,
      -0.079307,
      0.011909,
      0.06128,
      0.014536,
      -0.029484,
      -0.036605,
      -0.023979,
      -0.014504,
      0.03772,
      0.128268,
      0.019206,
      -0.04354,
      -0.035818,
      -0.011725,
      0.069682,
      0.033808,
      0.050791,
      -0.017997,
      -0.009467,
      0.112177,
      0.022786,
      -0.029421,
      0.041093,
      -0.008613,
      0.028707,
      0.002067,
      0.062997,
      0.001891,
      0.089384,
      0.02777,
      0.038675,
      0.037972,
      0.026656,
      -0.02599
    ]
  },
  {
    "id": "v6-doc-030",
    "title": "Client/server testing",
    "content": "# Client/server testing\n\nYou can write tests which start up both a server for your app, and a Feathers client which your test can use to call the server. Such tests can expose faults in the interaction between the client and the server. They are also useful in testing the authentication of requests from the client. Install it as a development dependency:\n\n```\nnpm install @feathersjs/client --save-dev\n```\n\nTest `test/services/users.test.js` from above runs on the server. We convert it, in the following `tests/services/client-users.test.js`, so the tests are run on the client instead of on the server. This also causes client authentication to be tested.\n\n```js\nconst assert = require('assert');\nconst feathersClient = require('@feathersjs/client');\nconst io = require('socket.io-client');\nconst app = require('../../src/app');\n\nconst host = app.get('host');\nconst port = app.get('port');\nconst email = 'login@example.com';\nconst password = 'login';\n\ndescribe('\\'users\\' service - client', function () {\n  this.timeout(10000);\n  let server;\n  let client;\n\n  before(async () => {\n    await app.service('users').create({ email, password });\n\n    server = app.listen(port);\n    server.on('listening', async () => {\n      // eslint-disable-next-line no-console\n      console.log('Feathers application started on http://%s:%d', host, port);\n    });\n\n    client = await makeClient(host, port, email, password);\n  });\n\n  after(() => {\n    client.logout();\n    server.close();\n  });\n\n  describe('Run tests using client and server', () => {\n    it('registered the service', () => {\n      const service = client.service('users');\n\n      assert.ok(service, 'Registered the service');\n    });\n\n    it('creates a user, encrypts password and adds gravatar', async () => {\n      const user = await client.service('users').create({\n        email: 'testclient@example.com',\n        password: 'secret'\n      });\n\n      // Verify Gravatar has been set to what we'd expect\n      assert.equal(user.avatar, 'https://s.gravatar.com/avatar/1b9c869fa7a93e59463c31a377fe0cf6?s=60');\n      // Makes sure the password got encrypted\n      assert.ok(user.password !== 'secret');\n    });\n\n    it('removes password for external requests', async () => {\n      // Setting `provider` indicates an external request\n      const params = { provider: 'rest' };\n\n      const user = await client.service('users').create({\n        email: 'testclient2@example.com',\n        password: 'secret'\n      }, params);\n\n      // Make sure password has been removed\n      assert.ok(!user.password);\n    });\n  });\n});\n\nasync function makeClient(host, port, email, password) {\n  const client = feathersClient();\n  const socket = io(`http://${host}:${port}`, {\n    transports: ['websocket'], forceNew: true, reconnection: false, extraHeaders: {}\n  });\n  client.configure(feathersClient.socketio(socket));\n  client.configure(feathersClient.authentication({\n    storage: localStorage()\n  }));\n\n  await client.authenticate({\n    strategy: 'local',\n    email,\n    password,\n  });\n\n  return client;\n}\n\nfunction localStorage () {\n  const store = {};\n\n  return {\n    setItem (key, value) {\n      store[key] = value;\n    },\n    getItem (key) {\n      return store[key];\n    },\n    removeItem (key) {\n      delete store[key];\n    }\n  };\n}\n```\n\nWe first make a call on the *server* to create a new user. We then start up a server for our app. Finally the function `makeClient` is called to create a Feathers client and authenticate it using the newly created user.\n\nThe individual tests remain unchanged except that the service calls are now made on the client (`client.service(...).create`) instead of on the server (`app.service(...).create`).\n\nThe `describe('Run tests using client and server',` statement stops a new server and client from being created for each test. This results in the test module running noticeably faster, though the tests are now exposed to potential interactions. You can remove the statement to isolate the tests from one another.",
    "version": "v6",
    "tokens": [
      "client",
      "server",
      "testing",
      "write",
      "tests",
      "start",
      "app",
      "feathers",
      "test",
      "use",
      "call",
      "expose",
      "faults",
      "interaction",
      "also",
      "useful",
      "authentication",
      "requests",
      "install",
      "development",
      "dependency",
      "npm",
      "feathersjs",
      "save",
      "dev",
      "services",
      "users",
      "js",
      "runs",
      "convert",
      "following",
      "run",
      "instead",
      "causes",
      "tested",
      "const",
      "assert",
      "require",
      "feathersclient",
      "io",
      "socket",
      "src",
      "host",
      "get",
      "port",
      "email",
      "login",
      "example",
      "com",
      "password",
      "describe",
      "service",
      "function",
      "timeout",
      "10000",
      "let",
      "async",
      "await",
      "create",
      "listen",
      "listening",
      "eslint",
      "disable",
      "next",
      "line",
      "console",
      "log",
      "application",
      "started",
      "http",
      "makeclient",
      "logout",
      "close",
      "using",
      "registered",
      "ok",
      "creates",
      "user",
      "encrypts",
      "adds",
      "gravatar",
      "testclient",
      "secret",
      "verify",
      "set",
      "expect",
      "equal",
      "avatar",
      "https",
      "1b9c869fa7a93e59463c31a377fe0cf6",
      "60",
      "makes",
      "sure",
      "got",
      "encrypted",
      "removes",
      "external",
      "setting",
      "provider",
      "indicates",
      "request",
      "params",
      "rest",
      "testclient2",
      "make",
      "removed",
      "transports",
      "websocket",
      "forcenew",
      "true",
      "reconnection",
      "false",
      "extraheaders",
      "configure",
      "socketio",
      "storage",
      "localstorage",
      "authenticate",
      "strategy",
      "local",
      "return",
      "store",
      "setitem",
      "key",
      "value",
      "getitem",
      "removeitem",
      "delete",
      "first",
      "new",
      "finally",
      "called",
      "newly",
      "created",
      "individual",
      "remain",
      "unchanged",
      "except",
      "calls",
      "now",
      "made",
      "statement",
      "stops",
      "results",
      "module",
      "running",
      "noticeably",
      "faster",
      "though",
      "exposed",
      "potential",
      "interactions",
      "remove",
      "isolate",
      "one",
      "another"
    ],
    "category": "cookbook",
    "source": {
      "path": "cookbook/general/client-test.md",
      "url": "https://v6.feathersjs.com/cookbook/general/client-test"
    },
    "tags": [
      "client",
      "testing"
    ],
    "embedding": [
      -0.089659,
      0.004045,
      0.01659,
      0.044883,
      0.007922,
      -0.109464,
      0.016852,
      -0.025474,
      0.021747,
      0.002868,
      -0.015929,
      0.077152,
      -0.055395,
      0.061697,
      0.056373,
      -0.019336,
      0.039337,
      -0.020825,
      0.097198,
      0.006584,
      -0.082601,
      -0.073854,
      0.051266,
      0.024417,
      -0.059776,
      -0.095895,
      0.02583,
      0.00643,
      -0.001316,
      0.027294,
      0.085098,
      -0.0323,
      -0.091664,
      -0.026269,
      -0.126966,
      0.088373,
      0.01648,
      -0.045199,
      -0.071522,
      -0.054566,
      0.019741,
      -0.020958,
      -0.063323,
      -0.038282,
      0.04769,
      -0.034399,
      -0.009091,
      0.007058,
      -0.01731,
      0.061606,
      -0.056252,
      -0.051336,
      -0.054987,
      0.025877,
      -0.020764,
      0.018876,
      -0.014285,
      0.009142,
      -0.022858,
      0.02314,
      -0.013344,
      -0.059645,
      0.047367,
      0.02095,
      0.063382,
      0.02023,
      0.006207,
      0.013543,
      0.014659,
      -0.032019,
      0.002467,
      -0.009708,
      -0.043672,
      -0.041304,
      -0.040697,
      0.05397,
      -0.061379,
      -0.036216,
      0.059828,
      0.058794,
      -0.052387,
      -0.06231,
      -0.013512,
      0.074051,
      -0.008353,
      0.082588,
      0.058873,
      -0.00056,
      -0.062464,
      -0.050123,
      0.107894,
      0.034963,
      -0.095459,
      0.067043,
      0.070633,
      0.010337,
      -0.008999,
      0.097077,
      -0.02231,
      0.024933,
      -0.014771,
      -0.043099,
      0.032089,
      -0.042498,
      0.052277,
      0.041414,
      -0.014848,
      -0.124449,
      0.019319,
      0.024156,
      -0.035808,
      -0.025289,
      -0.015495,
      0.016652,
      0.026301,
      -0.002148,
      0.004381,
      -0.004423,
      -0.020862,
      0.117133,
      0.063179,
      -0.019129,
      0.049154,
      0.02332,
      0.076222,
      0.062494,
      0.00113,
      0,
      0.03758,
      -0.009429,
      0.010424,
      0.09557,
      0.008576,
      -0.017797,
      0.050651,
      0.009966,
      -0.128278,
      0.029624,
      0.007662,
      0.06578,
      0.102439,
      -0.046649,
      0.067175,
      -0.0084,
      0.064865,
      -0.076276,
      0.111326,
      0.021395,
      -0.02253,
      -0.055777,
      0.008428,
      0.016015,
      0.01045,
      -0.035346,
      -0.021681,
      0.000446,
      -0.065865,
      -0.010001,
      0.11327,
      -0.004543,
      -0.034418,
      0.084273,
      -0.015794,
      -0.015484,
      0.014449,
      -0.020523,
      -0.136986,
      0.026837,
      0.001529,
      -0.056073,
      -0.030098,
      0.046702,
      -0.061349,
      -0.057306,
      -0.097945,
      -0.02234,
      0.106058,
      0.000487,
      -0.063375,
      0.033675,
      0.019787,
      0.036732,
      0.095566,
      0.019794,
      0.035923,
      -0.069696,
      -0.071783,
      -0.042113,
      -0.041358,
      -0.067654,
      -0.048354,
      -0.055706,
      0.014392,
      -0.047379,
      -0.075921,
      -0.037012,
      -0.027973,
      0.039471,
      0.056225,
      -0.016384,
      -0.015897,
      0.022787,
      -0.039722,
      0.00358,
      -0.003626,
      0.075181,
      0.024273,
      -0.072507,
      0.033703,
      0.026207,
      -0.016845,
      0.111033,
      -0.01287,
      0.009466,
      -0.033605,
      0.015915,
      0.00789,
      -0.018221,
      0.050467,
      0.055712,
      0.073641,
      -0.082135,
      -0.049795,
      0,
      -0.079885,
      -0.011676,
      -0.149293,
      0.101636,
      0.040556,
      -0.033242,
      0.079229,
      -0.0212,
      -0.022939,
      0.058791,
      -0.045671,
      0.005266,
      0.024742,
      0.065496,
      -0.063187,
      0.062601,
      -0.087131,
      -0.043943,
      0.094685,
      -0.086104,
      -0.045203,
      0.088222,
      0.093375,
      -0.051525,
      -0.115448,
      0.023509,
      -0.003999,
      -0.058952,
      -0.042347,
      -0.027832,
      0.044456,
      0.052954,
      -0.018338,
      0.033968,
      -0.009562,
      -0.02679,
      0.071843,
      0.064898,
      -0.015478,
      -0.012281,
      0.057799,
      -0.024706,
      -0.048097,
      -0.092904,
      -0.011608,
      0.030776,
      -0.030791,
      0.009575,
      -0.044668,
      0.014717,
      -0.021519,
      0.019168,
      0.058703,
      0.021914,
      -0.050283,
      0.005494,
      0.020492,
      -0.02993,
      0.038602,
      0.047327,
      0.068133,
      -0.072213,
      0.026372,
      0.082731,
      -0.034409,
      0.003769,
      -0.068073,
      0.059588,
      0.073173,
      0.016392,
      -0.112174,
      0.0294,
      0.008796,
      -0.003426,
      0.05145,
      0.02171,
      -0.04734,
      -0.077248,
      0.110617,
      -0.002463,
      -0.033201,
      0.009034,
      -0.042521,
      0.033527,
      -0.053928,
      -0.061439,
      0.013267,
      -0.000014,
      0.009766,
      -0.031449,
      0.006277,
      0.048705,
      -0.059536,
      -0.077866,
      0.06209,
      0,
      0.006602,
      -0.025523,
      -0.045397,
      0.014205,
      -0.034016,
      0.040797,
      0.006199,
      -0.041124,
      0.025937,
      0.093153,
      -0.100284,
      -0.027327,
      0.024594,
      -0.016487,
      0.024958,
      0.025251,
      0.012611,
      0.04392,
      -0.050388,
      -0.04897,
      -0.015932,
      0.087461,
      -0.008083,
      0.035988,
      -0.01327,
      0.019353,
      0.096775,
      0.029093,
      -0.05121,
      -0.023577,
      -0.147091,
      0.002034,
      0.034605,
      -0.066234,
      -0.033285,
      0.030498,
      -0.066801,
      -0.001345,
      0.065566,
      0.054635,
      -0.068233,
      -0.006314,
      0.041676,
      -0.013264,
      0.003436,
      -0.065219,
      0.029346,
      -0.002038,
      0.007181,
      0.024163,
      0.018059,
      0.011756,
      -0.010223,
      0.015076,
      0.02679,
      0.015031,
      0.006888,
      -0.006264,
      0.003985,
      -0.040252,
      0.026296,
      0.07382,
      0.023188,
      -0.057049
    ]
  },
  {
    "id": "v6-doc-031",
    "title": "Scaling",
    "content": "# Scaling\n\nDepending on your requirements, your feathers application may need to provide high availability. Feathers is designed to scale.\n\nThe types of transports used in a feathers application will impact the scaling configuration. For example, a feathers app that uses the `feathers-rest` adapter exclusively will require less scaling configuration because HTTP is a stateless protocol. If using websockets (a stateful protocol) through the `feathers-socketio` or `feathers-primus` adapters, configuration may be more complex to ensure websockets work properly.\n\n## Horizontal Scaling\n\nScaling horizontally refers to either:\n\n- setting up a [cluster](https://nodejs.org/api/cluster.html), or\n- adding more machines to support your application\n\nTo achieve high availability, varying combinations of both strategies may be used.\n\n## Cluster configuration\n\n[Cluster](https://nodejs.org/api/cluster.html) support is built into core NodeJS. Since NodeJS is single threaded, clustering allows you to easily distribute application requests among multiple child processes (and multiple threads). Clustering is a good choice when running feathers in a multi-core environment.\n\nBelow is an example of adding clustering to feathers with the `feathers-socketio` provider. By default, websocket connections begin via a handshake of multiple HTTP requests and are upgraded to the websocket protocol. However, when clustering is enabled, the same worker will not process all HTTP requests for a handshake, leading to HTTP 400 errors. To ensure a successful handshake, force a single worker to process the handshake by disabling the http transport and exclusively using the `websocket` transport.\n\n```js\nimport cluster from 'cluster';\nimport feathers from '@feathersjs/feathers';\nimport socketio from '@feathersjs/socketio';\n\nconst CLUSTER_COUNT = 4;\n\nif (cluster.isMaster) {\n  for (let i = 0; i < CLUSTER_COUNT; i++) {\n    cluster.fork();\n  }\n} else {\n  const app = feathers();\n  // ensure the same worker handles websocket connections\n  app.configure(socketio({\n    transports: ['websocket']\n  }));\n  app.listen(4000);\n}\n```\n\nIn your feathers client code, limit the socket.io-client to the `websocket` transport and disable `upgrade`.\n\n```js\nimport feathers from '@feathersjs/client';\nimport socketio from '@feathersjs/socketio-client';\nimport io from 'socket.io-client';\n\nconst app = feathers()\n  .configure(socketio(\n    io('http://api.feathersjs.com', {\n      transports: ['websocket'],\n      upgrade: false\n    })\n  ));\n```\n## Multiple instances\nWhen running multiple instances of your Feathers application (e.g. on several Heroku Dynos), service events (created, updated, patched, removed and any custom defined events) do not get propagated to other instances for such cases you may want to use: https://github.com/feathersjs-ecosystem/feathers-sync\n\nWhich will use a messaging mechanism to propagate all events to all application instances like redis or RabbitMQ",
    "version": "v6",
    "tokens": [
      "scaling",
      "depending",
      "requirements",
      "feathers",
      "application",
      "need",
      "provide",
      "high",
      "availability",
      "designed",
      "scale",
      "types",
      "transports",
      "used",
      "impact",
      "configuration",
      "example",
      "app",
      "uses",
      "rest",
      "adapter",
      "exclusively",
      "require",
      "less",
      "http",
      "stateless",
      "protocol",
      "if",
      "using",
      "websockets",
      "stateful",
      "socketio",
      "primus",
      "adapters",
      "complex",
      "ensure",
      "work",
      "properly",
      "horizontal",
      "horizontally",
      "refers",
      "setting",
      "cluster",
      "https",
      "nodejs",
      "org",
      "api",
      "html",
      "adding",
      "machines",
      "support",
      "achieve",
      "varying",
      "combinations",
      "strategies",
      "built",
      "into",
      "core",
      "since",
      "single",
      "threaded",
      "clustering",
      "allows",
      "easily",
      "distribute",
      "requests",
      "among",
      "multiple",
      "child",
      "processes",
      "threads",
      "good",
      "choice",
      "running",
      "multi",
      "environment",
      "provider",
      "default",
      "websocket",
      "connections",
      "begin",
      "via",
      "handshake",
      "upgraded",
      "however",
      "enabled",
      "worker",
      "process",
      "leading",
      "400",
      "errors",
      "successful",
      "force",
      "disabling",
      "transport",
      "js",
      "import",
      "feathersjs",
      "const",
      "count",
      "ismaster",
      "let",
      "fork",
      "else",
      "handles",
      "configure",
      "listen",
      "4000",
      "client",
      "code",
      "limit",
      "socket",
      "io",
      "disable",
      "upgrade",
      "com",
      "false",
      "instances",
      "several",
      "heroku",
      "dynos",
      "service",
      "events",
      "created",
      "updated",
      "patched",
      "removed",
      "custom",
      "defined",
      "get",
      "propagated",
      "cases",
      "want",
      "use",
      "github",
      "ecosystem",
      "sync",
      "messaging",
      "mechanism",
      "propagate",
      "like",
      "redis",
      "rabbitmq"
    ],
    "category": "cookbook",
    "source": {
      "path": "cookbook/general/scaling.md",
      "url": "https://v6.feathersjs.com/cookbook/general/scaling"
    },
    "tags": [],
    "embedding": [
      -0.036275,
      -0.007875,
      0.011416,
      0.04082,
      -0.000542,
      -0.043489,
      -0.051338,
      -0.013188,
      -0.015592,
      -0.033796,
      -0.03295,
      0.044483,
      -0.026198,
      -0.006712,
      0.046707,
      -0.007658,
      0.05279,
      0.015968,
      -0.049859,
      -0.015393,
      -0.045227,
      -0.092939,
      -0.007709,
      0.025027,
      -0.088522,
      0.00111,
      -0.053244,
      0.014543,
      0.012891,
      -0.012698,
      0.023119,
      -0.018544,
      -0.043947,
      0.025287,
      -0.093856,
      0.067157,
      0.005736,
      -0.104389,
      -0.084338,
      -0.007657,
      0.053327,
      -0.02668,
      -0.080101,
      -0.050864,
      -0.014294,
      -0.06845,
      -0.059745,
      0.04821,
      -0.004527,
      -0.006989,
      0.047554,
      -0.067356,
      -0.072475,
      0.089438,
      -0.013451,
      0.059266,
      -0.003857,
      -0.019992,
      -0.058212,
      -0.028483,
      0.082473,
      -0.010974,
      0.072664,
      0.000715,
      0.044997,
      0.022804,
      0.03023,
      -0.019796,
      -0.0003,
      -0.005995,
      0.053517,
      -0.055303,
      -0.051428,
      0.013973,
      -0.015759,
      0.001117,
      -0.002576,
      -0.034189,
      0.019648,
      0.123613,
      -0.035319,
      0.022885,
      -0.004531,
      0.083802,
      -0.016849,
      -0.01827,
      -0.027661,
      -0.04488,
      -0.012465,
      -0.068668,
      0.034022,
      0.060127,
      -0.007166,
      0.027917,
      0.076166,
      -0.01646,
      -0.07526,
      0.022157,
      0.013902,
      0.008621,
      0.033718,
      -0.044649,
      0.064485,
      -0.042468,
      0.058692,
      -0.019969,
      -0.063443,
      -0.030486,
      0.033601,
      0.033277,
      -0.007536,
      0.055448,
      0.01156,
      0.024254,
      -0.028918,
      0.036326,
      0.038469,
      -0.052195,
      -0.019589,
      0.091368,
      0.073112,
      -0.024145,
      0.084574,
      -0.032937,
      0.081967,
      0.056416,
      -0.090175,
      0,
      -0.054641,
      -0.018079,
      0.036736,
      -0.022669,
      0.044302,
      -0.020066,
      -0.021012,
      -0.049045,
      -0.085439,
      -0.079994,
      -0.027936,
      0.124211,
      0.065786,
      -0.018313,
      0.101933,
      -0.112218,
      0.094853,
      0.048067,
      0.144048,
      -0.017288,
      -0.015466,
      -0.066146,
      -0.034514,
      0.041725,
      0.008887,
      -0.033106,
      -0.004294,
      -0.035469,
      -0.07644,
      0.017566,
      0.092002,
      -0.069322,
      -0.021395,
      -0.002556,
      -0.014869,
      -0.02353,
      -0.012193,
      -0.057304,
      -0.074864,
      0.006864,
      -0.003832,
      0.009403,
      -0.002015,
      -0.012387,
      0.002729,
      0.008882,
      0.004617,
      -0.005243,
      -0.005209,
      -0.055972,
      0.060019,
      -0.024869,
      0.079208,
      -0.020702,
      0.09134,
      0.010307,
      0.06256,
      -0.062646,
      -0.032944,
      -0.021045,
      -0.072388,
      -0.193921,
      -0.032355,
      -0.025408,
      0.096328,
      0.0074,
      -0.032581,
      0.012619,
      -0.065149,
      0.084561,
      0.097141,
      0.044306,
      0.021345,
      0.012339,
      -0.038574,
      0.024952,
      0.006689,
      0.031884,
      -0.012537,
      -0.019443,
      -0.047157,
      0.084449,
      -0.013216,
      0.035365,
      -0.014972,
      -0.037496,
      0.020399,
      0.029737,
      -0.029345,
      0.047536,
      0.029325,
      0.062137,
      0.06783,
      -0.089632,
      -0.08389,
      0,
      -0.0478,
      -0.012673,
      -0.107396,
      0.071617,
      0.032143,
      -0.002792,
      0.040761,
      0.017231,
      0.025007,
      0.034407,
      -0.036811,
      -0.000021,
      0.000919,
      0.006433,
      -0.079058,
      0.052487,
      -0.02755,
      -0.055769,
      0.112602,
      -0.024275,
      0.021357,
      -0.063899,
      0.041852,
      -0.011745,
      -0.012604,
      -0.002286,
      -0.071899,
      -0.064006,
      -0.045507,
      -0.050051,
      -0.010873,
      -0.066622,
      0.077546,
      0.01589,
      0.018485,
      0.011601,
      -0.011427,
      0.053945,
      0.023363,
      -0.047931,
      0.004046,
      -0.019353,
      -0.019047,
      -0.098269,
      0.02,
      -0.004132,
      -0.040749,
      0.018849,
      -0.088943,
      0.015697,
      -0.027367,
      -0.036832,
      0.042352,
      0.080065,
      -0.053786,
      0.070115,
      0.007517,
      0.05523,
      -0.043718,
      0.037091,
      0.059601,
      -0.105977,
      -0.013048,
      0.049634,
      -0.020264,
      -0.016743,
      -0.044719,
      -0.050755,
      -0.04945,
      -0.011913,
      -0.043674,
      0.017933,
      0.042692,
      0.031864,
      -0.07473,
      -0.031756,
      0.053624,
      -0.053831,
      0.083112,
      0.025419,
      -0.154021,
      0.075741,
      0.000033,
      0.029786,
      0.010633,
      0.000494,
      0.07261,
      0.037555,
      0.05117,
      0.049541,
      -0.033959,
      0.029289,
      -0.026121,
      -0.056727,
      -0.001848,
      0,
      -0.038945,
      0.027129,
      -0.077454,
      0.044864,
      0.005038,
      0.017094,
      0.000572,
      -0.036504,
      0.072881,
      0.151675,
      -0.001872,
      -0.028049,
      -0.011702,
      0.01026,
      0.089259,
      0.019806,
      0.060038,
      -0.024289,
      -0.042739,
      -0.057443,
      -0.047841,
      0.100396,
      -0.032453,
      0.052009,
      0.021671,
      0.00815,
      0.067391,
      0.07596,
      -0.029493,
      -0.043777,
      -0.151918,
      0.01679,
      0.021764,
      0.020425,
      -0.052326,
      -0.048577,
      -0.104141,
      0.106046,
      0.075553,
      0.070736,
      0.055834,
      -0.021117,
      0.035069,
      -0.002468,
      0.114205,
      0.03047,
      0.031604,
      0.067379,
      0.000016,
      0.065982,
      0.056147,
      -0.013281,
      0.015086,
      0.008416,
      0.04035,
      0.017495,
      -0.016387,
      -0.017128,
      0.046434,
      0.005078,
      0.049169,
      -0.015186,
      -0.043503,
      -0.014859
    ]
  },
  {
    "id": "v6-doc-032",
    "title": "The Feathers cookbook",
    "content": "# The Feathers cookbook\n\nThis cookbook contains a growing collection of recipes for common tasks you might run into with Feathers. Make sure you have [followed the Feathers guide first](../guides/) before jumping into the cookbook.\n\nHave a recipe idea? [Submit an issue with a suggestion](https://github.com/feathersjs/docs/issues/new?title=Cookbook%20Suggestion:).",
    "version": "v6",
    "tokens": [
      "feathers",
      "cookbook",
      "contains",
      "growing",
      "collection",
      "recipes",
      "common",
      "tasks",
      "run",
      "into",
      "make",
      "sure",
      "followed",
      "guide",
      "first",
      "guides",
      "jumping",
      "recipe",
      "idea",
      "submit",
      "issue",
      "suggestion",
      "https",
      "github",
      "com",
      "feathersjs",
      "docs",
      "issues",
      "new",
      "title",
      "20suggestion"
    ],
    "category": "cookbook",
    "source": {
      "path": "cookbook/index.md",
      "url": "https://v6.feathersjs.com/cookbook/index"
    },
    "tags": [],
    "embedding": [
      -0.03288,
      -0.029656,
      0.071761,
      0.043939,
      -0.016196,
      -0.04587,
      0.006115,
      -0.125851,
      -0.020954,
      0.010211,
      0.0008,
      0.049841,
      -0.073114,
      -0.055558,
      -0.026042,
      -0.006147,
      -0.037933,
      -0.050848,
      -0.003225,
      -0.017663,
      -0.001341,
      0.024235,
      0.087826,
      0.082328,
      -0.021336,
      -0.096236,
      -0.000312,
      0.059274,
      -0.048092,
      0.009551,
      0.049275,
      -0.020257,
      -0.002782,
      -0.095895,
      -0.020384,
      0.075726,
      -0.019408,
      -0.008032,
      0.065806,
      -0.012907,
      0.033972,
      -0.069826,
      -0.034231,
      0.03031,
      0.014903,
      0.074373,
      -0.035035,
      -0.041602,
      0.03368,
      0.101293,
      -0.079758,
      -0.07617,
      -0.108297,
      -0.06317,
      0.089658,
      0.065606,
      -0.08469,
      -0.013958,
      -0.130733,
      -0.048724,
      -0.007536,
      0.010802,
      -0.053081,
      0.020166,
      0.018125,
      0.045838,
      -0.044401,
      0.082229,
      -0.022144,
      -0.06789,
      -0.014794,
      0.01424,
      -0.01732,
      0.05468,
      -0.025035,
      0.048737,
      0.011889,
      -0.050319,
      0.051356,
      0.000139,
      -0.101532,
      -0.016787,
      0.028606,
      0.058465,
      -0.042799,
      0.04377,
      0.02277,
      0.003751,
      0.020193,
      -0.034786,
      0.091223,
      0.009877,
      0.071823,
      0.040623,
      0.082577,
      0.068793,
      0.016908,
      0.01956,
      -0.033915,
      -0.013906,
      -0.04777,
      -0.0289,
      0.043918,
      -0.084543,
      0.027674,
      -0.006191,
      -0.024185,
      -0.071479,
      -0.01593,
      -0.056129,
      -0.04593,
      0.032961,
      -0.048113,
      -0.017986,
      0.000567,
      -0.041633,
      0.039804,
      -0.027762,
      0.019586,
      0.000697,
      0.040682,
      -0.000966,
      0.045718,
      -0.030181,
      -0.076989,
      -0.025397,
      -0.07578,
      0,
      0.039363,
      0.046817,
      0.043202,
      0.091228,
      0.069753,
      -0.051169,
      -0.037539,
      -0.011073,
      -0.062961,
      0.091357,
      -0.010431,
      0.021389,
      -0.026153,
      0.053164,
      0.019303,
      -0.05131,
      0.060066,
      -0.016081,
      0.082073,
      -0.033169,
      -0.027861,
      -0.006879,
      -0.026506,
      -0.024419,
      -0.018074,
      0.095325,
      -0.03233,
      -0.048214,
      -0.087225,
      0.0143,
      0.086875,
      -0.099814,
      -0.045791,
      -0.090772,
      -0.079658,
      0.012362,
      0.008448,
      -0.042325,
      0.012603,
      0.083242,
      -0.002919,
      -0.076871,
      0.067005,
      0.060488,
      -0.026479,
      0.038581,
      -0.064942,
      0.083306,
      0.142792,
      0.036452,
      0.018587,
      -0.028044,
      0.070809,
      -0.052546,
      0.02,
      -0.037078,
      -0.003551,
      -0.059252,
      -0.014795,
      -0.031883,
      -0.058637,
      -0.046445,
      -0.017067,
      -0.053686,
      0.017867,
      -0.023113,
      -0.092484,
      0.027217,
      -0.067806,
      0.018376,
      -0.018713,
      0.032119,
      0.016784,
      -0.12446,
      -0.025532,
      0.009015,
      -0.001306,
      -0.035198,
      0.004438,
      -0.064335,
      0.038273,
      0.058924,
      -0.010457,
      0.023401,
      -0.022195,
      0.042974,
      0.027463,
      0.053674,
      0.030522,
      0.014177,
      0.058437,
      0.054536,
      0.011149,
      -0.075193,
      -0.051645,
      0,
      0.010423,
      -0.041448,
      -0.120095,
      0.077128,
      0.079014,
      0.011687,
      0.071039,
      -0.005593,
      0.050445,
      -0.030223,
      -0.086734,
      -0.010024,
      -0.048983,
      0.021757,
      -0.05966,
      0.039783,
      -0.042578,
      0.021543,
      0.062857,
      -0.068949,
      -0.054774,
      0.04008,
      0.037557,
      -0.013956,
      -0.039113,
      0.040334,
      0.075109,
      0.008567,
      -0.033644,
      0.004224,
      0.014206,
      -0.088838,
      0.109858,
      0.04193,
      -0.098911,
      0.036673,
      0.046186,
      -0.077007,
      -0.006073,
      0.015962,
      0.020891,
      -0.047883,
      0.000161,
      -0.083522,
      -0.030503,
      -0.040726,
      -0.034825,
      0.050798,
      -0.041599,
      0.049446,
      0.071139,
      -0.057975,
      -0.000468,
      -0.031002,
      -0.018209,
      0.090969,
      0.035089,
      -0.047744,
      0.093204,
      0.036268,
      -0.074837,
      0.020974,
      0.043187,
      0.065924,
      0.018026,
      0.006432,
      -0.04464,
      -0.063065,
      0.039028,
      -0.014983,
      -0.117241,
      0.023542,
      0.01821,
      -0.011886,
      0.025368,
      0.055177,
      0.057337,
      0.008275,
      0.054524,
      0.028966,
      0.027273,
      -0.016557,
      -0.012936,
      0.095208,
      0.009037,
      -0.015224,
      -0.000939,
      0.016844,
      -0.03067,
      0.017025,
      -0.04095,
      0.063025,
      0.071864,
      0.122963,
      0.081963,
      0,
      -0.042941,
      0.050246,
      0.013728,
      0.010328,
      0.049929,
      0.100123,
      0.023826,
      -0.084815,
      0.010149,
      0.06133,
      -0.025932,
      -0.022529,
      0.024318,
      0.009264,
      0.00499,
      -0.024145,
      0.069426,
      0.01977,
      -0.096931,
      -0.081341,
      -0.006499,
      0.095285,
      -0.013467,
      -0.064234,
      0.036441,
      -0.0112,
      -0.027894,
      0.063345,
      0.006761,
      0.010017,
      -0.104773,
      0.064133,
      0.058804,
      -0.043436,
      -0.015738,
      -0.004859,
      -0.060662,
      -0.005817,
      0.016533,
      0.011315,
      -0.055618,
      -0.019123,
      0.016553,
      -0.008869,
      0.009998,
      -0.040298,
      0.058619,
      -0.002561,
      -0.018552,
      0.094533,
      0.043963,
      0.006632,
      0.127961,
      0.031921,
      -0.043159,
      0.029711,
      -0.007751,
      0.039551,
      0.057456,
      -0.069563,
      0.044528,
      0.049929,
      -0.032519,
      -0.023516
    ]
  },
  {
    "id": "v6-doc-033",
    "title": "FeathersJS Ecosystem",
    "content": "import Packages from './Packages.vue'\n \n\n# FeathersJS Ecosystem\n\n## The Feathers Flightpath Blog\n\nCatch up on the latest FeathersJS news and community-contributed articles on the [Feathers Flightpath Blog](https://blog.feathersjs.com/).\n\n## YouTube Playlist\n\nWatch the [FeathersJS Playlist on YouTube](https://www.youtube.com/playlist?list=PLwSdIiqnDlf_lb5y1liQK2OW5daXYgKOe).\n\n## Awesome Packages\n\nThis is a curated list of feathers packages. You can sort by various criteria. Core packages are hidden by default.",
    "version": "v6",
    "tokens": [
      "feathersjs",
      "ecosystem",
      "import",
      "packages",
      "vue",
      "feathers",
      "flightpath",
      "blog",
      "catch",
      "latest",
      "news",
      "community",
      "contributed",
      "articles",
      "https",
      "com",
      "youtube",
      "playlist",
      "watch",
      "www",
      "list",
      "plwsdiiqndlf",
      "lb5y1liqk2ow5daxygkoe",
      "awesome",
      "curated",
      "sort",
      "various",
      "criteria",
      "core",
      "hidden",
      "default"
    ],
    "category": "cookbook",
    "source": {
      "path": "ecosystem/index.md",
      "url": "https://v6.feathersjs.com/ecosystem/index"
    },
    "tags": [],
    "embedding": [
      -0.02124,
      -0.050661,
      0.084565,
      -0.025179,
      0.086146,
      0.004699,
      -0.007133,
      -0.070176,
      -0.030695,
      0.024469,
      -0.030025,
      0.074583,
      -0.154716,
      0.0645,
      0.01424,
      0.005693,
      -0.023658,
      -0.013278,
      -0.002686,
      -0.017304,
      -0.004136,
      -0.001196,
      0.030745,
      0.033978,
      -0.053361,
      0.02294,
      -0.073362,
      0.040577,
      0.005866,
      -0.050165,
      0.01169,
      0.01073,
      0.011517,
      0.012201,
      -0.041262,
      0.078134,
      -0.069059,
      -0.109483,
      -0.025523,
      -0.025734,
      -0.013325,
      -0.0119,
      -0.04782,
      -0.04623,
      -0.044489,
      -0.029433,
      -0.034111,
      -0.076659,
      -0.003427,
      0.041441,
      -0.03106,
      -0.108621,
      -0.099701,
      0.011709,
      0.016185,
      0.069521,
      -0.035751,
      0.046058,
      -0.099938,
      -0.021825,
      0.014842,
      -0.037537,
      -0.004649,
      0.012771,
      -0.004374,
      0.022377,
      0.004075,
      0.045945,
      0.057621,
      -0.138702,
      -0.033548,
      0.011575,
      -0.001322,
      0.017712,
      -0.052711,
      0.016379,
      -0.008958,
      -0.008771,
      0.048399,
      0.015559,
      0.005809,
      -0.037186,
      -0.032975,
      0.081117,
      0.028921,
      0.041879,
      0.015372,
      -0.006463,
      -0.027696,
      -0.007261,
      -0.005647,
      -0.030411,
      0.110517,
      0.092,
      0.025081,
      0.056241,
      -0.000601,
      0.006267,
      -0.064117,
      -0.001803,
      -0.078299,
      -0.014068,
      0.065579,
      -0.022547,
      0.062579,
      0.035993,
      -0.045166,
      -0.072847,
      -0.026474,
      -0.005325,
      -0.08216,
      0.032443,
      0.020928,
      -0.088565,
      -0.025408,
      0.009562,
      -0.006415,
      -0.000933,
      -0.005333,
      0.021828,
      0.08768,
      0.013334,
      0.157792,
      -0.031641,
      0.01302,
      0.076751,
      -0.05317,
      0,
      0.007915,
      0.032668,
      0.016935,
      0.031789,
      -0.017925,
      -0.070361,
      0.038084,
      -0.02029,
      -0.111482,
      0.054453,
      -0.018494,
      0.070541,
      0.005895,
      0.094025,
      0.080856,
      -0.059533,
      0.039343,
      0.047311,
      0.025837,
      -0.016907,
      -0.039411,
      0.011938,
      -0.008869,
      0.004498,
      0.010536,
      -0.012049,
      -0.016778,
      -0.046274,
      -0.03739,
      -0.002,
      0.084926,
      -0.056912,
      -0.017451,
      0.009483,
      0.016816,
      0.039011,
      -0.084788,
      -0.07811,
      -0.027801,
      0.058867,
      0.064831,
      -0.012144,
      -0.031983,
      0.032064,
      0.017911,
      0.007041,
      -0.030544,
      0.024389,
      0.103536,
      0.00317,
      -0.032853,
      -0.018829,
      0.035018,
      -0.009046,
      0.018662,
      -0.029888,
      0.107621,
      -0.011531,
      0.026571,
      -0.052368,
      -0.009086,
      -0.071232,
      0.019038,
      -0.069842,
      0.078454,
      -0.056643,
      -0.038746,
      -0.007659,
      -0.058355,
      0.06704,
      -0.001005,
      0.057241,
      -0.003716,
      -0.07827,
      0.030239,
      -0.016958,
      -0.020815,
      -0.009161,
      0.022529,
      -0.11002,
      -0.010384,
      0.037228,
      0.037639,
      0.021241,
      0.022353,
      -0.00594,
      0.032666,
      0.052364,
      0.045831,
      -0.047553,
      0.022744,
      0.018937,
      0.060669,
      -0.065736,
      -0.071819,
      0,
      0.041069,
      0.057402,
      -0.077883,
      0.07486,
      0.056908,
      0.030038,
      0.034602,
      0.026012,
      0.059759,
      0.014915,
      -0.058702,
      0.027948,
      0.064552,
      0.041609,
      0.006914,
      0.12131,
      -0.043082,
      -0.083725,
      0.090122,
      -0.116398,
      -0.03363,
      0.007035,
      0.040429,
      -0.029742,
      -0.070831,
      -0.005868,
      0.092506,
      -0.046995,
      -0.022398,
      0.017802,
      0.001981,
      -0.026556,
      -0.034382,
      0.013273,
      -0.052477,
      0.005344,
      0.060284,
      0.030803,
      -0.034412,
      0.035945,
      -0.058734,
      -0.018352,
      -0.098955,
      -0.108617,
      -0.032937,
      -0.066999,
      -0.043147,
      0.07389,
      -0.032506,
      -0.037218,
      0.017555,
      -0.005089,
      0.014517,
      -0.009022,
      -0.007261,
      0.103446,
      0.037981,
      0.068338,
      0.102187,
      -0.018753,
      -0.000752,
      0.01375,
      0.028323,
      -0.014927,
      -0.027213,
      0.048314,
      -0.082228,
      -0.039778,
      -0.067816,
      -0.062785,
      -0.049421,
      0.031493,
      0.043089,
      -0.02963,
      -0.015015,
      -0.009274,
      0.064659,
      0.058246,
      0.134734,
      0.004741,
      0.001217,
      0.051633,
      0.048996,
      0.035504,
      0.009669,
      -0.011535,
      0.030285,
      -0.05354,
      -0.013382,
      -0.002884,
      -0.013568,
      0.020226,
      0.053009,
      0.045753,
      0.073613,
      0,
      -0.005495,
      0.007583,
      -0.078553,
      0.016888,
      0.083392,
      0.050366,
      0.032439,
      0.049363,
      0.033459,
      0.109735,
      -0.019424,
      0.03242,
      -0.031805,
      0.073988,
      0.028819,
      0.056085,
      -0.035744,
      0.095005,
      -0.112022,
      -0.074352,
      -0.029134,
      0.107708,
      0.051334,
      -0.032925,
      0.019403,
      0.007057,
      0.003141,
      -0.00908,
      0.07619,
      0.016201,
      -0.083012,
      0.038923,
      0.030443,
      -0.182062,
      -0.007429,
      0.049724,
      -0.063601,
      -0.00432,
      0.03261,
      0.037851,
      -0.05287,
      -0.074538,
      0.075567,
      -0.029443,
      0.059383,
      -0.032467,
      0.009237,
      -0.068429,
      -0.016146,
      0.040035,
      0.058969,
      -0.014941,
      -0.039517,
      0.037688,
      -0.023889,
      0.068507,
      -0.0329,
      -0.042164,
      0.057945,
      -0.130519,
      -0.015025,
      -0.00198,
      0.066835,
      -0.004131
    ]
  }
]