[
  {
    "id": "v5-services",
    "title": "Services",
    "content": "---\noutline: deep\n---\n\n# Services\n\nServices are the heart of every Feathers application. Services are objects or instances of [classes](https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Classes) that implement [certain methods](#service-methods). Feathers itself will also add some [additional methods and functionality](#feathers-functionality) to its services.\n\n## Service methods\n\nService methods are pre-defined [CRUD](https://en.wikipedia.org/wiki/Create,_read,_update_and_delete) and [custom methods](#custom-methods) that your service provides or that have already been implemented by one of the [database adapters](./databases/common.md). Below is an example of a Feathers service as a class or object.\n\n```ts\nimport { feathers } from '@feathersjs/feathers'\nimport type { Params, Id, NullableId } from '@feathersjs/feathers'\n\nclass MyServiceClass {\n  async find(params: Params) {\n    return []\n  }\n  async get(id: Id, params: Params) {}\n  async create(data: any, params: Params) {}\n  async update(id: NullableId, data: any, params: Params) {}\n  async patch(id: NullableId, data: any, params: Params) {}\n  async remove(id: NullableId, params: Params) {}\n  async setup(app: Application, path: string) {}\n  async teardown(app: Application, path: string) {}\n}\n\nconst myServiceObject = {\n  async find(params: Params) {\n    return []\n  },\n  async get(id: Id, params: Params) {},\n  async create(data: any, params: Params) {},\n  async update(id: NullableId, data: any, params: Params) {},\n  async patch(id: NullableId, data: any, params: Params) {},\n  async remove(id: NullableId, params: Params) {},\n  async setup(app: Application, path: string) {},\n  async teardown(app: Application, path: string) {}\n}\n\ntype ServiceTypes = {\n  'my-service': MyServiceClass\n  'my-service-object': typeof myServiceObject\n}\n\nconst app = feathers<ServiceTypes>()\n\napp.use('my-service', new MyServiceClass())\napp.use('my-service-object', myServiceObject)\n```\n\n<BlockQuote type=\"danger\">\n\nAlways use the service returned by `app.service(path)` not the service object or class directly or you will not get any of the [Feathers service functionality](services.md#feathers-functionality)\n\n</BlockQuote>\n\n<BlockQuote type=\"tip\">\n\nMethods are optional and if a method is not implemented Feathers will automatically emit a `NotImplemented` error. At least one standard service method must be implemented to be considered a service. If you used `methods` option when registering the service via [app.use](./application.md#usepath-service--options), all methods listed must be available.\n\n</BlockQuote>\n\nService methods must use [async/await](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/async_function) or return a [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise) and have the following parameters:\n\n- `id` — The identifier for the resource. A resource is the data identified by a unique id.\n- `data` — The resource data.\n- `params",
    "version": "v5",
    "tokens": [
      "services",
      "---",
      "outline",
      "deep",
      "---",
      "services",
      "services",
      "are",
      "the",
      "heart",
      "every",
      "feathers",
      "application",
      "services",
      "are",
      "objects",
      "instances",
      "classes",
      "https",
      "developer",
      "mozilla",
      "org",
      "docs",
      "web",
      "javascript",
      "reference",
      "classes",
      "that",
      "implement",
      "certain",
      "methods",
      "service-methods",
      "feathers",
      "itself",
      "will",
      "also",
      "add",
      "some",
      "additional",
      "methods",
      "and",
      "functionality",
      "feathers-functionality",
      "its",
      "services",
      "service",
      "methods",
      "service",
      "methods",
      "are",
      "pre-defined",
      "crud",
      "https",
      "wikipedia",
      "org",
      "wiki",
      "create",
      "_read",
      "_update_and_delete",
      "and",
      "custom",
      "methods",
      "custom-methods",
      "that",
      "your",
      "service",
      "provides",
      "that",
      "have",
      "already",
      "been",
      "implemented",
      "one",
      "the",
      "database",
      "adapters",
      "databases",
      "common",
      "below",
      "example",
      "feathers",
      "service",
      "class",
      "object",
      "import",
      "feathers",
      "from",
      "feathersjs",
      "feathers",
      "import",
      "type",
      "params",
      "nullableid",
      "from",
      "feathersjs",
      "feathers",
      "class",
      "myserviceclass",
      "async",
      "find",
      "params",
      "params",
      "return",
      "async",
      "get",
      "params",
      "params",
      "async",
      "create",
      "data",
      "any",
      "params",
      "params"
    ],
    "category": "services"
  },
  {
    "id": "v5-hooks",
    "title": "Hooks",
    "content": "---\noutline: deep\n---\n\n# Hooks\n\nHooks are pluggable middleware functions that can be registered **around**, **before**, **after** or on **error**(s) of a [service method](./services.md). Multiple hook functions can be chained to create complex work-flows. A hook is **transport independent**, which means it does not matter if it has been called internally on the server, through HTTP(S) (REST), websockets or any other transport Feathers supports. They are also service agnostic, meaning they can be used with ​**any**​ service regardless of whether they use a database or not.\n\nHooks are commonly used to handle things like permissions, validation, logging, [authentication](./authentication/hook.md), [data schemas and resolvers](./schema/index.md), sending notifications and more. This pattern keeps your application logic flexible, composable, and easier to trace through and debug. For more information about the design patterns behind hooks see [this blog post](https://blog.feathersjs.com/api-service-composition-with-hooks-47af13aa6c01).\n\n## Quick Example\n\nThe following example logs the runtime of any service method on the `messages` service and adds `createdAt` property before saving the data to the database:\n\n```ts\nimport { feathers, type HookContext, type NextFunction } from '@feathersjs/feathers'\n\nconst app = feathers()\n\napp.service('messages').hooks({\n  around: {\n    all: [\n      // A hook that wraps around all other hooks and the service method\n      // logging the total runtime of a successful call\n      async (context: HookContext, next: NextFunction) => {\n        const startTime = Date.now()\n\n        await next()\n\n        console.log(`Method ${context.method} on ${context.path} took ${Date.now() - startTime}ms`)\n      }\n    ]\n  },\n  before: {\n    create: [\n      async (context: HookContext) => {\n        context.data = {\n          ...context.data,\n          createdAt: Date.now()\n        }\n      }\n    ]\n  }\n})\n```\n\n<BlockQuote type=\"info\">\n\nWhile it is always possible to add properties like `createdAt` in the above example via hooks, the preferred way to make data modifications like this in Feathers 5 is via [schemas and resolvers](./schema/index.md).\n\n</BlockQuote>\n\n## Hook functions\n\n### before, after and error\n\n`before`, `after` and `error` hook functions are functions that are `async` or return a promise and take the [hook context](#hook-context) as the parameter and return nothing or throw an error.\n\n```ts\nimport { HookContext } from '../declarations'\n\nexport const hookFunction = async (context: HookContext) => {\n  // Do things here\n}\n```\n\nFor more information see the [hook flow](#hook-flow) section.\n\n### around\n\n`around` hooks are a special kind of hook that allow to control the entire `before`, `after` and `error` flow in a single function. They are a Feathers specific version of the generic [@feathersjs/hooks](https://github.com/feathersjs/hooks). An `around` hook is an `async` function that accepts two arguments:\n\n- The [hook context](#h",
    "version": "v5",
    "tokens": [
      "hooks",
      "---",
      "outline",
      "deep",
      "---",
      "hooks",
      "hooks",
      "are",
      "pluggable",
      "middleware",
      "functions",
      "that",
      "can",
      "registered",
      "around",
      "before",
      "after",
      "error",
      "service",
      "method",
      "services",
      "multiple",
      "hook",
      "functions",
      "can",
      "chained",
      "create",
      "complex",
      "work-flows",
      "hook",
      "transport",
      "independent",
      "which",
      "means",
      "does",
      "not",
      "matter",
      "has",
      "been",
      "called",
      "internally",
      "the",
      "server",
      "through",
      "http",
      "rest",
      "websockets",
      "any",
      "other",
      "transport",
      "feathers",
      "supports",
      "they",
      "are",
      "also",
      "service",
      "agnostic",
      "meaning",
      "they",
      "can",
      "used",
      "with",
      "any",
      "service",
      "regardless",
      "whether",
      "they",
      "use",
      "database",
      "not",
      "hooks",
      "are",
      "commonly",
      "used",
      "handle",
      "things",
      "like",
      "permissions",
      "validation",
      "logging",
      "authentication",
      "authentication",
      "hook",
      "data",
      "schemas",
      "and",
      "resolvers",
      "schema",
      "index",
      "sending",
      "notifications",
      "and",
      "more",
      "this",
      "pattern",
      "keeps",
      "your",
      "application",
      "logic",
      "flexible",
      "composable",
      "and",
      "easier",
      "trace",
      "through",
      "and",
      "debug",
      "for",
      "more",
      "information",
      "about",
      "the",
      "design",
      "patterns",
      "behind",
      "hooks",
      "see",
      "this",
      "blog",
      "post",
      "https",
      "blog",
      "feathersjs",
      "com",
      "api"
    ],
    "category": "hooks"
  },
  {
    "id": "v5-application",
    "title": "Application",
    "content": "---\noutline: deep\n---\n\n# Application\n\n<Badges>\n\n[![npm version](https://img.shields.io/npm/v/@feathersjs/authentication-client.svg?style=flat-square)](https://www.npmjs.com/package/@feathersjs/feathers)\n[![Changelog](https://img.shields.io/badge/changelog-.md-blue.svg?style=flat-square)](https://github.com/feathersjs/feathers/blob/dove/packages/feathers/CHANGELOG.md)\n\n</Badges>\n\n```\nnpm install @feathersjs/feathers --save\n```\n\nThe core `@feathersjs/feathers` module provides the ability to initialize a new Feathers application instance. It works in Node, React Native and the browser (see the [client](./client.md) chapter for more information). Each instance allows for registration and retrieval of [services](./services.md), [hooks](./hooks.md), plugin configuration, and getting and setting configuration options. An initialized Feathers application is referred to as the **app object**.\n\n```ts\nimport { feathers } from '@feathersjs/feathers'\n\ntype ServiceTypes = {\n  // Add registered services here\n}\n\n// Types for `app.set(name, value)` and `app.get(name)`\ntype Configuration = {\n  port: number\n}\n\nconst app = feathers<ServiceTypes, Configuration>()\n```\n\n## .use(path, service [, options])\n\n`app.use(path, service [, options]) -> app` allows registering a [service object](./services.md) on a given `path`.\n\n```ts\nimport { feathers, type Id } from '@feathersjs/feathers'\n\nclass MessageService {\n  async get(id: Id) {\n    return {\n      id,\n      text: `This is the ${id} message!`\n    }\n  }\n}\n\ntype ServiceTypes = {\n  // Add services path to type mapping here\n  messages: MessageService\n}\n\nconst app = feathers<ServiceTypes>()\n\n// Register a service instance on the app\napp.use('messages', new MessageService())\n\n// Get the service and call the service method with the correct types\nconst message = await app.service('messages').get('test')\n```\n\n### path\n\nThe `path` is a string that should be URL friendly and may contain `/` as a separator. `path` can also be `/` to register a service at the root level. A path may contain placeholders in the form of `:userId/messages` which will be included in `params.route` by a transport.\n\n### options\n\nThe following options are available:\n\n- `methods` (default: `['find', 'get', 'create', 'patch', 'update','remove']`) - A list of official and [custom service methods](services.md#custom-methods) that should be available to clients. When using this option **all** method names that should be available externally must be passed. Those methods will automatically be available for use with [hooks](./hooks).\n- `events` - A list of [public custom events sent by this service](./events.md#custom-events)\n\n```ts\nimport { EventEmitter } from 'events'\nimport { feathers, type Id } from '@feathersjs/feathers'\n\n// Feathers services will always be event emitters\n// but we can also extend it for better type consistency\nclass MessageService extends EventEmitter {\n  async doSomething(data: { message: string }, params: Params) {\n    this.emit('something',",
    "version": "v5",
    "tokens": [
      "application",
      "---",
      "outline",
      "deep",
      "---",
      "application",
      "badges",
      "npm",
      "version",
      "https",
      "img",
      "shields",
      "npm",
      "feathersjs",
      "authentication-client",
      "svg",
      "style",
      "flat-square",
      "https",
      "www",
      "npmjs",
      "com",
      "package",
      "feathersjs",
      "feathers",
      "changelog",
      "https",
      "img",
      "shields",
      "badge",
      "changelog-",
      "md-blue",
      "svg",
      "style",
      "flat-square",
      "https",
      "github",
      "com",
      "feathersjs",
      "feathers",
      "blob",
      "dove",
      "packages",
      "feathers",
      "changelog",
      "badges",
      "npm",
      "install",
      "feathersjs",
      "feathers",
      "--save",
      "the",
      "core",
      "feathersjs",
      "feathers",
      "module",
      "provides",
      "the",
      "ability",
      "initialize",
      "new",
      "feathers",
      "application",
      "instance",
      "works",
      "node",
      "react",
      "native",
      "and",
      "the",
      "browser",
      "see",
      "the",
      "client",
      "client",
      "chapter",
      "for",
      "more",
      "information",
      "each",
      "instance",
      "allows",
      "for",
      "registration",
      "and",
      "retrieval",
      "services",
      "services",
      "hooks",
      "hooks",
      "plugin",
      "configuration",
      "and",
      "getting",
      "and",
      "setting",
      "configuration",
      "options",
      "initialized",
      "feathers",
      "application",
      "referred",
      "the",
      "app",
      "object",
      "import",
      "feathers",
      "from",
      "feathersjs",
      "feathers",
      "type",
      "servicetypes",
      "add",
      "registered",
      "servi"
    ],
    "category": "application"
  },
  {
    "id": "v5-events",
    "title": "Events",
    "content": "---\noutline: deep\n---\n\n# Events\n\nEvents are the key part of Feathers real-time functionality. All events in Feathers are provided through the [NodeJS EventEmitter](https://nodejs.org/api/events.html) interface. This section describes\n\n- A quick overview of the [NodeJS EventEmitter interface](#eventemitters)\n- The standard [service events](#service-events)\n- How to allow sending [custom events](#custom-events) from the server to the client\n\n<BlockQuote type=\"warning\" label=\"Important\">\n\nFor more information on how to safely send real-time events to clients, see the [Channels chapter](./channels.md).\n\n</BlockQuote>\n\n## EventEmitters\n\nOnce registered, any [service](./services.md) gets turned into a standard [NodeJS EventEmitter](https://nodejs.org/api/events.html) and can be used accordingly.\n\n```ts\nconst messages = app.service('messages')\n\n// Listen to a normal service event\nmessages.on('patched', (message: Message) => console.log('message patched', message))\n\n// Only listen to an event once\nmesssages.once('removed', (message: Message) => console.log('First time a message has been removed', message))\n\n// A reference to a handler\nconst onCreatedListener = (message: Message) => console.log('New message created', message)\n\n// Listen `created` with a handler reference\nmessages.on('created', onCreatedListener)\n\n// Unbind the `created` event listener\nmessages.removeListener('created', onCreatedListener)\n\n// Send a custom event\nmessages.emit('customEvent', {\n  anything: 'Data can be anything'\n})\n```\n\n## Service Events\n\nAny service automatically emits `created`, `updated`, `patched` and `removed` events when the respective service method returns successfully. This works on the client as well as on the server. Events are not fired until all [hooks](./hooks.md) have executed. When the client is using [Socket.io](socketio.md), events will be pushed automatically from the server to all connected clients. This is how Feathers does real-time.\n\n<BlockQuote type=\"tip\">\n\nTo disable sending of events e.g. when updating a large amount of data, set [context.event](./hooks.md#context-event) to `null` in a hook.\n\n</BlockQuote>\n\nAdditionally to the event `data`, all events also get the [hook context](./hooks.md) from their method call passed as the second parameter.\n\n### created\n\nThe `created` event will fire with the result data when a service `create` returns successfully.\n\n```ts\nimport { feathers, type Params, type HookContext } from '@feathersjs/feathers'\n\ntype Message = { text: string }\n\nclass MessageService {\n  async create(data: Message) {\n    return data\n  }\n}\n\nconst app = feathers<{ messages: MessageService }>()\n\napp.use('messages', new MessageService())\n\n// Retrieve the wrapped service object which is also an EventEmitter\nconst messages = app.service('messages')\n\nmessages.on('created', (message: Message, contexHookContext) => console.log('created', message))\n\nmessages.create({\n  text: 'We have to do something!'\n})\n```\n\n### updated, patched\n\nThe `updated` and `p",
    "version": "v5",
    "tokens": [
      "events",
      "---",
      "outline",
      "deep",
      "---",
      "events",
      "events",
      "are",
      "the",
      "key",
      "part",
      "feathers",
      "real-time",
      "functionality",
      "all",
      "events",
      "feathers",
      "are",
      "provided",
      "through",
      "the",
      "nodejs",
      "eventemitter",
      "https",
      "nodejs",
      "org",
      "api",
      "events",
      "html",
      "interface",
      "this",
      "section",
      "describes",
      "quick",
      "overview",
      "the",
      "nodejs",
      "eventemitter",
      "interface",
      "eventemitters",
      "the",
      "standard",
      "service",
      "events",
      "service-events",
      "how",
      "allow",
      "sending",
      "custom",
      "events",
      "custom-events",
      "from",
      "the",
      "server",
      "the",
      "client",
      "blockquote",
      "type",
      "warning",
      "label",
      "important",
      "for",
      "more",
      "information",
      "how",
      "safely",
      "send",
      "real-time",
      "events",
      "clients",
      "see",
      "the",
      "channels",
      "chapter",
      "channels",
      "blockquote",
      "eventemitters",
      "once",
      "registered",
      "any",
      "service",
      "services",
      "gets",
      "turned",
      "into",
      "standard",
      "nodejs",
      "eventemitter",
      "https",
      "nodejs",
      "org",
      "api",
      "events",
      "html",
      "and",
      "can",
      "used",
      "accordingly",
      "const",
      "messages",
      "app",
      "service",
      "messages",
      "listen",
      "normal",
      "service",
      "event",
      "messages",
      "patched",
      "message",
      "message",
      "console",
      "log",
      "message",
      "patched",
      "message",
      "only",
      "listen",
      "event"
    ],
    "category": "events"
  }
]