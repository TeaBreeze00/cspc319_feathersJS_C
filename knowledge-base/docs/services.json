[
  {
    "id": "v5-doc-012",
    "title": "Services Overview",
    "content": "# Services\n\nServices are the heart of every Feathers application. Services are objects or instances of [classes](https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Classes) that implement [certain methods](#service-methods). Feathers itself will also add some [additional methods and functionality](#feathers-functionality) to its services.\n\n## Service methods\n\nService methods are pre-defined [CRUD](https://en.wikipedia.org/wiki/Create,_read,_update_and_delete) and [custom methods](#custom-methods) that your service provides or that have already been implemented by one of the [database adapters](./databases/common.md). Below is an example of a Feathers service as a class or object.\n\n```ts\nimport { feathers } from '@feathersjs/feathers'\nimport type { Params, Id, NullableId } from '@feathersjs/feathers'\n\nclass MyServiceClass {\n  async find(params: Params) {\n    return []\n  }\n  async get(id: Id, params: Params) {}\n  async create(data: any, params: Params) {}\n  async update(id: NullableId, data: any, params: Params) {}\n  async patch(id: NullableId, data: any, params: Params) {}\n  async remove(id: NullableId, params: Params) {}\n  async setup(app: Application, path: string) {}\n  async teardown(app: Application, path: string) {}\n}\n\nconst myServiceObject = {\n  async find(params: Params) {\n    return []\n  },\n  async get(id: Id, params: Params) {},\n  async create(data: any, params: Params) {},\n  async update(id: NullableId, data: any, params: Params) {},\n  async patch(id: NullableId, data: any, params: Params) {},\n  async remove(id: NullableId, params: Params) {},\n  async setup(app: Application, path: string) {},\n  async teardown(app: Application, path: string) {}\n}\n\ntype ServiceTypes = {\n  'my-service': MyServiceClass\n  'my-service-object': typeof myServiceObject\n}\n\nconst app = feathers<ServiceTypes>()\n\napp.use('my-service', new MyServiceClass())\napp.use('my-service-object', myServiceObject)\n```\n\n\n\n\n\nService methods must use [async/await](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/async_function) or return a [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise) and have the following parameters:\n\n- `id` — The identifier for the resource. A resource is the data identified by a unique id.\n- `data` — The resource data.\n- `params` - Additional parameters for the method call (see [params](#params))\n\nOnce registered, the service can be retrieved and used via [app.service()](./application.md#servicepath):\n\n```js\nconst myService = app.service('my-service')\n\nconst items = await myService.find()\n\nconst item = await app.service('my-service').get(1)\n\nconsole.log('.get(1)', item)\n```\n\n\n\n\n\n### params\n\n`params` contain additional information for the service method call. Some properties in `params` can be set by Feathers already. Commonly used are:\n\n- `params.query` - the query parameters from the client, either passed as URL query parameters (see the [REST](./express.md) chapter) or through websockets (see [Socket.io](./socketio.md)).\n- `params.provider` - The transport (`rest` or `socketio`) used for this service call. Will be `undefined` for internal calls from the server (unless passed explicitly).\n- `params.authentication` - The authentication information to use for the [authentication service](./authentication/service.md)\n- `params.user` - The authenticated user, either set by [Feathers authentication](./authentication/) or passed explicitly.\n- `params.connection` - If the service call has been made by a real-time transport (e.g. through websockets), `params.connection` is the connection object that can be used with [channels](./channels.md).\n- `params.headers` - The HTTP headers connected to this service call if available. This is either the headers of the REST call or the headers passed when initializing a websocket connection.\n\n\n\n### .find(params)\n\n`service.find(params) -> Promise` - Retrieves a list of all resources from the service. `params.query` can \n\n[... content truncated for knowledge base ...]",
    "version": "v5",
    "tokens": [
      "services",
      "overview",
      "heart",
      "feathers",
      "application",
      "objects",
      "instances",
      "classes",
      "https",
      "developer",
      "mozilla",
      "org",
      "en",
      "docs",
      "web",
      "javascript",
      "reference",
      "implement",
      "certain",
      "methods",
      "service",
      "itself",
      "also",
      "add",
      "additional",
      "functionality",
      "pre",
      "defined",
      "crud",
      "wikipedia",
      "wiki",
      "create",
      "read",
      "update",
      "delete",
      "custom",
      "provides",
      "already",
      "implemented",
      "one",
      "database",
      "adapters",
      "databases",
      "common",
      "md",
      "example",
      "class",
      "object",
      "ts",
      "import",
      "feathersjs",
      "type",
      "params",
      "id",
      "nullableid",
      "myserviceclass",
      "async",
      "find",
      "return",
      "get",
      "data",
      "patch",
      "remove",
      "setup",
      "app",
      "path",
      "string",
      "teardown",
      "const",
      "myserviceobject",
      "servicetypes",
      "typeof",
      "use",
      "new",
      "await",
      "us",
      "statements",
      "function",
      "promise",
      "global",
      "following",
      "parameters",
      "identifier",
      "resource",
      "identified",
      "unique",
      "method",
      "call",
      "see",
      "registered",
      "retrieved",
      "used",
      "via",
      "servicepath",
      "js",
      "myservice",
      "items",
      "item",
      "console",
      "log",
      "contain",
      "information",
      "properties",
      "set",
      "commonly",
      "query",
      "client",
      "passed",
      "url",
      "rest",
      "express",
      "chapter",
      "websockets",
      "socket",
      "io",
      "socketio",
      "provider",
      "transport",
      "undefined",
      "internal",
      "calls",
      "server",
      "unless",
      "explicitly",
      "authentication",
      "user",
      "authenticated",
      "connection",
      "if",
      "made",
      "real",
      "time",
      "channels",
      "headers",
      "http",
      "connected",
      "available",
      "initializing",
      "websocket",
      "retrieves",
      "list",
      "resources",
      "content",
      "truncated",
      "knowledge",
      "base"
    ],
    "category": "services",
    "source": {
      "path": "api/services.md"
    },
    "tags": [
      "services",
      "crud",
      "find",
      "get",
      "create",
      "update",
      "patch",
      "remove"
    ]
  },
  {
    "id": "v5-doc-013",
    "title": "Services: Service methods",
    "content": "Service methods\n\nService methods are pre-defined [CRUD](https://en.wikipedia.org/wiki/Create,_read,_update_and_delete) and [custom methods](#custom-methods) that your service provides or that have already been implemented by one of the [database adapters](./databases/common.md). Below is an example of a Feathers service as a class or object.\n\n```ts\nimport { feathers } from '@feathersjs/feathers'\nimport type { Params, Id, NullableId } from '@feathersjs/feathers'\n\nclass MyServiceClass {\n  async find(params: Params) {\n    return []\n  }\n  async get(id: Id, params: Params) {}\n  async create(data: any, params: Params) {}\n  async update(id: NullableId, data: any, params: Params) {}\n  async patch(id: NullableId, data: any, params: Params) {}\n  async remove(id: NullableId, params: Params) {}\n  async setup(app: Application, path: string) {}\n  async teardown(app: Application, path: string) {}\n}\n\nconst myServiceObject = {\n  async find(params: Params) {\n    return []\n  },\n  async get(id: Id, params: Params) {},\n  async create(data: any, params: Params) {},\n  async update(id: NullableId, data: any, params: Params) {},\n  async patch(id: NullableId, data: any, params: Params) {},\n  async remove(id: NullableId, params: Params) {},\n  async setup(app: Application, path: string) {},\n  async teardown(app: Application, path: string) {}\n}\n\ntype ServiceTypes = {\n  'my-service': MyServiceClass\n  'my-service-object': typeof myServiceObject\n}\n\nconst app = feathers<ServiceTypes>()\n\napp.use('my-service', new MyServiceClass())\napp.use('my-service-object', myServiceObject)\n```\n\n\n\n\n\nService methods must use [async/await](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/async_function) or return a [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise) and have the following parameters:\n\n- `id` — The identifier for the resource. A resource is the data identified by a unique id.\n- `data` — The resource data.\n- `params` - Additional parameters for the method call (see [params](#params))\n\nOnce registered, the service can be retrieved and used via [app.service()](./application.md#servicepath):\n\n```js\nconst myService = app.service('my-service')\n\nconst items = await myService.find()\n\nconst item = await app.service('my-service').get(1)\n\nconsole.log('.get(1)', item)\n```\n\n\n\n\n\n### params\n\n`params` contain additional information for the service method call. Some properties in `params` can be set by Feathers already. Commonly used are:\n\n- `params.query` - the query parameters from the client, either passed as URL query parameters (see the [REST](./express.md) chapter) or through websockets (see [Socket.io](./socketio.md)).\n- `params.provider` - The transport (`rest` or `socketio`) used for this service call. Will be `undefined` for internal calls from the server (unless passed explicitly).\n- `params.authentication` - The authentication information to use for the [authentication service](./authentication/service.md)\n- `params.user` - The authenticated user, either set by [Feathers authentication](./authentication/) or passed explicitly.\n- `params.connection` - If the service call has been made by a real-time transport (e.g. through websockets), `params.connection` is the connection object that can be used with [channels](./channels.md).\n- `params.headers` - The HTTP headers connected to this service call if available. This is either the headers of the REST call or the headers passed when initializing a websocket connection.\n\n\n\n### .find(params)\n\n`service.find(params) -> Promise` - Retrieves a list of all resources from the service. `params.query` can be used to filter and limit the returned data.\n\n```ts\nclass MessageService {\n  async find(params: Params) {\n    return [\n      {\n        id: 1,\n        text: 'Message 1'\n      },\n      {\n        id: 2,\n        text: 'Message 2'\n      }\n    ]\n  }\n}\n\napp.use('messages', new MessageService())\n```\n\n\n\n### .get(id, params)\n\n`service.get(id, params) -> Promise` \n\n[... content truncated for knowledge base ...]",
    "version": "v5",
    "tokens": [
      "services",
      "service",
      "methods",
      "pre",
      "defined",
      "crud",
      "https",
      "en",
      "wikipedia",
      "org",
      "wiki",
      "create",
      "read",
      "update",
      "delete",
      "custom",
      "provides",
      "already",
      "implemented",
      "one",
      "database",
      "adapters",
      "databases",
      "common",
      "md",
      "example",
      "feathers",
      "class",
      "object",
      "ts",
      "import",
      "feathersjs",
      "type",
      "params",
      "id",
      "nullableid",
      "myserviceclass",
      "async",
      "find",
      "return",
      "get",
      "data",
      "patch",
      "remove",
      "setup",
      "app",
      "application",
      "path",
      "string",
      "teardown",
      "const",
      "myserviceobject",
      "servicetypes",
      "typeof",
      "use",
      "new",
      "await",
      "developer",
      "mozilla",
      "us",
      "docs",
      "web",
      "javascript",
      "reference",
      "statements",
      "function",
      "promise",
      "global",
      "objects",
      "following",
      "parameters",
      "identifier",
      "resource",
      "identified",
      "unique",
      "additional",
      "method",
      "call",
      "see",
      "registered",
      "retrieved",
      "used",
      "via",
      "servicepath",
      "js",
      "myservice",
      "items",
      "item",
      "console",
      "log",
      "contain",
      "information",
      "properties",
      "set",
      "commonly",
      "query",
      "client",
      "passed",
      "url",
      "rest",
      "express",
      "chapter",
      "websockets",
      "socket",
      "io",
      "socketio",
      "provider",
      "transport",
      "undefined",
      "internal",
      "calls",
      "server",
      "unless",
      "explicitly",
      "authentication",
      "user",
      "authenticated",
      "connection",
      "if",
      "made",
      "real",
      "time",
      "channels",
      "headers",
      "http",
      "connected",
      "available",
      "initializing",
      "websocket",
      "retrieves",
      "list",
      "resources",
      "filter",
      "limit",
      "returned",
      "messageservice",
      "text",
      "message",
      "messages",
      "content",
      "truncated",
      "knowledge",
      "base"
    ],
    "category": "services",
    "source": {
      "path": "api/services.md"
    },
    "tags": [
      "services",
      "service",
      "methods"
    ]
  },
  {
    "id": "v5-doc-014",
    "title": "Services: Custom Methods",
    "content": "Custom Methods\n\nA custom method is any other service method you want to expose publicly. A custom method **must have** the signature of `(data, params)` with the same semantics as standard service methods (`data` is the payload, `params` is the service [params](#params)). They can be used with [hooks](./hooks.md) (including authentication) and must be `async` or return a Promise.\n\nIn order to register a public custom method, the names of _all methods_ have to be passed as the `methods` option when registering the service with [app.use()](./application.md#usepath-service--options)\n\n```ts\nimport type { Id, Params } from '@feathersjs/feathers'\n\ntype CustomData = {\n  name: string\n}\n\nclass MyService {\n  async get(id: Id, params: Params) {\n    return {\n      id,\n      message: `You have to do ${id}`\n    }\n  }\n\n  async myCustomMethod(data: CustomData, params: Params) {\n    return data\n  }\n}\n\ntype ServiceTypes = {\n  'my-service': MyService\n}\n\nconst app = feathers<ServiceTypes>()\n  .configure(rest())\n  .use('my-service', new MyService(), {\n    // Pass all methods you want to expose\n    methods: ['get', 'myCustomMethod']\n  })\n```\n\nSee the [REST client](./client/rest.md) and [Socket.io client](./client/socketio.md) chapters on how to use those custom methods on the client.\n\n\n\n",
    "version": "v5",
    "tokens": [
      "services",
      "custom",
      "methods",
      "method",
      "service",
      "want",
      "expose",
      "publicly",
      "signature",
      "data",
      "params",
      "semantics",
      "standard",
      "payload",
      "used",
      "hooks",
      "md",
      "including",
      "authentication",
      "async",
      "return",
      "promise",
      "order",
      "register",
      "public",
      "names",
      "passed",
      "option",
      "registering",
      "app",
      "use",
      "application",
      "usepath",
      "options",
      "ts",
      "import",
      "type",
      "id",
      "feathersjs",
      "feathers",
      "customdata",
      "name",
      "string",
      "class",
      "myservice",
      "get",
      "message",
      "mycustommethod",
      "servicetypes",
      "const",
      "configure",
      "rest",
      "new",
      "pass",
      "see",
      "client",
      "socket",
      "io",
      "socketio",
      "chapters"
    ],
    "category": "services",
    "source": {
      "path": "api/services.md"
    },
    "tags": [
      "services",
      "custom",
      "methods"
    ]
  },
  {
    "id": "v5-doc-015",
    "title": "Services: Feathers functionality",
    "content": "Feathers functionality\n\nWhen registering a service, Feathers (or its plugins) can also add its own methods to a service. Most notably, every service will automatically become an instance of a [NodeJS EventEmitter](https://nodejs.org/api/events.html#events_class_eventemitter).\n\n### .hooks(hooks)\n\nRegister [hooks](./hooks.md) for this service.\n\n### .publish([event, ] publisher)\n\nRegister an event publishing callback. For more information, see the [channels chapter](./channels.md).\n\n### .on(eventname, listener)\n\nProvided by the core [NodeJS EventEmitter .on](https://nodejs.org/api/events.html#events_emitter_on_eventname_listener). Registers a `listener` method (`function(data) {}`) for the given `eventname`.\n\n\n\n### .emit(eventname, data)\n\nProvided by the core [NodeJS EventEmitter .emit](https://nodejs.org/api/events.html#events_emitter_emit_eventname_args). Emits the event `eventname` to all event listeners.\n\n### .removeListener(eventname)\n\nProvided by the core [NodeJS EventEmitter .removeListener](https://nodejs.org/api/events.html#events_emitter_removelistener_eventname_listener). Removes all listeners, or the given listener, for `eventname`.",
    "version": "v5",
    "tokens": [
      "services",
      "feathers",
      "functionality",
      "registering",
      "service",
      "plugins",
      "also",
      "add",
      "methods",
      "notably",
      "automatically",
      "become",
      "instance",
      "nodejs",
      "eventemitter",
      "https",
      "org",
      "api",
      "events",
      "html",
      "class",
      "hooks",
      "register",
      "md",
      "publish",
      "event",
      "publisher",
      "publishing",
      "callback",
      "information",
      "see",
      "channels",
      "chapter",
      "eventname",
      "listener",
      "provided",
      "core",
      "emitter",
      "registers",
      "method",
      "function",
      "data",
      "given",
      "emit",
      "args",
      "emits",
      "listeners",
      "removelistener",
      "removes"
    ],
    "category": "services",
    "source": {
      "path": "api/services.md"
    },
    "tags": [
      "services",
      "feathers",
      "functionality"
    ]
  },
  {
    "id": "v5-doc-016",
    "title": "Services: .find(params)",
    "content": ".find(params)\n\n`service.find(params) -> Promise` - Retrieves a list of all resources from the service. `params.query` can be used to filter and limit the returned data.\n\n```ts\nclass MessageService {\n  async find(params: Params) {\n    return [\n      {\n        id: 1,\n        text: 'Message 1'\n      },\n      {\n        id: 2,\n        text: 'Message 2'\n      }\n    ]\n  }\n}\n\napp.use('messages', new MessageService())\n```\n\n\n\n",
    "version": "v5",
    "tokens": [
      "services",
      "find",
      "params",
      "service",
      "promise",
      "retrieves",
      "list",
      "resources",
      "query",
      "used",
      "filter",
      "limit",
      "returned",
      "data",
      "ts",
      "class",
      "messageservice",
      "async",
      "return",
      "id",
      "text",
      "message",
      "app",
      "use",
      "messages",
      "new"
    ],
    "category": "services",
    "source": {
      "path": "api/services.md"
    },
    "tags": [
      "services",
      "method",
      "find",
      "params"
    ]
  },
  {
    "id": "v5-doc-017",
    "title": "Services: .get(id, params)",
    "content": ".get(id, params)\n\n`service.get(id, params) -> Promise` - Retrieves a single resource with the given `id` from the service.\n\n```ts\nimport type { Id, Params } from '@feathersjs/feathers'\n\nclass TodoService {\n  async get(id: Id, params: Params) {\n    return {\n      id,\n      text: `You have to do ${id}!`\n    }\n  }\n}\n\napp.use('todos', new TodoService())\n```\n\n",
    "version": "v5",
    "tokens": [
      "services",
      "get",
      "id",
      "params",
      "service",
      "promise",
      "retrieves",
      "single",
      "resource",
      "given",
      "ts",
      "import",
      "type",
      "feathersjs",
      "feathers",
      "class",
      "todoservice",
      "async",
      "return",
      "text",
      "app",
      "use",
      "todos",
      "new"
    ],
    "category": "services",
    "source": {
      "path": "api/services.md"
    },
    "tags": [
      "services",
      "method",
      "get",
      "id",
      "params"
    ]
  },
  {
    "id": "v5-doc-018",
    "title": "Services: .create(data, params)",
    "content": ".create(data, params)\n\n`service.create(data, params) -> Promise` - Creates a new resource with `data`. The method should return with the newly created data. `data` may also be an array.\n\nA successful `create` method call emits the [`created` service event](./events.md#created) with the returned data or a separate event for every item if the returned data is an array.\n\n```ts\nimport type { Id, Params } from '@feathersjs/feathers'\n\ntype Message = { text: string }\n\nclass MessageService {\n  messages: Message[] = []\n\n  async create(data: Message, params: Params) {\n    this.messages.push(data)\n\n    return data\n  }\n}\n\napp.use('messages', new MessageService())\n```\n\n\n\n",
    "version": "v5",
    "tokens": [
      "services",
      "create",
      "data",
      "params",
      "service",
      "promise",
      "creates",
      "new",
      "resource",
      "method",
      "return",
      "newly",
      "created",
      "also",
      "array",
      "successful",
      "call",
      "emits",
      "event",
      "events",
      "md",
      "returned",
      "separate",
      "item",
      "if",
      "ts",
      "import",
      "type",
      "id",
      "feathersjs",
      "feathers",
      "message",
      "text",
      "string",
      "class",
      "messageservice",
      "messages",
      "async",
      "push",
      "app",
      "use"
    ],
    "category": "services",
    "source": {
      "path": "api/services.md"
    },
    "tags": [
      "services",
      "method",
      "create",
      "data",
      "params"
    ]
  },
  {
    "id": "v5-doc-019",
    "title": "Services: .update(id, data, params)",
    "content": ".update(id, data, params)\n\n`service.update(id, data, params) -> Promise` - Replaces the resource identified by `id` with `data`. The method should return with the complete, updated resource data. `id` can also be `null` when updating multiple records.\n\nA successful `update` method call emits the [`updated` service event](./events.md#updated-patched). If an array is returned, it will send an individual `updated` event for every item.\n\n\n\n",
    "version": "v5",
    "tokens": [
      "services",
      "update",
      "id",
      "data",
      "params",
      "service",
      "promise",
      "replaces",
      "resource",
      "identified",
      "method",
      "return",
      "complete",
      "updated",
      "also",
      "null",
      "updating",
      "multiple",
      "records",
      "successful",
      "call",
      "emits",
      "event",
      "events",
      "md",
      "patched",
      "if",
      "array",
      "returned",
      "send",
      "individual",
      "item"
    ],
    "category": "services",
    "source": {
      "path": "api/services.md"
    },
    "tags": [
      "services",
      "method",
      "update",
      "id",
      "data"
    ]
  },
  {
    "id": "v5-doc-020",
    "title": "Services: .patch(id, data, params)",
    "content": ".patch(id, data, params)\n\n`patch(id, data, params) -> Promise` - Merges the existing data of the resource identified by `id` with the new `data`. `id` can also be `null` indicating that multiple resources should be patched with `params.query` containing the query criteria.\n\nA successful `patch` method call emits the [`patched` service event](./events.md#updated-patched) with the returned data. When an array is returned when patching mutiple items, it will send an individual `patched` event for every item in the array.\n\nThe method should return with the complete, updated resource data. Implement `patch` additionally (or instead of) `update` if you want to distinguish between partial and full updates and support the `PATCH` HTTP method.\n\n\n\n",
    "version": "v5",
    "tokens": [
      "services",
      "patch",
      "id",
      "data",
      "params",
      "promise",
      "merges",
      "existing",
      "resource",
      "identified",
      "new",
      "also",
      "null",
      "indicating",
      "multiple",
      "resources",
      "patched",
      "query",
      "containing",
      "criteria",
      "successful",
      "method",
      "call",
      "emits",
      "service",
      "event",
      "events",
      "md",
      "updated",
      "returned",
      "array",
      "patching",
      "mutiple",
      "items",
      "send",
      "individual",
      "item",
      "return",
      "complete",
      "implement",
      "additionally",
      "instead",
      "update",
      "if",
      "want",
      "distinguish",
      "partial",
      "full",
      "updates",
      "support",
      "http"
    ],
    "category": "services",
    "source": {
      "path": "api/services.md"
    },
    "tags": [
      "services",
      "method",
      "patch",
      "id",
      "data"
    ]
  },
  {
    "id": "v5-doc-021",
    "title": "Services: .remove(id, params)",
    "content": ".remove(id, params)\n\n`service.remove(id, params) -> Promise` - Removes the resource with `id`. The method should return with the removed data. `id` can also be `null`, which indicates the deletion of multiple resources, with `params.query` containing the query criteria.\n\nA successful `remove` method call emits the [`removed` service event](./events.md#removed) with the returned data or a separate event for every item if the returned data is an array.\n\n\n\n",
    "version": "v5",
    "tokens": [
      "services",
      "remove",
      "id",
      "params",
      "service",
      "promise",
      "removes",
      "resource",
      "method",
      "return",
      "removed",
      "data",
      "also",
      "null",
      "indicates",
      "deletion",
      "multiple",
      "resources",
      "query",
      "containing",
      "criteria",
      "successful",
      "call",
      "emits",
      "event",
      "events",
      "md",
      "returned",
      "separate",
      "item",
      "if",
      "array"
    ],
    "category": "services",
    "source": {
      "path": "api/services.md"
    },
    "tags": [
      "services",
      "method",
      "remove",
      "id",
      "params"
    ]
  }
]