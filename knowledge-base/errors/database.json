[
  {
    "id": "err-007",
    "pattern": "NotFound: No record found for id",
    "cause": "Attempted to get, update, patch, or remove a record with an ID that does not exist in the database.",
    "solution": "Check that the ID is correct and the record exists. Handle 404 errors gracefully in the client.",
    "example": "try { await app.service(\"messages\").get(id) } catch(e) { if (e.code === 404) { /* handle */ } }",
    "version": "v5",
    "tags": [
      "database",
      "crud",
      "404"
    ],
    "category": "database"
  },
  {
    "id": "err-008",
    "pattern": "GeneralError: .*SQLITE_CONSTRAINT",
    "cause": "A SQLite database constraint was violated (unique constraint, foreign key, not null).",
    "solution": "Check for duplicate values on unique columns. Ensure required fields are provided. Verify foreign key references exist.",
    "example": "await app.service(\"users\").create({ email: \"unique@email.com\" }) // fails if email already exists",
    "version": "v5",
    "tags": [
      "sqlite",
      "knex",
      "database",
      "constraint"
    ],
    "category": "database"
  },
  {
    "id": "err-009",
    "pattern": "Conflict: .*duplicate key",
    "cause": "Attempted to create or update a record with a value that violates a unique constraint.",
    "solution": "Check for existing records with the same unique field value. Use upsert pattern or check existence before create.",
    "example": "const existing = await service.find({ query: { email } }); if (existing.total > 0) throw new Conflict(\"Email exists\")",
    "version": "v5",
    "tags": [
      "database",
      "unique",
      "duplicate",
      "409"
    ],
    "category": "database"
  },
  {
    "id": "err-010",
    "pattern": "Unprocessable: .*cast to ObjectId",
    "cause": "MongoDB received an invalid ObjectId string (not a valid 24-character hex string).",
    "solution": "Validate ID format before using in queries. Use ObjectIdSchema from @feathersjs/mongodb for schema validation with automatic conversion.",
    "example": "import { ObjectIdSchema } from \"@feathersjs/mongodb\"; const schema = Type.Object({ userId: ObjectIdSchema() })",
    "version": "v5",
    "tags": [
      "mongodb",
      "objectid",
      "validation",
      "422"
    ],
    "category": "database"
  },
  {
    "id": "err-011",
    "pattern": "GeneralError: .*ECONNREFUSED",
    "cause": "Cannot connect to the database or external service.",
    "solution": "Check that the database server is running. Verify connection string/URL. Check network connectivity and firewall rules.",
    "example": "Check config/default.json for correct database connection settings",
    "version": "v5",
    "tags": [
      "database",
      "connection",
      "network"
    ],
    "category": "database"
  },
  {
    "id": "err-012",
    "pattern": "Error: .*migration.*failed",
    "cause": "A database migration failed to apply.",
    "solution": "Check the migration file for syntax errors. Ensure the database state matches expectations. Run migrations in order. Use `knex migrate:status` to check.",
    "example": "npx knex migrate:latest --knexfile knexfile.ts",
    "version": "v5",
    "tags": [
      "database",
      "migration",
      "knex"
    ],
    "category": "database"
  }
]